
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" /><meta content="Orange3 Textable Prototypes documentation, SuperTextFiles widget" name="description" />
<meta content="Orange3, Textable, Prototypes, documentation, SuperTextFiles, widget" name="keywords" />

    <title>SuperTextFiles &#8212; Orange3 Textable Prototypes 0.14 documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Lyrics Genius" href="lyrics_genius.html" />
    <link rel="prev" title="Orange Textable Prototypes documentation" href="../index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="lyrics_genius.html" title="Lyrics Genius"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Orange Textable Prototypes documentation"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Orange3 Textable Prototypes 0.14 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="supertextfiles">
<span id="id1"></span><h1>SuperTextFiles<a class="headerlink" href="#supertextfiles" title="Permalink to this headline">¶</a></h1>
<img alt="../_images/supertextfiles.png" src="../_images/supertextfiles.png" />
<p>Import raw text, PDF and image files with if necessary an usage of Tesseract, an
OCR application.</p>
<div class="section" id="authors">
<h2>Authors<a class="headerlink" href="#authors" title="Permalink to this headline">¶</a></h2>
<p>Loïc Aubrays, Fábio Torres Cabral (Aris Xanthos, original Text Files)</p>
</div>
<div class="section" id="signals">
<h2>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h2>
<p>Inputs: <code class="docutils literal notranslate"><span class="pre">Message</span></code></p>
<blockquote>
<div><p>JSON Message controlling the list of imported text files</p>
</div></blockquote>
<p>Outputs: <code class="docutils literal notranslate"><span class="pre">Text</span> <span class="pre">data</span></code></p>
<blockquote>
<div><p>Segmentation covering the content of imported text files</p>
</div></blockquote>
</div>
<div class="section" id="installation-of-tesseract">
<h2>Installation of Tesseract<a class="headerlink" href="#installation-of-tesseract" title="Permalink to this headline">¶</a></h2>
<p>To use the OCR feature, an extra installation is needed. There are two parts to install, the engine itself, and the training data for a language.
Please read the <a class="reference external" href="https://tesseract-ocr.github.io/tessdoc/Home.html">official documentation of Tesseract</a>.</p>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This widget is designed to import the contents of one or several files in
Orange Canvas. It outputs a segmentation containing a (potentially annotated)
segment for each imported file.</p>
<p>This widget processes files with 3 methods.</p>
<div class="section" id="for-raw-text-files">
<h3>For raw text files<a class="headerlink" href="#for-raw-text-files" title="Permalink to this headline">¶</a></h3>
<p>The imported textual content is normalized in
several ways:</p>
<ul class="simple">
<li><p>it is systematically converted to Unicode (from the encoding defined by the
user)</p></li>
<li><p>it is subjected to the <a class="reference external" href="http://unicode.org/reports/tr15">canonical Unicode decomposition-recomposition</a> technique (Unicode sequences such as
<code class="docutils literal notranslate"><span class="pre">LATIN</span> <span class="pre">SMALL</span> <span class="pre">LETTER</span> <span class="pre">C</span> <span class="pre">(U+0063)</span></code> + <code class="docutils literal notranslate"><span class="pre">COMBINING</span> <span class="pre">CEDILLA</span> <span class="pre">(U+0327)</span></code> are
systematically replaced by the combined equivalent, e.g. <code class="docutils literal notranslate"><span class="pre">LATIN</span> <span class="pre">SMALL</span> <span class="pre">LETTER</span>
<span class="pre">C</span> <span class="pre">WITH</span> <span class="pre">CEDILLA</span> <span class="pre">(U+00C7)</span></code>)</p></li>
<li><p>it is stripped from the <a class="reference external" href="https://en.wikipedia.org/wiki/Byte_order_mark#UTF-8">utf8 byte-order mark</a> (if any)</p></li>
<li><p>various forms of line endings (in particular <code class="docutils literal notranslate"><span class="pre">\r\n</span></code> and <code class="docutils literal notranslate"><span class="pre">\r</span></code>) are
converted to a single form (namely <code class="docutils literal notranslate"><span class="pre">\n</span></code>)</p></li>
</ul>
</div>
<div class="section" id="for-textual-pdf-files">
<h3>For textual PDF files<a class="headerlink" href="#for-textual-pdf-files" title="Permalink to this headline">¶</a></h3>
<p>The textual content is extracted from the PDF file in the order in the file, not
in the reading view.</p>
</div>
<div class="section" id="for-pictures-and-pdf-files">
<h3>For pictures and PDF files<a class="headerlink" href="#for-pictures-and-pdf-files" title="Permalink to this headline">¶</a></h3>
<p>The textual content is extracted from the images with the <a class="reference external" href="https://github.com/tesseract-ocr/tessdoc">Tesseract OCR</a></p>
<p>The interface of <strong>Super Text files</strong> is available in two versions, according to
whether or not the <strong>Advanced Settings</strong> checkbox is selected.</p>
</div>
<div class="section" id="basic-interface">
<h3>Basic interface<a class="headerlink" href="#basic-interface" title="Permalink to this headline">¶</a></h3>
<p>In its basic version (see <a class="reference internal" href="#supertextfiles-basicinterface"><span class="std std-ref">figure 1</span></a> below), the <strong>Text
Files</strong> widget is limited to the import of a single text or textual PDF file.
The interface contains a <strong>Source</strong> section enabling the user to select the input
file. The <strong>Browse</strong> button opens a file selection dialog; the selected file then
appears in the <strong>File path</strong> text field (it can also be directly inputted with
the keyboard). The <strong>Encoding</strong> drop-down menu enables the user to specify the
encoding of the file.</p>
<div class="figure align-center" id="id2">
<span id="supertextfiles-basicinterface"></span><img alt="Basic interface of the Super Text files widget" src="../_images/supertextfiles_basicinterface.png" />
<p class="caption"><span class="caption-text">Figure 1: <strong>Super Text files</strong> widget (basic interface).</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Note that the language is assumed to be English for OCR purposes (it can be
specified otherwise using the advanced interface.</p>
<p>The <strong>Send</strong> button triggers the emission of a segmentation to the output
connection(s). When it is selected, the <strong>Send automatically</strong> checkbox
disables the button and the widget attempts to automatically emit a
segmentation at every modification of its interface.</p>
<p>The text below the <strong>Send</strong> button indicates the number of characters in the single
segment contained in the output segmentation, or the reasons why no
segmentation is emitted (no input data, encoding issue, etc.).</p>
</div>
<div class="section" id="advanced-interface">
<h3>Advanced interface<a class="headerlink" href="#advanced-interface" title="Permalink to this headline">¶</a></h3>
<p>The advanced version of <strong>Super Text Files</strong> allows the user to import several files
in a determined order; each file can moreover be associated to a distinct
encoding and specific annotations. The emitted segmentation contains a segment
for each imported file.</p>
<div class="figure align-center" id="id3">
<span id="supertextfiles-advancedinterface"></span><a class="reference internal image-reference" href="../_images/supertextfiles_advancedinterface.png"><img alt="Advanced interface of the Super Text files widget" src="../_images/supertextfiles_advancedinterface.png" style="width: 320.0px; height: 581.6px;" /></a>
<p class="caption"><span class="caption-text">Figure 2: <strong>Super Text files</strong> widget (advanced interface).</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<p>The advanced interface (see <a class="reference internal" href="#supertextfiles-advancedinterface"><span class="std std-ref">figure 2</span></a>
above) presents similarities with that of the <strong>URLs</strong>, <strong>Recode</strong>, and <strong>Segment</strong>
widgets. The <strong>Sources</strong> section allows the user to select the input
file(s) as well as their encoding, to determine the order in which they appear
in the output segmentation, and optionally to assign an annotation. The list
of imported files appears at the top of the window; the columns of this list
indicate (a) the name of each file, (b) the corresponding annotation (if any),
and (c) the encoding with which each is associated.</p>
<p>The first buttons on the right of the imported files’ list enable the user to
modify the order in which they appear in the output segmentation (<strong>Move Up</strong>
and <strong>Move Down</strong>), to delete a file from the list (<strong>Remove</strong>) or to
completely empty it (<strong>Clear All</strong>). Except for <strong>Clear All</strong>, all these
buttons require the user to previously select an entry from the list. <strong>Import
List</strong> enables the user to import a file list in JSON format (see sections
<em>JSON im-/export format</em> and <em>File list</em> in Textable documentation) and to add
it to the previously selected sources. In the opposite <strong>Export List</strong> enables
the user to export the source list in a JSON
file.</p>
<p>The remainder of the <strong>Sources</strong> section allows the user to add new files to
the list. The easiest way to do so is to first click on the <strong>Browse</strong> button,
which opens a file selection dialog. After having selected one or more files
in this dialog  and validated the choice by clicking on <strong>Open</strong>, the files
appear in the <strong>File paths</strong> field and can be added to the list by clicking on
the <strong>Add</strong> button. It is also possible to type the complete paths of the
files directly in the text field, separating the paths corresponding to the
successive files with the string ” ” (space + slash + space).</p>
<p>Before adding one or more files to the list by clicking on <strong>Add</strong>, it is
possible to select their encoding (<strong>Encoding</strong>), and to assign an annotation
by specifying its key in the <strong>Annotation key</strong> field and the corresponding
value in the <strong>Annotation value</strong> field. These three parameters (encoding,
key, value) will be applied to each file appearing in the <strong>File paths</strong> field
at the moment of their addition to the list with <strong>Add</strong>.</p>
<p>The <strong>PDF Password</strong> field allows password-protected files to be passed to the widget. Insert the password in the field and proceed as usual.</p>
<p>The <strong>OCR Language(s)</strong> field is needed by the OCR processes. By default,
it contains English abbreviated by <cite>eng</cite>. Multilingual files are supported
by complete the field with the languages separated by <cite>+</cite>. For example,
<cite>eng+fra+ita</cite>. See all <a class="reference external" href="https://tesseract-ocr.github.io/tessdoc/Data-Files.html">installable Tesseract data files</a>. If nothing is
indicated in this field, the language is assumed to be <cite>eng</cite>.</p>
<p><strong>Force OCR</strong> enables the OCR processes of the widget while also extracting textual content. Enable this if textual and image content are both present in the file (or if extraction of
textual content gives really bad results).</p>
<p>The <strong>Options</strong> section allows the user to specify the label affected to the
output segmentation. The <strong>Import filenames with key</strong> checkbox enables the
program to create for each imported file an
annotation whose value is the file name (as displayed in the list) and whose
key is specified by the user in the text field on the right of the checkbox.
Similarly the button <strong>Auto-number with key</strong> enables the program to
automatically number the imported files and to associate the number to the
annotation key specified in the text field on the right.</p>
<p>The <strong>Send</strong> button triggers the emission of a segmentation to the output
connection(s). When it is selected, the <strong>Send automatically</strong> checkbox
disables the button and the widget attempts to automatically emit a
segmentation at every modification of its interface.</p>
<p>The text below the <strong>Send</strong> button indicates the length of the output segmentation in
characters, or the reasons why no segmentation is emitted (no selected file,
encoding issue, etc.). In the example, the two segments corresponding to the
imported files thus total up to 1‘262‘145 characters.</p>
</div>
<div class="section" id="remote-control">
<span id="text-files-remote-control-ref"></span><h3>Remote control<a class="headerlink" href="#remote-control" title="Permalink to this headline">¶</a></h3>
<p><strong>Super Text Files</strong> is one the widgets that can be controlled by means of the
<strong>Message</strong> widget. Indeed, it can receive in input a message consisting
of a file list in JSON format (see sections <em>JSON im-/export format</em> and
<em>File list</em> in Textable documentation), in which case the list
of files specified in this message replaces previously imported sources (if
any). Note that removing the incoming connection from the <strong>Message</strong> instance
will not, by itself, remove the list of files imported in this way from the
<strong>Super Text Files</strong> instance’s interface; conversely, this list of files can be
modified using buttons <strong>Move up/down</strong>, <strong>Remove</strong>, etc. even if the incoming
connection from the <strong>Message</strong> instance has not been removed. Finally, note
that if a <strong>Super Text Files</strong> instance has the basic version of its interface
activated when an incoming connection is created from an instance of
<strong>Message</strong>, it automatically switches to the advanced interface.</p>
</div>
</div>
<div class="section" id="messages">
<h2>Messages<a class="headerlink" href="#messages" title="Permalink to this headline">¶</a></h2>
<div class="section" id="information">
<h3>Information<a class="headerlink" href="#information" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><em>Data correctly sent to output: &lt;n&gt; segments (&lt;m&gt; characters).</em></dt><dd><p>This confirms that the widget has operated properly.</p>
</dd>
<dt><em>Settings were</em> (or <em>Input has</em>) <em>changed, please click ‘Send’ when ready.</em></dt><dd><p>Settings and/or input have changed but the <strong>Send automatically</strong> checkbox
has not been selected, so the user is prompted to click the <strong>Send</strong>
button (or equivalently check the box) in order for computation and data
emission to proceed.</p>
</dd>
<dt><em>No data sent to output yet: no file selected.</em></dt><dd><p>The widget instance is not able to emit data to output because no input
file has been selected.</p>
</dd>
<dt><em>No data sent to output yet, see ‘Widget state’ below.</em></dt><dd><p>A problem with the instance’s parameters and/or input data prevents it
from operating properly, and additional diagnostic information can be
found in the <strong>Widget state</strong> box at the bottom of the instance’s
interface (see <a class="reference internal" href="#warnings">Warnings</a> and <a class="reference internal" href="#errors">Errors</a> below).</p>
</dd>
</dl>
</div>
<div class="section" id="warnings">
<h3>Warnings<a class="headerlink" href="#warnings" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><em>No label was provided.</em></dt><dd><p>A label must be entered in the <strong>Output segmentation label</strong> field in
order for computation and data emission to proceed.</p>
</dd>
<dt><em>No annotation key was provided for auto-numbering.</em></dt><dd><p>The <strong>Auto-number with key</strong> checkbox has been selected and an annotation
key must be specified in the text field on the right in order for
computation and data emission to proceed.</p>
</dd>
<dt><em>JSON message on input connection doesn’t have the right keys and/or values.</em></dt><dd><p>The widget instance has received a JSON message on its <code class="docutils literal notranslate"><span class="pre">Message</span></code> input
channel and the keys and/or values specified in this message do not match
those that are expected for this particular widget type (see sections
<em>JSON im-/export format</em> and <em>File list</em> in Textable documentation).</p>
</dd>
<dt><em>JSON parsing error.</em></dt><dd><p>The widget instance has received data on its <code class="docutils literal notranslate"><span class="pre">Message</span></code> input channel and
the data couldn’t be correctly parsed. Please use a JSON validator to
check the data’s well-formedness.</p>
</dd>
</dl>
</div>
<div class="section" id="errors">
<h3>Errors<a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><em>Couldn’t open file</em> or <em>Couldn’t open file ‘&lt;filepath&gt;’.</em></dt><dd><p>A file couldn’t be opened and read, typically because the specified path
is wrong.</p>
</dd>
<dt><em>Encoding error</em> or <em>Encoding error: file ‘&lt;filepath&gt;’.</em></dt><dd><p>A file couldn’t be read with the specified encoding (it must be in another
encoding).</p>
</dd>
<dt><em>Please make sure all Tesseract parameter files for language(s) ‘&lt;languages&gt;’ have been installed..</em></dt><dd><p>One or more Tesseract language packages are probably missing.</p>
</dd>
<dt><em>Tesseract is not installed or it’s not in your path.</em></dt><dd><p>Add the directory where the tesseract-OCR binaries are located to the Environment Path variables, probably <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files\Tesseract-OCR</span></code></p>
</dd>
</dl>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">SuperTextFiles</a><ul>
<li><a class="reference internal" href="#authors">Authors</a></li>
<li><a class="reference internal" href="#signals">Signals</a></li>
<li><a class="reference internal" href="#installation-of-tesseract">Installation of Tesseract</a></li>
<li><a class="reference internal" href="#description">Description</a><ul>
<li><a class="reference internal" href="#for-raw-text-files">For raw text files</a></li>
<li><a class="reference internal" href="#for-textual-pdf-files">For textual PDF files</a></li>
<li><a class="reference internal" href="#for-pictures-and-pdf-files">For pictures and PDF files</a></li>
<li><a class="reference internal" href="#basic-interface">Basic interface</a></li>
<li><a class="reference internal" href="#advanced-interface">Advanced interface</a></li>
<li><a class="reference internal" href="#remote-control">Remote control</a></li>
</ul>
</li>
<li><a class="reference internal" href="#messages">Messages</a><ul>
<li><a class="reference internal" href="#information">Information</a></li>
<li><a class="reference internal" href="#warnings">Warnings</a></li>
<li><a class="reference internal" href="#errors">Errors</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../index.html"
                        title="previous chapter">Orange Textable Prototypes documentation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="lyrics_genius.html"
                        title="next chapter">Lyrics Genius</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/widgets/SuperTextFiles.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="lyrics_genius.html" title="Lyrics Genius"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Orange Textable Prototypes documentation"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Orange3 Textable Prototypes 0.14 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2016-2018, University of Lausanne.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.0.3.
    </div>
  </body>
</html>