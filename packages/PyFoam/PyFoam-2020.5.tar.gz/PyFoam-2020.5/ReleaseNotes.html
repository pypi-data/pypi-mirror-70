<h1 id="version-2020.05---2020-05-31">Version 2020.05 - 2020-05-31</h1>
<p>This is the first version of <em>PyFoam</em> where the version numbers change from pseudo-semantic versioning to date-based versions</p>
<h2 id="new-featuresutilities">New features/utilities</h2>
<h2 id="enhancements-to-the-utilities">Enhancements to the utilities</h2>
<h3 id="paraview-utilities-now-work-in-paraviews-that-use-python-3">Paraview-utilities now work in Paraviews that use Python 3</h3>
<p>Newer versions of Paraview may use Python 3 as the Python-interpreter which made <code>pyFoamPVSnapshot.py</code> fail.</p>
<p>The Paraview-utiliies (and the library as well) have been adapted to work with Python 3 <strong>and</strong> 2</p>
<h3 id="pyfoampreparecase.py-allows-automatically-zipping-template-results"><code>pyFoamPrepareCase.py</code> allows automatically zipping template results</h3>
<p>The utility now allows automatically zipping the results of template evaluations <strong>if</strong> the result file has no extension (because then it can be assumed that these files are OpenFOAM-dictionaries which are transparently unzipped).</p>
<p>This allows automatically ignoring this files with proper patterns in <code>.gitignore</code> or <code>.hgignore</code></p>
<p>This can be switched on via the command line or the <code>LocalConfigPyFoam</code> file</p>
<h3 id="customregexp-has-a-type-mark-to-add-marks-to-the-plots"><code>customRegexp</code> has a type <code>mark</code> to add marks to the plots</h3>
<p>Plots of <code>type mark</code> don't plot but there is a list <code>targets</code> with names of other plots. Every time the <code>expr</code> matches a vertical line is added to those plots.</p>
<p>Purpose of this type is to annotate singular events in the graphs</p>
<h3 id="plotting-utilities-now-plot-progress-of-snappyhexmesh">Plotting utilities now plot progress of <code>snappyHexMesh</code></h3>
<p>The <code>pyFoamPlotRunner.py</code> and <code>pyFoamPlotWatcher.py</code> now allow plotting the numbers of cells in different refinement levels in <code>snappyHexMesh</code></p>
<p>Different phases are annotated with vertical lines</p>
<h3 id="plotting-utilities-now-plot-progress-of-foamyhexmesh">Plotting utilities now plot progress of <code>foamyHexMesh</code></h3>
<p>The <code>pyFoamPlotRunner.py</code> and <code>pyFoamPlotWatcher.py</code> now allow plotting the numbers of inserted points and the total displacement and distance of <code>foamyHexMesh</code></p>
<h3 id="plotting-utilities-now-print-available-values-of-type">Plotting utilities now print available values of <code>type</code></h3>
<p>Instead of an obscure error message it now prints a list of the available types and a short descriptions</p>
<h3 id="missing-attributes-in-customregexp-specifications-now-give-better-error-messages">Missing attributes in <code>customRegexp</code>-specifications now give better error messages</h3>
<p>Now the complete spec is printed (in addition to the missing attribute)</p>
<h3 id="option---quiet-plot-for-plotting-utilities-swallows-output-of-the-plotting-program">Option <code>--quiet-plot</code> for plotting utilities swallows output of the plotting program</h3>
<p><code>gnuplot</code> sometimes outputs error messages which mess up the <code>ncurses</code>-output. The <code>--quiet-plot</code>-option swallows this output. This behaviour is <strong>not</strong> the default because sometimes this output is useful</p>
<h3 id="colored-markers-in-pyfoamplotwatcher-for-logfiles-from-restarts">Colored markers in <code>pyFoamPlotWatcher</code> for logfiles from restarts</h3>
<p>If following a file which has <code>.restartXX</code>-files then when the file is changed a red marker line with the label "Restart" is shown in all the plots</p>
<h3 id="writefiles-in-a-customregexp-entry-writes-scanned-output-to-file"><code>writeFiles</code> in a <code>customRegexp</code>-entry writes scanned output to file</h3>
<p>If a line</p>
<pre class="example"><code>writeFiles yes;
</code></pre>
<p>is added to an entry in <code>customRegexp</code> then the data is written to a file as well. These files are found in the <code>.analyzed</code>-folder</p>
<h3 id="modifying-splitting-behavior-for-plot-data">Modifying splitting behavior for plot data</h3>
<p>Plotting data is reduced from time to time if the number of data points exceeds a certain threshold. Usually this threshold is 2048. Now for most runner utilities (and the <code>PlotWatcher</code>) there are two additional options: <code>--split-data-points-threshold</code> allows setting the number of data points to a different value than 2048 and <code>--no-split-data-points</code> to switch off splitting altogether</p>
<h3 id="parametric-plots-with-xvalue-in-customregexp">Parametric plots with <code>xvalue</code> in <code>customRegexp</code></h3>
<p>If an entry <code>xvalue</code> is found in a <code>customRegexp</code>-specification then the value with that name is <strong>not</strong> plotted but used instead of the time as the <span class="math inline"><em>x</em></span>-coordinate for the plot. So something like</p>
<pre><code>highspeedLocation {
    theTitle &quot;Location of the highest velocity&quot;;
    expr &quot;Expression highSpeedLoc :  min=\((.+) (.+) .+\)&quot;;
    titles (
        x
        y
    );
    xlabel &quot;x&quot;;
    ylabel &quot;y&quot;;
    xvalue x;
}
</code></pre>
<p>plots the location of the highest speed</p>
<h2 id="enhancements-to-the-library">Enhancements to the library</h2>
<h3 id="paraview-classes-now-work-with-python-3">Paraview-classes now work with Python 3</h3>
<p>See above: <em>Paraview-utilities now work in Paraviews that use Python 3</em></p>
<h3 id="templatefile-now-can-write-the-result-as-zipped"><code>TemplateFile</code> now can write the result as zipped</h3>
<p>The <code>writeFile</code>-method now has an optional parameter <code>gzip</code> that forces the file to be written in compressed form with the extension <code>.gz</code> added. If the file already has the extension <code>.gz</code> it is assumed that <code>gzip</code> is set. If a file of the same name with an extension <code>.gz</code> exists then it is assumed that this is to be overwritten. If a file is written zipped and the same file without <code>.gz</code> exists then it is removed to avoid confusion which file will be used</p>
<h3 id="mechanism-to-have-alternatetime-in-single-customregexp">Mechanism to have <code>alternateTime</code> in single <code>customRegexp</code></h3>
<p>The entry <code>alternateTime</code> now allows to reference special expressions that will serve as an alternate "time source". This was for instance used to implement the progress graph for <code>snappyHexMesh</code></p>
<h3 id="quiet-option-added-to-plotting-implementations"><code>quiet</code>-option added to plotting implementations</h3>
<p>This option tells the plotting program to not output anything to the terminal. Currently only works for <code>Gnuplot</code></p>
<h3 id="the--operator-of-the-pyfoamdataframe-is-now-more-flexible">The <code>[]</code>-operator of the <code>PyFoamDataFrame</code> is now more flexible</h3>
<p>If that operator gets a single numeric value or a list of numbers it gets the rows where the index (usually the time) is nearest to the number(s) and returns a <code>PyFoamDataFrame</code></p>
<p>All other keys are passed to the "usual" <code>[]</code>-operator of the <code>DataFrame</code> but the result is converted to a <code>PyFoamDataFrame</code></p>
<h3 id="each-run-started-by-basicrunner-has-a-unique-id">Each run started by <code>BasicRunner</code> has a unique ID</h3>
<p>Each run gets a unique id. This allows to easily find out whether the data is from the same run</p>
<h3 id="pyfoamaddcasedatatodatabase.py-allows-updating-data"><code>pyFoamAddCaseDataToDatabase.py</code> allows updating data</h3>
<p>The <code>--update</code> switch allows updating the data for runs. Otherwise if the run already exists in the database the utility will fail</p>
<h3 id="rundatabase-gets-method-modify"><code>RunDatabase</code> gets method <code>modify</code></h3>
<p>This method allows updating a run with a unique id by specifying a (nested) dictionary with the values</p>
<h2 id="bug-fixes">Bug fixes</h2>
<h3 id="auto-for-the-solver-does-not-work-with-compressed-controldict"><code>auto</code> for the solver does not work with compressed <code>controlDict</code></h3>
<p>If the <code>controlDict</code> was compressed the value of the <code>application</code>-entry could not be read. This has been fixed</p>
<h3 id="filebasisbackup-now-works-with-zipped-file"><code>FileBasisBackup</code> now works with zipped file</h3>
<p>If a file is already zipped then the <code>FileBasisBackup</code> class could not create a backup file and failed. This works now</p>
<h3 id="case-with-zipped-controldict-not-recognized-as-a-valid-case">Case with zipped <code>controlDict</code> not recognized as a valid case</h3>
<p>If the <code>controlDict</code> was zipped for some reason then PyFoam (and therefor utilities like <code>pyFoamListCase.py</code>) did not recognize it as a valid case</p>
<h3 id="pyfoamdisplayblockmesh.py-not-working-with-newer-vtk-versions"><code>pyFoamDisplayBlockMesh.py</code> not working with newer VTK-versions</h3>
<p>The utility did not work with newer versions of VTK. This has been fixed. In the process support for Python 2.x has been broken</p>
<h2 id="incompatibilities">Incompatibilities</h2>
<h3 id="templatefile-writes-to-zipped-file-if-it-exists"><code>TemplateFile</code> writes to zipped file if it exists</h3>
<p>The method <code>writeFile</code> looks for a file o the same name with <code>.gz</code> added. If this exists then it is assumed that this should be written (in zipped form)</p>
<h3 id="pyfoamdisplayblockmesh.py-not-working-with-python-2.x-anymore"><code>pyFoamDisplayBlockMesh.py</code> not working with Python 2.x anymore</h3>
<p>This utility now requires Python 3.</p>
<p>It is not typically run on computation servers (which mostly still have Python 2) so the extra effort to support this outdated version of Python is not worth it</p>
<h3 id="constructor-of-pyfoamdataframe-is-more-restrictive">Constructor of <code>PyFoamDataFrame</code> is more restrictive</h3>
<p>The constructor now checks if</p>
<ul>
<li>the index has a number type</li>
<li>the index is strictly monothonic</li>
</ul>
<p>because most additional algorithms (<code>integrate()</code> etc) rely on these assumptions</p>
<h3 id="operator-of-pyfoamdataframe-returns-a-pyfoamdataframe"><code>[]</code>-operator of <code>PyFoamDataFrame</code> returns a <code>PyFoamDataFrame</code></h3>
<p>The old behaviour of this was to return a <code>DataFrame</code>. Shouldn't break existing code but makes it easier to chain indexes</p>
<h3 id="rundatabase-fails-if-the-same-unique-id-is-inserted-again"><code>RunDatabase</code> fails if the same unique ID is inserted again</h3>
<p>If a dataset with the same unique ID is added with <code>add</code> for a second time the method fails with a <code>KeyError</code> unless the <code>update_existing</code>-flag is set</p>
<p>This has the potential to beak old code (which probably wouldn't work correctly anyway as the old behaviour was to add the data for the rum for a second time)</p>
<h2 id="code-structure">Code structure</h2>
<h2 id="infrastructure">Infrastructure</h2>
<h2 id="thirdparty">ThirdParty</h2>
<h3 id="modification-to-gnuplot-library">Modification to <code>Gnuplot</code>-library</h3>
<p>There has been a <code>quiet</code>-option added that swallows all terminal output of <code>gnuplot</code>. This only works in the Unix/Linux-implementation. All others ignore it</p>
<h1 id="version-0.6.11---2019-10-31">Version 0.6.11 - 2019-10-31</h1>
<h2 id="code-structure-1">Code structure</h2>
<h3 id="moved-library-into-src-directory">Moved library into <code>src</code>-directory</h3>
<p>To make sure that the <code>tox</code>-tests are not affected the library is moved into the <code>src</code>-subdirectory</p>
<h3 id="added-developer-notes">Added Developer notes</h3>
<p>Added a file <code>DeveloperNotes</code> with hints for people who want to contribute</p>
<h2 id="incompatibilities-1">Incompatibilities</h2>
<h3 id="behaviour-reading-customregexp">Behaviour reading <code>customRegexp</code></h3>
<p>Macro expansion in the <code>customRegexp</code> might break it for some cases</p>
<h3 id="gnuplot-does-not-use-fifo-as-the-default-anymore">Gnuplot does not use <code>FIFO</code> as the default anymore</h3>
<p>See the relevant entry in <em>Enhancements to Utilities</em></p>
<p>A potential problem is that the new implementation leaves files in the <code>/tmp</code> filesystem</p>
<h2 id="enhancements-to-utilities">Enhancements to Utilities</h2>
<h3 id="replay-data-files-in-customregexp">Replay data-files in <code>customRegexp</code></h3>
<p>There are two new <code>type</code> s available in <code>customRegexp</code>: <code>data</code> and <code>dataslave</code>. These have to have one of the enxtries <code>csvName</code>, <code>excelName</code> or <code>txtName</code> with the name of a "spreadsheet type" file. The data from this file will be plotted according to the current simulation time. With <code>dataslave</code> it will be plotted to another plot.</p>
<p>The entry <code>timeName</code> interprets the name of the column that is to be interpreted as the time and either <code>validData</code> or <code>validMatchRegexp</code> select the other columns to plot.</p>
<p><code>skip_header</code>, <code>stripCharacters</code> and <code>replaceFirstLine</code> are other parameters of the <code>SpreadsheetData</code>-class that preprocess the file to conform to an expected format</p>
<h3 id="macro-expansion-in-customregexp">Macro expansion in <code>customRegexp</code></h3>
<p>In the <code>customRegexp</code> it is now possible to use the usual OpenFOAM-macro-expansions with <code>$</code> etc. This makes</p>
<h3 id="progress-entry-in-customregexp-now-allows-format-strings"><code>progress</code> entry in <code>customRegexp</code> now allows <code>format</code> strings</h3>
<p>The <code>progress</code> entry in <code>customRegexp</code>-entries now allows strings in the format of the <code>str.format</code> method in Python. So instead off</p>
<pre class="example"><code>progress &quot;$0: $1&quot;;
</code></pre>
<p>one can write</p>
<pre class="example"><code>progress &quot;{0}: ${1}&quot;;
</code></pre>
<p>The advantage of this format is additional flexibility. For instance the length of the strings can be fixed</p>
<pre class="example"><code>progress &quot;{0:5}: ${1:10}&quot;;
</code></pre>
<p>Note: the entries are strings. Not numbers as expected</p>
<h3 id="pyfoamredoplot.py-allows-passing-terminal-options"><code>pyFoamRedoPlot.py</code> allows passing terminal options</h3>
<p>The utility now allows passing options to the plotting implementation with the <code>--terminal-options</code>-option. This can for instance be used to modify the size of the plot</p>
<h3 id="pyfoamplotwatcher.py-stops-scanning-the-file-is---end-was-specified"><code>pyFoamPlotWatcher.py</code> stops scanning the file is <code>--end</code> was specified</h3>
<p>If the <code>--end-time</code> option is specified then the solver stops scanning if that time is reached. The plot windows are killed. To keep them specify <code>--persistent</code></p>
<h3 id="hardcopies-of-custom-plots-have-more-descriptive-names">Hardcopies of custom plots have more descriptive names</h3>
<p>Instead of the <code>custom00xxx</code> name the hardcopies of custom plots now have and additional short name that describes the content of the plot (it is taken from the id in the <code>customRegexp</code>)</p>
<h3 id="plotting-in-gnuplot-can-switch-between-using-fifo-or-regular-files">Plotting in Gnuplot can switch between using FIFO or regular files</h3>
<p>The plotting utilities have two new options <code>--gnuplot-use-fifo</code> and <code>--gnuplot-no-use-fifo</code> that switches whether the plotting windows will use a FIFO-queue or a regular file for the data of the plot.</p>
<p>Until now FIFO was used. This had two problems</p>
<ul>
<li>a deadlock-situation that sometimes occurred when the utility was stopped with Ctrl-C</li>
<li>the plots were not interactive (no zooming) or did not immediately repaint when the windows were resized</li>
</ul>
<p>Now the default behavior is to use regular files. The problem with this is that the files are not removed in the end from <code>/tmp</code>. This shouldn't be a problem as usually that filesystem is purged of old files at regular intervals</p>
<h3 id="pyfoampreparecase.py-calls-script-after-copying-initial-conditions"><code>pyFoamPrepareCase.py</code> calls script after copying initial conditions</h3>
<p>A script <code>postCopy.sh</code> is called after the initial conditions are copied from <code>0.org</code></p>
<h3 id="stop-after-template-and---keep-zero-improve-control-in-pyfoampreparecaseparameters.py"><code>--stop-after-template</code> and <code>--keep-zero</code> improve control in <code>pyFoamPrepareCaseParameters.py</code></h3>
<p>The combination of these two parameters allow "just" changing something in the templates without running other lengthy operations</p>
<h3 id="pyfoampvsnapshot.py-allows-specification-of-the-image-quality"><code>pyFoamPVSnapshot.py</code> allows specification of the image quality</h3>
<p>The option <code>--quality</code> now allows specifying the quality of the image with a value of <span class="math inline">0</span> being worst (but producing the smallest pictures) and <span class="math inline">100</span> best (but producing huge pictures). The default is <span class="math inline">50</span></p>
<h3 id="image-size-specification-for-pyfoampvsnapshot.py">Image size specification for <code>pyFoamPVSnapshot.py</code></h3>
<p>The options <code>--x-resolution</code> and <code>--y-resolution</code> allow specifying the resolution of the image. If only one of them is set the image is scaled proportionally. This only works for Paraview versions bigger than 5.4</p>
<h3 id="setting-separation-of-views-and-background-transparency-in-pyfoampvsnapshot.py">Setting separation of views and background transparency in <code>pyFoamPVSnapshot.py</code></h3>
<p>Two new options were added that allow setting a separation between different views and making the background transparent. This only works for Paraview versions bigger than 5.4</p>
<h3 id="pyfoampvloadstate.py-automatically-uses-decomposed-or-reconstructed-data"><code>pyFoamPVLoadState.py</code> automatically uses decomposed or reconstructed data</h3>
<p>Depending which of the two sets has more timesteps that state is set to this before loading. So if more parallel timesteps are present then these are used even if the state file uses the reconstructed times. The behavior can be changed with the <code>--decompoes-mode</code>-option</p>
<h3 id="change-directory-for-pyfoampreparecase.py-to-target">Change directory for <code>pyFoamPrepareCase.py</code> to target</h3>
<p>The option <code>--extecute-in-case-directory</code> changes the working directory to the target directory. THis allows specifying parameter files that are in that directory without a full path</p>
<h3 id="pyfoampreparecase.py-can-create-an-example-case"><code>pyFoamPrepareCase.py</code> can create an example case</h3>
<p>A command like</p>
<pre class="example"><code>pyFoamPrepareCase.py exampleCase --paramter-file=parameters.base --build-example --clone-case=originalCase
</code></pre>
<p>creates an example case <code>exampleCase</code> from a template case <code>originalCase</code> using the parameter file <code>parameter.base</code>. It creates a script <code>Allrun</code> that allows executing the case without <code>PyFoam</code> (if none of the scripts uses <code>PyFoam</code>-scripts)</p>
<p>This may not work for all configurations (especially cases that use <code>postTemplate</code>)</p>
<h3 id="pyfoampreparecase-prints-derived-values"><code>pyFoamPrepareCase</code> prints derived values</h3>
<p>The same way that the utility printed the used values it now prints the derived values as well</p>
<h3 id="pyfoampvsnapshot-allows-specifying-different-colors-for-different-views"><code>pyFoamPVSnapshot</code> allows specifying different colors for different views</h3>
<p>The option <code>--color-for-filers</code> now allows specifying a different color for the same filter in different view. This is done by specifying a dictionary</p>
<h3 id="alternatelogscale-for-custom-plots"><code>alternateLogscale</code> for custom plots</h3>
<p>This is analog to <code>logscale</code> but for the values that are specified with <code>alternateAxis</code></p>
<h3 id="pyfoambinarysize.py-now-calculates-documentation-size-as-well"><code>pyFoamBinarySize.py</code> now calculates documentation size as well</h3>
<p>If there is <code>html</code> documentation then this is counted as well</p>
<h3 id="pyfoamcomparedictionary.py-allows-specification-of-significant-digits"><code>pyFoamCompareDictionary.py</code> allows specification of significant digits</h3>
<p>When comparing numbers now the number of significant digits can be specified. This only works for single numbers. Not compound types like lists and vectors</p>
<h2 id="enhancements-to-the-library-1">Enhancements to the Library</h2>
<h3 id="progress-data-is-automatically-converted-to-float"><code>progress</code>-data is automatically converted to <code>float</code></h3>
<p>When using format-strings for the <code>progress</code>-entry then the library automatically attempts to convert the data to <code>float</code> (otherwise it keeps it as <code>str</code>)</p>
<h3 id="additional-directories-in-foaminformation">Additional directories in <code>FoamInformation</code></h3>
<p>Two functions <code>foamCaseDicts()</code> and <code>foamPostProcessing()</code> have been added that return the paths to these directories inside <code>$FOAM_ETC</code></p>
<h3 id="boolproxy-now-works-correctly-with"><code>BoolProxy</code> now works correctly with <code>!=</code></h3>
<p>Added a method <code>__ne__</code> so that the results of the <code>!=</code> operator are consistent with <code>==</code></p>
<h2 id="bug-fixes-1">Bug fixes</h2>
<h3 id="with-dynamic-plots-names-with-_slave-are-problematic">With dynamic plots names with <code>_slave</code> are problematic</h3>
<p>This made the slave plots that had <code>_slave</code> in the name fail</p>
<h3 id="new-style-dimensioned-scalars-fail">New-style dimensioned scalars fail</h3>
<p>As reported in <a href="https://sourceforge.net/p/openfoam-extend/ticketspyfoam/223/">https://sourceforge.net/p/openfoam-extend/ticketspyfoam/223/</a> by Rodrigo Leite Prates parsing certain constructs that involve dimension sets fail. This is because of a problem with the comparison of <code>Dimension</code> that assumes that the other side is a <code>Dimension</code> as well. Fixed</p>
<h3 id="pyfoampvsnapshot.py-not-working-with-paraview-5.6"><code>pyFoamPVSnapshot.py</code> not working with Paraview 5.6</h3>
<p>The API now has to be called through a different module. Otherwise it will fail</p>
<h3 id="customregexp-farthes-away-was-used"><code>customRegexp</code> farthes away was used</h3>
<p>When looking automatically for a <code>customRegexp</code> the one furtherest up in the directory tree was used. Now instead all the <code>customRegexp</code> are used with the lower ones overriding the other ones</p>
<h3 id="parameterfile-class-got-confused-by-commented-lines"><code>ParameterFile</code>-class got confused by commented lines</h3>
<p>One of the oldest classes in PyFoam had the problem that it "found" parameters that were commented out with <code>//</code>. This has been fixed</p>
<h3 id="pyfoambinarysize.py-did-not-count-files-in-build"><code>pyFoamBinarySize.py</code> did not count files in <code>build</code></h3>
<p>Some distros have a directory <code>build</code> with the intermediate object files. This has not been counted until now</p>
<h3 id="binary-files-with-parsedparameterfile-not-working-in-python-3">Binary files with <code>ParsedParameterFile</code> not working in Python 3</h3>
<p>Because Python 3 tries to encode read files as Unicode strings and certain byte combinations are not valid UTF-8 encodings.</p>
<p>Hopefully fixed by reading the file as binary and then create a <code>latin-1</code> encoded string</p>
<p>Reported in <a href="https://sourceforge.net/p/openfoam-extend/ticketspyfoam/225/">https://sourceforge.net/p/openfoam-extend/ticketspyfoam/225/</a> by Johan Hidding</p>
<h3 id="improved-handling-of-binary-files-in-python-2-and-3">Improved handling of binary files in Python 2 and 3</h3>
<p>Parts of the <code>FileBasis</code> class were not working correctly in Python 3 because there strings are no longer 'lists of bytes'. This has been adapted so that these parts work correctly in Python 2 <strong>and</strong> 3 and unit tests have been added</p>
<h1 id="version-0.6.10---2018-08-12">Version 0.6.10 - 2018-08-12</h1>
<p>This is only a minor release with the main purpose to recognize OpenFOAM 6 installations with their new numbering scheme</p>
<h2 id="incompatibilities-2">Incompatibilities</h2>
<h3 id="pyfoampreparecase.py-does-not-execute-decomposition-scripts-for-single-processor-cases"><code>pyFoamPrepareCase.py</code> does not execute decomposition scripts for single processor cases</h3>
<p>If <code>numberOfProcessors</code> is smaller than 2 then the decomposition scripts are ignored. This may cause problems in the unlikely case that the setup process relied on these scripts being always executed</p>
<h2 id="new-featureutilities">New feature/utilities</h2>
<h3 id="utility-pyfoamfunkydocalc.py-to-compare-data-from-funkydocalc">Utility <code>pyFoamFunkyDoCalc.py</code> to compare data from <code>funkyDoCalc</code></h3>
<p>This utility compares data written by the <code>funkyDoCalc</code>-utility from <code>swak4Foam</code> (this data is written with the <code>-writeDict</code>-switch</p>
<p>For details on the usage see the online help of the utility</p>
<h2 id="enhancements-to-utilities-1">Enhancements to Utilities</h2>
<h3 id="recursive-searching-for-pyfoamlistcases.py">Recursive searching for <code>pyFoamListCases.py</code></h3>
<p>The <code>--recursive</code>-option now recursively searches the specified directories for cases. Without the option it behaves the way it did before</p>
<h3 id="look-for-customregexp-in-parent-directories">Look for <code>customRegexp</code> in parent directories</h3>
<p>The plotting utilities now look for <code>customRegexp</code>-files in parent directories of the case directory. This allows to use one file for a number of cases. The file in the directory is still used. The behavior can be switched off with the <code>--no-parent-customRegexp</code>-option</p>
<h3 id="pyfoampreparecase.py-does-not-execute-decomposition-scripts-for-single-processor-cases-1"><code>pyFoamPrepareCase.py</code> does not execute decomposition scripts for single processor cases</h3>
<p>If <code>numberOfProcessors</code> is smaller than 2 then the decomposition scripts are ignored</p>
<h3 id="pyfoampreparecase.py-checks-for-proper-decomposition"><code>pyFoamPrepareCase.py</code> checks for proper decomposition</h3>
<p>At the end the utility now checks if the number of processor directories is consistent with the specified <code>--number-of-processors</code></p>
<h3 id="pyfoamplotwatcher.py-automatically-uses-newest-logfile"><code>pyFoamPlotWatcher.py</code> automatically uses newest logfile</h3>
<p>If a logfile <code>auto</code> is specified then the utility uses the newest file with the extension <code>.logfile</code> in the current directory.</p>
<p>Like any automatism this might produce unexpected results. So use with care</p>
<h2 id="enhancements-to-the-library-2">Enhancements to the Library</h2>
<h3 id="foamfilegenerator-handles-ordereddict"><code>FoamFileGenerator</code> handles <code>OrderedDict</code></h3>
<p>The class now preserves the order if an instance of <code>OrderedDict</code> is found (instead of the usual behaviour of sorting the keys to always get the same output)</p>
<h3 id="sinclude-handled-as-an-alias-to-includeifpresent"><code>#sinclude</code> handled as an alias to <code>#includeIfPresent</code></h3>
<p>OpenFOAM v1812 introduces this as an alias. It is now handled by the parser similarly</p>
<h3 id="openfoam-6-correctly-recognized">OpenFOAM 6 correctly recognized</h3>
<p>With OpenFOAM 6 the naming scheme changed again. Instead of 6.0 (which PyFoam would have recognized) it is now plain 6. PyFoam now recognizes both forms in the directory name</p>
<h2 id="bug-fixes-2">Bug fixes</h2>
<h3 id="pyfoampreparecase.py-did-not-remove-processor-directories"><code>pyFoamPrepareCase.py</code> did not remove <code>processor</code>-directories</h3>
<h2 id="infrastructure-1">Infrastructure</h2>
<h3 id="single-digit-version-numbers-supported">Single digit version numbers supported</h3>
<p>Now installations with names like <code>OpenFOAM-6</code> are recognized</p>
<h1 id="version-0.6.9---2018-02-25">Version 0.6.9 - 2018-02-25</h1>
<h2 id="major-changes">Major changes</h2>
<h3 id="add-curses-output-to-utilities">Add <code>curses</code>-output to Utilities</h3>
<p>On terminals that support it there is now an additional option <code>--curses</code> that enhances the output of the utility. It adds a header and a footer-line and colors the output if it finds special strings like the current time.</p>
<p>Some utilities enhance the output event further: the Runner and Watches utilities color lines that match regular expressions that are sought for: the line is colored differently and data items (which are usually plotted) are colored even more differently. There is also an additional footer-line with the string that is usally printed by the <code>--progress</code>-option</p>
<p>Output can be paused by pressing <code>space</code> and resumed by pressing <code>space</code> again. This behavior may be overridden by some utilities</p>
<p>Caution: on some terminal implementations resizing the terminal causes a segmentation fault of Python which may stop your simulation</p>
<h2 id="incompatibilities-3">Incompatibilities</h2>
<h3 id="pyfoampreparecase.py-creates-.foam-file"><code>pyFoamPrepareCase.py</code> creates <code>.foam</code>-file</h3>
<p>The utility now automatically creates a file that allows Paraview to open the case</p>
<h3 id="hardcoded-foam-version-upgraded-to-4.0">Hardcoded Foam-Version upgraded to <code>4.0</code></h3>
<p>The hardcoded Foam-version that is used if the <code>WM_PROJECT_VERSION</code> environment variable is not set is set to <code>4.0</code> from the rather ancient version <code>1.5</code></p>
<h3 id="none-no-longer-parsed-as-an-equivalent-for-false"><code>none</code> no longer parsed as an equivalent for <code>false</code></h3>
<p>This breaks the parsing of cases where <code>none</code> is used as a word.</p>
<h2 id="new-featuresutilities-1">New features/utilities</h2>
<h3 id="pyfoamjointimelines.py-to-join-timelines-from-restarts"><code>pyFoamJoinTimelines.py</code> to join Timelines from restarts</h3>
<p>This utility joins timeline files from different restarts. The lines from times that will be in the next file are discarded</p>
<h3 id="pyfoamrestartrunner.py-to-automatically-restart-runs"><code>pyFoamRestartRunner.py</code> to automatically restart runs</h3>
<p>For cases that fail strangely (mostly due to problems in the linear solver) but restart successfully this utility helps running them.</p>
<p>The utility tries to restart the solver until either the <code>endTime</code> is reached or no new time-step is written to disk (in this case it makes no sense to run again)</p>
<h2 id="enhancements-to-utilities-2">Enhancements to Utilities</h2>
<h3 id="special-snapshot-utilities-to-use-mesa">Special snapshot utilities to use MESA</h3>
<p>There have been variations of the regular <code>pyFoamPVSnapshot.py</code> added. The only difference they have is that they set a option that enforces the used <code>OpenGL</code>-implementation (especially Mesa). Use this run the script on a machine that don't have hardware support for 3D-graphics</p>
<h3 id="automated-plotting-of-film-properties">Automated plotting of film properties</h3>
<p>For the surface film solvers there now properties like the mass, covered surface, thickness and velocity are automatically plotted</p>
<h3 id="pyfoamclearcase.py-automatically-executes-an-existing-allclean"><code>pyFoamClearCase.py</code> automatically executes an existing <code>Allclean</code></h3>
<p>If present the script (which is usually found in tutorial cases) is executed before other cleaning takes places</p>
<h3 id="pyfoampreparecase.py-executes-tutorial-scripts-if-available"><code>pyFoamPrepareCase.py</code> executes tutorial scripts if available</h3>
<p>If there are scripts present from the original tutorials that do <strong>only</strong> case preparation (like <code>Allrun.pre</code>) but no solver running and no special scripts are present then the original scripts are executed</p>
<h3 id="script-for-clearing-in-pyfoampreparecase.py">Script for clearing in <code>pyFoamPrepareCase.py</code></h3>
<p>If a special script <code>clearCase.sh</code> is found this is used for additional clearing. If instead a script <code>Allclean</code> is found then this is used</p>
<h3 id="pyfoamplotwatcher.py-now-can-handle-multiple-files"><code>pyFoamPlotWatcher.py</code> now can handle multiple files</h3>
<p>If the utility gets more than one file it tries to concatenate the data from theses files. It assumes:</p>
<ul>
<li>that the files are Log-files by a solver. It orders the files by the time that the mesh was created. If noo string <code>Create mesh
 for time =</code> appears in the file it is assumed that this file is the last one in the sequence</li>
<li>that all files except for the last one finished writing (this basically follows from the previous condition)</li>
</ul>
<p>If only one file is specified and matching logdfiles from restarts are found then these are automatically added (there is an option to prohibit this)</p>
<h3 id="pyfoampreparecase.py-now-allows-separate-decomposition-scripts"><code>pyFoamPrepareCase.py</code> now allows separate decomposition scripts</h3>
<p>After three of the phases</p>
<ul>
<li>mesh creation</li>
<li>copying of the <code>.org</code> files</li>
<li>case setup</li>
</ul>
<p>the utility executes a script (<code>decomposeMesh.sh</code>, <code>decomposeFields.sh</code> and <code>decomposeCase.sh</code>) if found. This allows to adapt for different situations (for instance: the mesh already being generated in parallel)</p>
<h3 id="runner-utilities-now-create-seperate-logfiles-on-restart">Runner-utilities now create seperate logfiles on restart</h3>
<p>If PyFoam thinks that a run is restarted (old time-files exist and there already exists a logfile) it creates logfiles with <code>.restart</code> appended. This allows joining the original log and the restart log</p>
<h3 id="pyfoampvsnapshot.py-improves-rewriting-of-state-files"><code>pyFoamPVSnapshot.py</code> improves rewriting of state-files</h3>
<p>The utility now allows changing properties before loading it into paraview. There is also a number of options that allow setting up this process.</p>
<p>First the available sources can be listed with <code>--analyze-state-file</code>. From these sources the properties (with values) for one of these sources can be listed like this</p>
<pre class="example"><code>pyFoamPVSnapshot.py . --list-prop=probeCSV
</code></pre>
<p>then one propery can be changed like this</p>
<pre class="example"><code>pyFoamPVSnapshot.py . --set-property=probeCSV:FileName=probes.csv
</code></pre>
<p><code>--set-property</code> can be used more than once</p>
<h3 id="pyfoampackcase.py-adds-parallel-data"><code>pyFoamPackCase.py</code> adds parallel data</h3>
<p>With the option <code>--parallel</code> now adds parallel data</p>
<h3 id="replacement-option-in-pyfoampvsnapshot.py-supports-foam-format"><code>--replacement</code>-option in <code>pyFoamPVSnapshot.py</code> supports Foam-format</h3>
<p>The option can now alternatively use Foam-format instead of Python-format</p>
<h3 id="pyfoampvsnapshot.py-improved-error-messages-with-problems-in-replacement"><code>pyFoamPVSnapshot.py</code> improved error messages with problems in replacement</h3>
<p>Instead of a stack trace there is now an output of the template string and the available values</p>
<h3 id="customregexp-now-searched-in-parent-directories"><code>customRegexp</code> now searched in parent directories</h3>
<p>If in the directory of the log-file no <code>customRegexp</code> and the log-file is not in the current directory then PyFoam looks for it in all directories up to the current directories</p>
<h2 id="enhancements-to-the-library-3">Enhancements to the Library</h2>
<h3 id="paraview.statefile-extended"><code>Paraview.StateFile</code> extended</h3>
<p>This module has been extended to allow more flexible manipulations of the state-file</p>
<h3 id="basicrunner-now-checks-for-regular-end"><code>BasicRunner</code> now checks for regular End</h3>
<p>The <code>BasicRunner</code> now checks whether the string <code>End</code> was seen and <strong>no</strong> time-information after that. This means that the simulation reached its "regular" end and is also reported in the <code>PyFoamState.TheState</code>-file</p>
<h2 id="bug-fixes-3">Bug fixes</h2>
<h3 id="pyfoampreparecaser.py-ran-out-of-memory-for-large-script-outputs"><code>pyFoamPrepareCaser.py</code> ran out of memory for large script outputs</h3>
<p>Because all the output from scripts was stored in memory before being written to a log it was possible that the utility ran out of memory when there was much output. The output is now written directly to disk</p>
<h3 id="no-courant-number-plottet-if-wm_project_version-is-unset">No Courant number plottet if <code>WM_PROJECT_VERSION</code> is unset</h3>
<p>Scanning for the Courant number defaulted to the versy old version. This has been fixed</p>
<h3 id="rescale-does-not-work-for-streamlines-in-pyfoampvsnapshot.py">Rescale does not work for streamlines in <code>pyFoamPVSnapshot.py</code></h3>
<p><code>--rescale-color-to-source</code> did not work for sources that have no cell values (like streamlines). Fixed.</p>
<h3 id="server-not-correctly-running-on-python-2.7-with-socketserver">Server not correctly running on Python 2.7 with <code>socketserver</code></h3>
<p>Some installations of Python 2.7 already have the <code>socketserver</code>-module which does not have the required <code>BaseServer</code>-module. Fixed</p>
<h1 id="version-0.6.8.1---2017-08-03">Version 0.6.8.1 - 2017-08-03</h1>
<h2 id="bug-fixes-4">Bug fixes</h2>
<h3 id="fork-not-correctly-detected-for-v1706">Fork not correctly detected for <code>v1706</code></h3>
<p>As the <code>+</code> is not present in the <code>WM_PROJECT_VERSION</code> this distro was detected as the Foundation fork</p>
<h1 id="version-0.6.8---2017-07-06">Version 0.6.8 - 2017-07-06</h1>
<h2 id="major-changes-1">Major changes</h2>
<h3 id="pyfoamnet-utilities-now-work-without-a-meta-server"><code>pyFoamNet</code>-utilities now work without a Meta-Server</h3>
<p>As described in other changenotes below the Server process now announces its presence with ZeroConf. This means that a central Meta-Server is no longer necessary. But the <code>zeroconf</code> library has to be present on all involved machines (server and client). It is installed with</p>
<pre class="example"><code>pip install zeroconf
</code></pre>
<h2 id="new-featuresutilities-2">New features/utilities</h2>
<h3 id="added-module-pyfoam.infrastructure.authentication">Added module <code>PyFoam.Infrastructure.Authentication</code></h3>
<p>This module implements a simple public key authentication. For authentication a username and a challenge are sent. If the username is in the set of authenticated keys (or is the own username) then this key is used to check the challenge.</p>
<h2 id="enhancements-to-utilities-3">Enhancements to Utilities</h2>
<h3 id="pyfoamclearcase.py-now-has--dry-run-option"><code>pyFoamClearCase.py</code> now has <code>-dry-run</code> option</h3>
<p>This option doesn't clear anything but prints the things that will be erased</p>
<h3 id="new-option---keep-time-for-pyfoamclearcase.py">New option <code>--keep-time</code> for <code>pyFoamClearCase.py</code></h3>
<p>This option (which can be specified more than once) allows specifying single time-steps that should be kept</p>
<h3 id="pyfoamnetlist.py-no-longer-needs-a-meta-server-to-work"><code>pyFoamNetList.py</code> no longer needs a meta-server to work</h3>
<p>Due to the addition of <code>ZeroConf</code> this utility no longer needs a Meta-Server to find running calculations in the same subnet</p>
<h2 id="enhancements-to-the-library-4">Enhancements to the Library</h2>
<h3 id="better-calculation-of-used-memory-in-runs">Better calculation of used memory in runs</h3>
<p>If the <code>psutil</code>-library is installed then the memory used by parallel runs is calculated as well</p>
<h3 id="pre-and-post-hooks-are-now-also-searched-in-pyfoam.site">Pre and post-hooks are now also searched in <code>PyFoam.Site</code></h3>
<p><code>module</code> specified in <code>preRunHook_</code> and <code>postRunHook_</code> is now searched in <code>PyFoam.Site.</code> as well. This module is the <code>lib</code>-directory in the directory specified by the environment variable <code>PYFOAM_SITE_DIR</code> (which allows adding user-scripts and modules)</p>
<h3 id="adapted-to-correctly-detect-openfoam-v1706">Adapted to correctly detect <code>OpenFOAM+ v1706</code></h3>
<p>This fork has changed its numbering scheme (dropped the <code>+</code> in the version string). This broke a regular expression and a function to detect the number</p>
<h2 id="infrastructure-2">Infrastructure</h2>
<h3 id="the-runner-utilities-now-register-as-zeroconf-services">The <code>Runner</code>-utilities now register as <code>ZeroConf</code>-services</h3>
<p>Unless switched off every <code>pyFoam(Plot)Runner.py</code>-controlled run already had a server process that allowed controlling the process. Now the process also advertises itself via <code>ZeroConf</code> (aka <code>Avahi</code>, <code>Bonjour</code>, <code>mDNS</code>. See <a href="https://www.wikiwand.com/en/Zero-configuration_networking">https://www.wikiwand.com/en/Zero-configuration_networking</a>)</p>
<p>This allows the <code>Net</code>-utilities to operate without a meta-server.</p>
<p>Due to the limitation of the protocol this only works reliable in the same broadcast-subnet</p>
<h2 id="bug-fixes-5">Bug fixes</h2>
<h3 id="keep-interval-in-pyfoamclearcase.py-not-working-for-parallel-cases"><code>--keep-interval</code> in <code>pyFoamClearCase.py</code> not working for parallel-cases</h3>
<p>Due to a copy/past error this option did not work for parallel cases. This is now fixed</p>
<h1 id="version-0.6.7---2017-06-04">Version 0.6.7 - 2017-06-04</h1>
<h2 id="requirements">Requirements</h2>
<h3 id="now-at-least-python-2.6-required">Now at least Python 2.6 required</h3>
<p>The new <code>PLY</code>-version and <code>six</code> now at least requires this Python-version. If your system has Python 2.5 or older stick with PyFoam 0.6.6</p>
<h2 id="incompatibilities-4">Incompatibilities</h2>
<h3 id="names-of-files-generated-by-pyfoampvsnapshot.py-differ">Names of files generated by <code>pyFoamPVSnapshot.py</code> differ</h3>
<p>Due to changes in the time-step numbering the names of the generated files differ. If your work-flow depends on the old names add the options <code>--consecutive-index-for-timesteps</code> and <code>--duplicate-times</code></p>
<h2 id="new-featuresutilities-3">New features/utilities</h2>
<h3 id="utility-pyfoamlistprofilinginfo.py-to-print-profiling-data">Utility <code>pyFoamListProfilingInfo.py</code> to print profiling data</h3>
<p>The utility reads the profiling info written by</p>
<ul>
<li>foam-extend</li>
<li>OpenFOAM+ v1606 (and higher)</li>
<li>or the patch found at <a href="https://sourceforge.net/p/openfoam-extend/svn/HEAD/tree/trunk/Breeder_2.3/distroPatches/applicationLevelProfiling/">https://sourceforge.net/p/openfoam-extend/svn/HEAD/tree/trunk/Breeder_2.3/distroPatches/applicationLevelProfiling/</a></li>
</ul>
<p>and prints it in a human-readable form</p>
<h3 id="utility-pyfoamblockmeshconverter.py-to-convert-a-2d-mesh-to-3d">Utility <code>pyFoamBlockMeshConverter.py</code> to convert a 2D-mesh to 3D</h3>
<p>This utility (and the required Libraries) was written by Hasan Shetabivash (original at <a href="https://github.com/hasansh/blockMeshConverter.git">https://github.com/hasansh/blockMeshConverter.git</a>)</p>
<p>This utility takes a file that is written in a similar syntax as the regular <code>blockMeshDict</code> but with the third dimension missing. It then converts this file to a regular <code>blockMershDict</code> by either extruding in the <span class="math inline"><em>z</em></span>-direction or by rotating around the <span class="math inline"><em>x</em></span> or the <span class="math inline"><em>y</em></span>-axis</p>
<h2 id="enhancements-to-utilities-4">Enhancements to Utilities</h2>
<h3 id="customregexp-now-can-scan-for-texts"><code>customRegexp</code> now can scan for texts</h3>
<p>Until now data items (groups) in the regular expression had to be valid numbers. Otherwise a warning was issued. This behavior is still the default but if a list-variable <code>stringValues</code> is added then the items (whose numbers are specified in the list) are not being plotted. They are written to disk with <code>--write-files</code> and they can be used in <code>progress</code></p>
<h3 id="lines-in-pyfoamhistory-escaped">Lines in <code>PyFoamHistory</code> escaped</h3>
<p>Additions to the history file where arguments contain whitespaces and/or quotes are quoted and quotes inside are escaped. This allows these command lines to be copy/pasted to the command line</p>
<h3 id="values-string-of-pyfoampreparecase.py-now-accepts-openfoam-format"><code>--values-string</code> of <code>pyFoamPrepareCase.py</code> now accepts OpenFOAM-format</h3>
<p>These strings are now parsed as OpenFOAM-strings if there is no starting <code>{</code> and no ending <code>}</code>. With these the old behavior (parsing as a Python-dictionary) is used</p>
<h3 id="pyfoamrunner.py-and-pyfoamplotrunner.py-allow-automatic-selection-of-solver"><code>pyFoamRunner.py</code> and <code>pyFoamPlotRunner.py</code> allow automatic selection of solver</h3>
<p>If for those utilities the word <code>auto</code> is written in place of a proper solver (like <code>interFoam</code>) then the utility looks into <code>controlDict</code> for the <code>application</code>-entry and uses that</p>
<h3 id="calculations-data-transformations-in-customregexp">Calculations (data transformations) in <code>customRegexp</code></h3>
<p>If an entry <code>dataTransformations</code> is specified in the dictionary then the results of these transformations is are for writing/plotting instead of the real data.</p>
<p><code>dataTransformations</code> is a list with valid single-line python-expressions. The groups from the regular expression <code>expr</code> are inserted textually into the expression before it is evaluated. <code>$1</code> is the first group, <code>$2</code> the second and so on (this convention is the same as for the <code>progress</code>-string.</p>
<p>The <code>titles</code>-entry corresponds to these results. If the "raw" (untransformed) data should be plotted as well you'll have to add identity-transformations of the form <code>"$1"</code></p>
<h3 id="multi-part-idnr-for-dynamic-in-customregexp">Multi-part <code>idNr</code> for <code>dynamic</code> in <code>customRegexp</code></h3>
<p><code>idNr</code> can now alternatively be a list of integers (instead of a single integer). In that case the corresponding matches are concatenated (with a <code>_</code> between them) to generate the data id.</p>
<p>If only a number is specified it has the old behavior.</p>
<p>As usual the indexes of the matches stat with <span class="math inline">1</span> (not <span class="math inline">0</span>)</p>
<h3 id="pyfoamlistcases.py-detects-dead-runs"><code>pyFoamListCases.py</code> detects dead runs</h3>
<p>If a run has not had any output in the last hour it is listed as dead. This threshold can be customized</p>
<h3 id="improved-time-handling-of-pyfoampvsnapshot.py">Improved time-handling of <code>pyFoamPVSnapshot.py</code></h3>
<p>The utility now numbers the time-steps by the order in the solution directory. Before that the used time-steps were numbered consecutively (from <span class="math inline">0</span> to <span class="math inline"><em>N</em> − 1</span> if <span class="math inline"><em>N</em></span> time-steps were specified).</p>
<p>Also: by default each time-step is only processed once</p>
<p>The old behaviour can be reproduced with <code>--consecutive-index-for-timesteps</code> and <code>--duplicate-times</code></p>
<h3 id="default-plots-can-be-set-in-configuration">Default plots can be set in configuration</h3>
<p>Whether or not plots are plotted automatically (for instance the execution time) can be set in the <code>[Plotting]</code>-section of the configuration. So it can be set per-case in the <code>LocalConfigPyFoam</code>-file. If a plot is on by default it can be switched off with the corresponding <code>--no</code>-option. If off by default the <code>--with</code>-option switches it on</p>
<h3 id="derivedparameters.py-script-called-from-pyfoampreparecase.py-allows-error-reporting"><code>derivedParameters.py</code>-script called from <code>pyFoamPrepareCase.py</code> allows error reporting</h3>
<p>In that script that calculates new parameters and also can do parameter checking there now is a function <code>error</code> available that makes the script and the complete execution fail</p>
<h2 id="enhancements-to-the-library-5">Enhancements to the Library</h2>
<h3 id="detection-of-new-versions-of-openfoam-foundation-and-openfoam">Detection of new versions of OpenFOAM-foundation and OpenFOAM+</h3>
<p>Both distros changed their scheme for the version numbers and the regular expressions have been adapted to detect them</p>
<h3 id="spreadsheetdata-now-handles-string-data"><code>SpreadsheetData</code> now handles string data</h3>
<p>If one of the columns is string data then the <code>()</code>-operator returns string values (when interpolating the next value)</p>
<h3 id="timelinedata-tolerates-string-values"><code>TimelineData</code> tolerates string values</h3>
<p>The class can now read strings without spaces (OpenFOAM <code>words</code>) and pass them to <code>SpreadsheetData</code></p>
<h3 id="operator-of-spreadsheetdata-works-without-name"><code>()</code> operator of <code>SpreadsheetData</code> works without name</h3>
<p>If no <code>name</code> parameter is given then the method returns a dictionary with all the values</p>
<h3 id="new-function-setcurrenttimeline-in-pyfoam.paraview.data-to-get-data-at-time">New function <code>setCurrentTimeline</code> in <code>PyFoam.Paraview.Data</code> to get data at time</h3>
<p>This function reads timeline data at a specified position. Return the interpolated values from the current simulation time as a table</p>
<p>Use in <code>Programmable Filter</code>. Set output type to <code>vtkTable</code>. To get the values from a timeline <code>postProcessing/swakExpression_pseudoTime/0/pseudoTime</code> use</p>
<pre class="example"><code>from PyFoam.Paraview.Data import setCurrentTimeline
setCurrentTimeline(self.GetOutput(),&quot;swakExpression_pseudoTime&quot;,&quot;pseudoTime&quot;)
</code></pre>
<p>To print the values pipe into a <code>PythonAnnotation</code>-filter. Set ArrayAssociation to <code>Row Data</code> and use an Expression like</p>
<pre class="example"><code>&quot;Time = %.1f (%.1f)&quot; % (average,t_value)
</code></pre>
<p>(this assumes that there is a column <code>average</code>)</p>
<p>Hint: this reads string values as well. But in that case the value has to be converted with <code>val.GetValue(0)</code> in the expression</p>
<h3 id="user-specific-temporary-directory">User-specific temporary directory</h3>
<p>The method <code>PyFoam.FoamInformation.getUserTempDir</code> makes sure that a user specific temporary directory exists and returns the path to that directory</p>
<h3 id="gnuplot-plots-now-get-better-titles"><code>Gnuplot</code>-plots now get better titles</h3>
<p>Instead of <code>Gnuplo</code> the window titles are now set to <code>pyFoam</code> and the actual title of the plots. This should make it easier to find plot windows in the window manager</p>
<h3 id="parsedparameterfile-now-supports-includefunc"><code>ParsedParameterFile</code> now supports <code>#includeFunc</code></h3>
<p>In case of a <code>#includeFunc</code>-entry the file is either searched relative to the current file (this is where the semantics differ from how OpenFOAM because that searches in the <code>system</code>-directory. But as this entry is usually called from <code>system/controlDict</code> the result is the same) and if not it looks for it in <code>$FOAM_ETC</code></p>
<h3 id="new-utility-function-findfileindir">New utility function <code>findFileInDir</code></h3>
<p>This function in <code>PyFoam.Basics.Utilities</code> looks recursively for a file in a directory</p>
<h3 id="humandreadableduration-added-to-pyfoam.basics.utilities"><code>humandReadableDuration</code> added to <code>PyFoam.Basics.Utilities</code></h3>
<p>This function takes a duration (in seconds) and prints it in a human-readable form</p>
<h2 id="infrastructure-3">Infrastructure</h2>
<h3 id="pyfoamversion.py-now-reports-the-versions-of-the-thirdparty-packages"><code>pyFoamVersion.py</code> now reports the versions of the <code>ThirdParty</code>-packages</h3>
<p>Now these versions are reported as well for quick reference</p>
<h2 id="bug-fixes-6">Bug Fixes</h2>
<h3 id="application-classes-fail-in-paraview">Application classes fail in Paraview</h3>
<p>The class <code>PyFoamApplication</code> assumes that the module <code>sys</code> has an element <code>argv</code>. This is not the case inside Paraview</p>
<h3 id="scripts-in-pyfoampreparecaseparameters.sh-not-working-on-mac-os-x">Scripts in <code>pyFoamPrepareCaseParameters.sh</code> not working on Mac OS X</h3>
<p>Because newer versions of Mac OS X remove <code>LD_LIBRARY_PATH</code> from the environment passed to scripts (for security reasons) additional libraries (for instance <code>swak4Foam</code>) were not correctly loaded. This has been fixed by generating a special script that exports <code>LD_LIBRARY_PATH</code> before executing the rest</p>
<h3 id="processor-directories-unsorted-in-solutiondirectory">Processor-directories unsorted in <code>SolutionDirectory</code></h3>
<p>The class assumed that <code>processorX</code> directories were added in the numeric order which is not necessarily the case. This caused problems with <code>pyFoamCaseReport.py</code></p>
<h3 id="deleting-failed-if-a-file-didt-exist">Deleting failed if a file did't exist</h3>
<p>The utility function to delete directories failed if the directory didn't exist. Fixed</p>
<h3 id="missing-files-in-regioncases">Missing files in <code>RegionCases</code></h3>
<p>When creating a <code>RegionCase</code> only the "known" files were symlinked. This causes some programs to fail. Now everything from <code>system</code> in the master-case is symlinked if there is not already a file of that name there</p>
<h3 id="wrong-solver-in-pyfoamlistcase.py">Wrong <code>solver</code> in <code>pyFoamListCase.py</code></h3>
<p>If another utility was run in the mean-time the wrong solver is listed by the utility. Fixed</p>
<h2 id="thirdparty-1">ThirdParty</h2>
<h3 id="updated-tqdm-to-version-4.8.4">Updated <code>tqdm</code> to version 4.8.4</h3>
<p>No reason. Just because there was an update</p>
<h3 id="updated-ply-to-version-3.9">Updated <code>PLY</code> to version 3.9</h3>
<p>This breaks compatibility with Python 2.5 or older</p>
<h3 id="updated-six-to-1.10.0">Updated <code>six</code> to 1.10.0</h3>
<p>This also breaks compatibiliy with Python 2.5 or older</p>
<h1 id="version-0.6.6---2016-07-15">Version 0.6.6 - 2016-07-15</h1>
<h2 id="incompatibilities-5">Incompatibilities</h2>
<h3 id="changes-in-ipython-notebooks-3.0">Changes in <code>IPython</code>-notebooks 3.0</h3>
<p>With IPython 3.0 the names of the Widget classes lost the <code>Widget</code> in the name (for instance <code>DropdownWidget</code> becomes <code>Dropdown</code>). <code>PyFoam</code> has been changed to conform with this but as a consequence won't work with old version of the <code>IPython</code> notebooks</p>
<h2 id="enhancements-to-utilities-5">Enhancements to Utilities</h2>
<h3 id="pyfoampreparecase.py-executes-setfields-if-appropriate"><code>pyFoamPrepareCase.py</code> executes <code>setFields</code> if appropriate</h3>
<p>If no setup-script is specified and if there is a <code>setFieldsDict</code> present then <code>setFields</code> is automatically executed</p>
<h3 id="plotting-utilities-now-automatically-add-custom-plots-depending-on-the-solver-name">Plotting utilities now automatically add custom plots depending on the solver name</h3>
<p>The configuration system now has a section <code>Autoplots</code>. The entries there are all dictionaries with two entries:</p>
<dl>
<dt>solvers</dt>
<dd>a list of regular expressions. If the name of the currently used solver matches any of these expressions then this entry is used
</dd>
<dt>plotinfo</dt>
<dd>a dictionary with the plot information known from regular <code>customRegexp</code>: <code>expr</code>, <code>titles</code> etc
</dd>
</dl>
<p>If the solver matches <code>solvers</code> then a custom plot based on <code>plotinfo</code> is automatically added.</p>
<p>If the solver does not fit the plot is <strong>not</strong> added (this helps avoid processing of unused <code>expr</code>. This is important because processing the <code>expr</code> is one of the things <code>PyFoam</code> uses the most computation time for)</p>
<p>Some common plots (phase fractions for instance or most of the output of <code>chtMultiRegionFoam</code>) are hardcoded into <code>PyFoam</code></p>
<p>Also there is a new section <code>[SolverBase]</code> in the configuration. It is checked whether the current solver name <strong>begins</strong> with any of the keys there. If it does then the list of solvers is assumed to be the solvers this solver was based on and <code>Autoplots</code> for those solvers are added as well. For instance</p>
<pre class="example"><code>[SolverBase]
myReactingCht: [&quot;chtMultiRegionFoam&quot;,&quot;reactingFoam&quot;]
</code></pre>
<p>assumes that a solver <code>myReactingChtFoam</code> is based on these two solvers and automatically adds their <code>Autoplots</code></p>
<p>In addition if a setting like</p>
<pre class="example"><code>[Plotting]
autoplots: cloudNumberMass
</code></pre>
<p>is set (for instance through <code>LocalConfigPyFoam</code> in the case) then the autoplot <code>cloudnumbermass</code> is used regardless of the solver name</p>
<h3 id="alternateaxis-entries-now-can-be-regular-expressions"><code>alternateAxis</code>-entries now can be regular expressions</h3>
<p>This allows specifying plots generated with <code>type dynamic</code> on the alternate axis</p>
<h3 id="plotting-utilities-now-allow-choice-of-gnuplot-terminal">Plotting utilities now allow choice of Gnuplot terminal</h3>
<p>These utilities now allow with the option <code>--gnuplot-terminal</code> to choose the terminal. Otherwise the terminal specified in the configuration (usually <code>x11</code>) is used</p>
<h3 id="plotting-utilities-now-sort-legend-by-name">Plotting utilities now sort legend by name</h3>
<p>Names in the legend are now sorted. This improves readability for large numbers of lines in the plot</p>
<h3 id="pyfoamexecute.py-allows-calling-with-debugger"><code>pyFoamExecute.py</code> allows calling with debugger</h3>
<p>The option <code>--run-with-debugger</code> runs the command in the debugger. The arguments are appropriately handled</p>
<h3 id="pyfoampreparecase.py-fails-if-execution-of-a-script-fails"><code>pyFoamPrepareCase.py</code> fails if execution of a script fails</h3>
<p>If the execution of a script fails (the status code returned by the script is not <span class="math inline">0</span>) then execution of the utility fails (before the utility just continued). This behavior can be overridden with the option <code>--continue-on-script-failure</code>.</p>
<p>It is up to the script to ensure that the failure of a utility called in the script is forwarded to <code>pyFoamPrepareCase.py</code>. For instance with</p>
<pre class="example"><code>set -e
</code></pre>
<p>in a <code>bash</code>-script</p>
<h3 id="hardcopy-in-plotting-library-now-allows-modification-of-gnuplot-terminals"><code>--hardcopy</code> in plotting library now allows modification of <code>gnuplot</code>-terminals</h3>
<p>This option allows setting the options for the terminal selected with <code>--format-of-hardcopy</code>. This overrides any default set in configuration section <code>[Plotting]</code> under the name <code>hardcopyOptions_&lt;term&gt;</code> with <code>&lt;term&gt;</code> being the name of the terminal (for instance for <code>png</code> the option is <code>hardcopyOptions_png</code>.</p>
<h3 id="pyfoampreparecase.py-writes-state-information-about-what-it-is-currently-doing"><code>pyFoamPrepareCase.py</code> writes state information about what it is currently doing</h3>
<p>It writes to the usual state file. This way <code>pyFoamListCases.py</code> will list this information. If the scripts call <code>pyFoamRunner.py</code> then this information will be overwritten</p>
<h3 id="pyfoambinarysize.py-can-handle-new-location-of-binaries-in-openfoam-3.0"><code>pyFoamBinarySize.py</code> can handle new location of binaries in OpenFOAM 3.0</h3>
<p>Since that foam version all binaries (and object files are located in the directory <code>platforms</code>. The utility now finds them there</p>
<h3 id="runner-utilites-now-can-signal-on-blink1-devices"><code>Runner</code>-utilites now can signal on <code>blink(1)</code>-devices</h3>
<p>With the option <code>--use-blink1</code> these utilities now flash on a plugged in <code>blink(1)</code> USB-device for every time-step</p>
<h3 id="pyfoamexecute.py-can-flash-a-blink1"><code>pyFoamExecute.py</code> can flash a <code>blink(1)</code></h3>
<p>To indicate that the utility is still running it is able to play a pattern on a <code>blink(1)</code>-device. This is switched on with <code>-use-blink</code></p>
<h3 id="pyfoamdecompose.py-allows-using-a-template-file"><code>pyFoamDecompose.py</code> allows using a template file</h3>
<p>With the option <code>--template-dict</code> it is possible to initialize the output with an existing file. With this file it is possible to add 'complicated' settings.</p>
<h3 id="pyfoamtimelineplot.py-now-handles-new-format-of-probe-files"><code>pyFoamTimelinePlot.py</code> now handles new format of probe files</h3>
<p>Probe files now have one comment line per probe to specify the position. This format is now correctly detected and plotted. Old probe files are also handled</p>
<h3 id="rest-report-of-pyfoampreparecase.py-now-reports-derived-parameters"><code>ReST</code>-report of <code>pyFoamPrepareCase.py</code> now reports derived parameters</h3>
<p>The <code>.rst</code>-file written by the utility now adds a section on derived parameters if such parameters were specified in a script</p>
<h3 id="pyfoampreparecase-can-now-ignore-directories"><code>pyFoamPrepareCase</code> can now ignore directories</h3>
<p>It is now possible to specify directories that should be ignored when looking for templates. Some sensible defaults like <code>postProcessing</code>, <code>processor*</code> and <code>VTK</code> are already set</p>
<h3 id="pyfoamconverttocsv.py-allows-adding-formulas-to-xlsx-files"><code>pyFoamConvertToCSV.py</code> allows adding formulas to XLSX-files</h3>
<p>The option <code>--add-formula-to-sheet</code> allows adding formulas to the Excel-sheet. Something like</p>
<pre class="example"><code>--add-formula=&quot;massflow:::&#39;inlet&#39;-&#39;outlet&#39;&quot;
</code></pre>
<p>adds a column <code>massflow</code> that subtracts the columns <code>inlet</code> and <code>outlet</code></p>
<h3 id="pyfoamlistcases.py-now-displays-mercurial-info"><code>pyFoamListCases.py</code> now displays mercurial info</h3>
<p>For those who use mercurial to keep track of their cases the utility now has the option <code>-hg-info</code> that displays the mercurial hash-ID, the local id and the branch name</p>
<h3 id="progress-bar-added-to-utilities-with-long-run-time">Progress bar added to utilities with long run-time</h3>
<p>Using the library <code>lqdm</code> progress bars have been added to utilities that have a long run-time and where the progress bars are not disturbing the regular output. These utilities are</p>
<ul>
<li><code>pyFoamListCases.py</code></li>
<li><code>pyFoamBinarySize.py</code></li>
</ul>
<p>Bars can be switched off with <code>--no-progress-bar</code></p>
<h3 id="utilities-that-clear-data-can-now-report-what-is-cleared">Utilities that clear data can now report what is cleared</h3>
<p><code>pyFoamCleasCase.py</code> and all utilities that have a <code>--clear</code> option now also have a <code>--verbose-clear</code> option that reports <strong>what</strong> is being cleared</p>
<h3 id="pyfoamconverttocsv.py-now-allows-manipulating-the-input"><code>pyFoamConvertToCSV.py</code> now allows manipulating the input</h3>
<p>The utility now has two new options:</p>
<dl>
<dt>–strip-characters</dt>
<dd>This allows removing characters before the file is actually read
</dd>
<dt>–replace-first-line</dt>
<dd>Replaces the first line (for instance if the header does not match the data
</dd>
</dl>
<h2 id="enhancements-to-the-library-6">Enhancements to the Library</h2>
<h3 id="detection-of-openfoam-dev">Detection of <code>OpenFOAM-dev</code></h3>
<p>A development installation is now also detected and it is assumed that this uses the new calling convention. Also: PyFoam reports this as version <code>9.9.9</code> (as this is larger than any version in the foreseeable future</p>
<h3 id="add-openfoam-as-a-fork">Add <code>OpenFOAM+</code> as a fork</h3>
<p>An additional fork type <code>openfoamplus</code> has been added (in addition to <code>openfoam</code> and <code>extend</code>). Installations of the form <code>OpenFOAM-vX.X+</code> (with <code>X.X</code> being the version number) are added to this fork. Also <code>OpenFOAM-plus</code> is added as the development version of this fork</p>
<h3 id="accept-new-convention-for-location-of-blockmeshdict">Accept new convention for location of <code>blockMeshDict</code></h3>
<p>In newer OpenFOAM-versions <code>blockMeshDict</code> may be located in <code>system</code>. PyFoam detects it either there or in the old <code>constant/polyMesh</code>-location</p>
<h3 id="handling-of-complex-data-by-configuration">Handling of complex data by <code>Configuration</code></h3>
<p>Lists and dictionaries now can also be specified. Have to be correctly formatted if they are longer than one line (indented by at least one space - convention for configuration files)</p>
<h3 id="configuration-has-method-getarch-for-architecture-dependent-settings"><code>Configuration</code> has method <code>getArch</code> for architecture dependent settings</h3>
<p>If an option <code>opt</code> is requested with this option then it is checked whether an architecture-dependent setting exists. Architecture <code>arch</code> is the output of the <code>uname</code>-command. The architecture-dependent name is <code>opt_arch</code>.</p>
<h3 id="execute-method-from-pyfoam.basics.utilities-returns-status-code"><code>execute</code>-method from <code>PyFoam.Basics.Utilities</code> returns status-code</h3>
<p>This function now has an option that makes it return the status of the execution as well as the output of the execution.</p>
<h3 id="basicrunner-now-supports-more-ways-of-stopping-runs"><code>BasicRunner</code> now supports more ways of stopping runs</h3>
<p>In the past this class (and the utilities based on it) looked for a file <code>stop</code> and stopped the run (with writing) if it was found. Now two additional files are looked for</p>
<dl>
<dt>stopWrite</dt>
<dd>this waits for the next scheduled write and then stops the run
</dd>
<dt>kill</dt>
<dd>gracefully stops the run without any writing
</dd>
</dl>
<h3 id="added-blink1-class-to-support-blink1-devices">Added <code>Blink1</code> class to support <code>blink(1)</code> devices</h3>
<p>This class assumes that a <code>blink(1)</code> USB-device is present and the API-server (from the <code>Blink1Control</code>-program for this is running. It wraps these calls so that utilities can use them conveniently</p>
<h3 id="parsedparameterfiles-now-supports-includeetc"><code>ParsedParameterFiles</code> now supports <code>includeEtc</code></h3>
<p><code>#includeEtc</code> is now supported</p>
<h3 id="parses-uniform-fields-correctly">Parses uniform fields correctly</h3>
<p>Uniform fields of the form <code>1002{42.5}</code> (Field with 1002 values <span class="math inline">42.5</span>) are now correctly parsed</p>
<h3 id="tonumpy-method-added-to-unparsed-and-field"><code>toNumpy</code>-method added to <code>Unparsed</code> and <code>Field</code></h3>
<p>These two classes have a method <code>toNumpy</code> added that transformed the data into a structured <code>NumPy</code>-array. There are no applications for this in <code>PyFoam</code> yet but an application will be the parsing of lagrangian data</p>
<h3 id="added-module-pyfoam.rundictionary.lagrangianpatchdata-to-read-data-from-patch-function-object">Added module <code>PyFoam.RunDictionary.LagrangianPatchData</code> to read data from patch function object</h3>
<p>This module reads data written by the cloud function-object that writes particle data as particles hit the patches and transforms it into <code>numpy</code>-array. Which can also be returned as <code>pandas</code> <code>DataFrames</code></p>
<p>It adds some properties to the data</p>
<ul>
<li>the patch name</li>
<li>the time at which this data was written</li>
<li>a <code>globalId</code> constructed from <code>origId</code> and <code>origProcId</code></li>
</ul>
<h3 id="added-module-pyfoam.rundictionary.lagrangianclouddata-to-read-cloud-data">Added module <code>PyFoam.RunDictionary.LagrangianCloudData</code> to read cloud data</h3>
<p>This gets</p>
<ul>
<li>a case</li>
<li>a cloud name</li>
<li>a time name and reads the lagrangian data from the specified time and converts it to a pandas <code>DataFrame</code></li>
</ul>
<p>A <code>globalId</code> that is consistent with the one in <code>LagrangianPatchData</code> is set</p>
<h3 id="method-code-added-to-restructuredtexthelper">Method <code>code</code> added to =RestructuredTextHelper</h3>
<p>This method formats a string assuming that it is a program code. Default value is <code>python</code></p>
<h3 id="parsedparameterfile-now-parses-new-dimension-format-correctly"><code>ParsedParameterFile</code> now parses new dimension format correctly</h3>
<p>Newer OpenFOAM-versions allow dimensions in symbolic format (for example <code>[ m s^-1 ]</code>). These are now correctly parsed</p>
<h3 id="parsedparameterfiel-now-parses-uniform-fields-correctly"><code>ParsedParameterFiel</code> now parses uniform fields correctly</h3>
<p>Fields of the form <code>23 { 4.2 }</code> (meaning "23 times 4.2") are now correctly parsed</p>
<h2 id="infrastructure-4">Infrastructure</h2>
<h3 id="change-of-documentation-from-epydoc-to-sphinx">Change of documentation from <code>epydoc</code> to <code>sphinx</code></h3>
<p>As <code>expydoc</code> is discontinued the API-documentation is now generated with <code>sphinx</code>. Just run</p>
<pre class="example"><code>make docu
</code></pre>
<p>to do so.</p>
<p>Advantage is that now with</p>
<pre class="example"><code>make docset
</code></pre>
<p>a document set for offline searching with <code>Dash</code> (for Mac OS X) or clones (on other OSes) can be generated</p>
<h3 id="adaptions-to-the-unittests">Adaptions to the unittests</h3>
<p>Untitests only used to run correctly if the OpenFOAM-version was 1.7. Are changed to run with OF 3.0. No effort has been made to support intermediate versions as the changes are mainly about changed tutorials</p>
<h2 id="bug-fixes-7">Bug fixes</h2>
<h3 id="wrong-format-of-executiontime-breaks-plotting-utilities">Wrong format of <code>ExecutionTime</code> breaks plotting utilities</h3>
<p>If the <code>ExecutionTime</code> is not as expected <code>pyFoamPlotWatcher.py</code> and <code>pyFoamPlotRunner.py</code> finish with an error. This is now more robust</p>
<h3 id="phases-not-working-with-dynamic-plots"><code>phases</code> not working with dynamic plots</h3>
<p>For dynamic plots the addition of the phase name did not work. Fixed</p>
<h3 id="phase-name-added-to-function-object-output">Phase name added to function object output</h3>
<p>If <code>phase</code> was set the output of the function objects got it added to the names even though the function objects do not belong to the phase. This is fixed</p>
<h3 id="one-region-mesh-too-many-in-utilities-that-change-the-boundary">One region mesh too many in utilities that change the boundary</h3>
<p>When working with regions one region too many was added in <code>pyFoamChangeBoundaryType.py</code> and <code>pyFoamChangeBoundaryName.py</code>. Fixed</p>
<h3 id="pyfoamclearcase.py-fails-on-write-protected-case"><code>pyFoamClearCase.py</code> fails on write-protected case</h3>
<p>If a case is write protected then the utility failed. Now it only issues a warning and continues cleaning</p>
<h3 id="copying-of-directories-in-pyfoampreparecase.py-confused-by-zipped-files">Copying of directories in <code>pyFoamPrepareCase.py</code> confused by zipped files</h3>
<p>When copying one file to another and one of them is zipped then copying doesn't replace the destination correctly but adds the zipped/unzipped variant</p>
<h3 id="wrong-times-for-multi-view-layouts-in-pyfoampvsnapshots.py">Wrong times for multi-view layouts in <code>pyFoamPVSnapshots.py</code></h3>
<p>If snapshots were taken from state files with multiple layouts then some of the views had the wrong time (either that from the state-file or from the timestep before). Fixed</p>
<h3 id="first-timestep-not-plotted-and-not-stored">First timestep not plotted (and not stored)</h3>
<p>The data from the first timestep was not plotted under certain circumstances. This has been fixed</p>
<h3 id="dyld_library_path-not-passed-on-mac-os-x-10.11"><code>DYLD_LIBRARY_PATH</code> not passed on <em>Mac OS X 10.11</em></h3>
<p>Starting with this OS-version as a security feature the system does not pass <code>LD_LIBRARY_PATH</code> and <code>DYLD_LIBRARY_PATH</code> to a shell. <code>PyFoam</code> detects this and creates these variables and makes sure they are passed to the processes</p>
<h3 id="newer-versions-of-pandas-broke-the-writing-of-excel-files-with-pyfoamconverttocsv.py">Newer versions of <code>pandas</code> broke the writing of excel files with <code>pyFoamConvertToCSV.py</code></h3>
<p>The reason is that the old way of making axis data unique did not work anymore. This has been fixed</p>
<h3 id="capital-e-in-exponential-notation-for-floats-breaks-parser">Capital <code>E</code> in exponential notation for floats breaks parser</h3>
<p>This problem has been reported at <a href="https://sourceforge.net/p/openfoam-extend/ticketspyfoam/220/">https://sourceforge.net/p/openfoam-extend/ticketspyfoam/220/</a> (the number <code>1E-2</code> is not correctly parsed to <code>0.01</code>) and has been fixed</p>
<h3 id="runner-utilities-clear-processor-directories-if-first-time-in-parallel-data-differs"><code>Runner</code>-utilities clear processor directories if first time in parallel data differs</h3>
<p>In cases where the parallel data has a different start directory than <span class="math inline">0</span> the <code>pyFoamRunner.py</code> and similar utilities cleared that data and made a restart impossible. This has been fixed</p>
<h3 id="utilities-pvpython-not-working-when-installed-through-distutils">Utilities <code>pvpython</code> not working when installed through <code>distutils</code></h3>
<p>As the <code>distutils</code> (and all mechanisms built on these like <code>pip</code>) replace the used python in scripts the necessary <code>pvpython</code> was removed. This has been fixed by generating a temporary script file that is actually executed with =pvpython)</p>
<h2 id="thirdparty-2">ThirdParty</h2>
<h3 id="added-tqdm-for-progress-bars">Added <code>tqdm</code> for progress bars</h3>
<p>Add the library <code>tqdm</code> (<a href="https://github.com/tqdm/tqdm">https://github.com/tqdm/tqdm</a>) for adding progress bars to utilities.</p>
<p>Library is under <code>MIT</code> License</p>
<h1 id="version-0.6.5---2015-06-01">Version 0.6.5 - 2015-06-01</h1>
<h2 id="major-changes-2">Major changes</h2>
<h3 id="pyfoam-now-on-python-package-index">PyFoam now on <em>Python Package Index</em></h3>
<p>PyFoam is now found at <a href="https://pypi.python.org/pypi/PyFoam">https://pypi.python.org/pypi/PyFoam</a></p>
<p>Recommended way of installing is using <a href="https://pip.pypa.io/en/latest/">https://pip.pypa.io/en/latest/</a> :</p>
<pre class="example"><code>pip install PyFoam
</code></pre>
<p>This will also make sure that the required <code>numpy</code>-package is installed</p>
<h2 id="incompatibilities-6">Incompatibilities</h2>
<h3 id="archivedir-in-solutiondirectory-discouraged"><code>ArchiveDir</code> in <code>SolutionDirectory</code> discouraged</h3>
<p>As this was never really used it is discouraged (the option is still there).</p>
<p>If you don't understand what this means it probably doesn't concern you</p>
<h3 id="pickled-data-files-now-written-as-binary">Pickled data files now written as binary</h3>
<p>All pickled files are now written and read in binary mode (as this was the only way that works consistently in Python 3). This <strong>may</strong> cause problems with old cases (but no effort has been made to check whether this problem actually exists)</p>
<h3 id="the-plotrunner-and-plotwatcher-now-dont-strip-spaces">The <code>PlotRunner</code> and <code>PlotWatcher</code> now don't strip spaces</h3>
<p>These two utilities now don't strip leading spaces from the read lines. This preserves formatting in the output but might break scripts that rely on these spaces.</p>
<p>The old behaviour may be reset by overriding <code>stripSpaces</code> in section <code>SolverOutput</code> with a value <code>True</code></p>
<h3 id="different-column-names-in-pyfoamconverttocsv.py">Different column names in <code>pyFoamConvertToCSV.py</code></h3>
<p>The enhanced naming of the columns might break scripts that rely on the old naming</p>
<h3 id="pyfoamchangeboundaryname.py-and-pyfoamchangeboundarytype.py-automatically-modify-processorx"><code>pyFoamChangeBoundaryName.py</code> and <code>pyFoamChangeBoundaryType.py</code> automatically modify <code>processorX</code></h3>
<p>In previous versions these boundary files were not modified. Now they are. Scripts that rely on unchanged <code>boundary</code>-files in the <code>processorX</code>-directories might fail. Old behavior can be set with the <code>--no-processor</code>-option</p>
<h2 id="bugfixes">Bugfixes</h2>
<h3 id="arbitrary-commands-in-templatefile-passed-to-file">Arbitrary commands in <code>TemplateFile</code> passed to file</h3>
<p>Lines with <code>$$</code> are passed to the file and make it syntactically incorrect. Fixed</p>
<h3 id="pickled-files-not-opened-in-binary-mode">Pickled files not opened in binary mode</h3>
<p>This caused problems in Python 3 were binary strings were not correctly written (actually: attempts to write them to a pickle-file made the application fail)</p>
<h3 id="additional-fixes-for-python-3">Additional fixes for Python 3</h3>
<p>In a number of classes/applications semantic differences between Python 2 and 3 makes these fail on Python 3. Changes are</p>
<ul>
<li>Replace <code>map</code> with list comprehension where possible</li>
<li>Modify wrappings in <code>CTestRun</code> to work with Python3</li>
<li>Replace <code>print</code> with <code>print_</code></li>
<li>Semantic difference in division of two integers: Python3 gives a floating point number as a result</li>
</ul>
<h3 id="parsedparameterfile-fails-if-complete-dictionary-is-include-ed"><code>ParsedParameterFile</code> fails if "complete" dictionary is <code>#include</code> ed</h3>
<p>If an included dictionary has a header parsing failed. This is fixed by retrying the parsing with the header</p>
<h3 id="parsedparameterfile-fails-if-there-is-more-info-after-include"><code>ParsedParameterFile</code> fails if there is more info after <code>#include</code></h3>
<p>If there is for instance a <code>;</code> after an <code>#include</code> statement the regular OpenFOAM-parser ignores it. The PyFoam-parser failed. This has been fixed and the parser behaves like regular OpenFOAM</p>
<h3 id="pyfoamdisplayblockmesh.py-not-working-with-vtk-6"><code>pyFoamDisplayBlockMesh.py</code> not working with VTK 6</h3>
<p>Due to changes in the API the program did not work. This is now fixed and the program works with VTK 6 as well as VTK 5</p>
<h3 id="pyfoamcreatemodulefile.py-failed-with-environment-variables-containing"><code>pyFoamCreateModuleFile.py</code> failed with environment variables containing <code>=</code></h3>
<p>In that case an overeager <code>split</code> created lists.</p>
<p>Fix provided by Martin Beaudoin</p>
<h3 id="fix-import-in-generalvcsinterface">Fix import in <code>GeneralVCSInterface</code></h3>
<p>Change in the syntax of imports in Python 3 broke this one. Fixed. But doesn't matter as Mercurial doesn't support Python3</p>
<h3 id="support-of-old-format-in-parsedblockmeshdict-broken">Support of old format in <code>ParsedBlockMeshDict</code> broken</h3>
<p>Wrong usage of indexes. Fixed</p>
<h3 id="templatefile-not-correctly-working-in-python-3"><code>TemplateFile</code> not correctly working in Python 3</h3>
<p>Reason was a different calling convention to the <code>exec</code>-function of Python. Fixed</p>
<h3 id="certain-things-not-done-by-pyfoampreparecase-in---quiet-was-set">Certain things not done by <code>pyFoamPrepareCase</code> in <code>--quiet</code> was set</h3>
<p>This was due to actions being on the same level as the debug-output. Fixed</p>
<h3 id="annoying-warning-at-the-start-of-the-run">Annoying warning at the start of the run</h3>
<p>For certain solvers the plot utilities issued a warning during a phase when no information about the current time is available. This is now fixed</p>
<h3 id="redirected-values">Redirected values</h3>
<p>not used when iterating over dictionaries When iterating over dictionaries with redirects the values in the redirected dictionaries were not used. This is now fixed</p>
<h3 id="behavior-of-template-engine-not-consistent-in-python3-and-python2">Behavior of Template-engine not consistent in Python3 and Python2</h3>
<p>Due to a difference in the behavior of the <code>eval</code>-function in Python 3 certain expressions (especially with list comprehension) failed. Fixed</p>
<h3 id="braces-brackets-parentheses-in-column-name-broke-rundatabase">Braces, brackets, parentheses in column name broke <code>RunDatabase</code></h3>
<p>These characters were stripped out by <em>SQLite</em>. They are thus normalized to special character combinations (which will be denormalized after reading)</p>
<h3 id="finding-of-installations-in-alternate-locations-broken">Finding of installations in alternate locations broken</h3>
<p>The algorithm to find (Open)FOAM-installations in alternate locations was broken. Now working again</p>
<h3 id="failing-on-3.x-if-socket-for-server-thread-already-occupied">Failing on 3.x if socket for server thread already occupied</h3>
<p>Due to a a change in the socket API if the socket for the network thread (usually port 18000) was already notified the program failed. Fixed. Tested on 2.7 as well</p>
<h2 id="enhancements-to-utilities-6">Enhancements to Utilities</h2>
<h3 id="pyfoampreparecase-recognizes-multi-region-cases"><code>pyFoamPrepareCase</code> recognizes multi-region cases</h3>
<p>If there are multiple regions and no <code>prepareMesh.sh</code> then it will try to execute <code>blockMesh</code> for the regions</p>
<h3 id="pyfoampreparecase-adds-specialized-templates"><code>pyFoamPrepareCase</code> adds specialized templates</h3>
<p>With the option <code>--extension-addition</code> additional templates that override the regular templates can be specified.</p>
<p>Application may be for instance special templates for <code>potentialFoam</code></p>
<h3 id="pyfoampreparecase-keeps-data-generated-by-meshing-script"><code>pyFoamPrepareCase</code> keeps data generated by meshing script</h3>
<p>If the meshing stage generates a <code>0</code>-directory then data in that directory will be kept. This can be switched off if this is not the desired behaviour</p>
<h3 id="pyfoampreparecase-adds-possibility-for-a-file-with-default-values"><code>pyFoamPrepareCase</code> adds possibility for a file with default values</h3>
<p>If a file <code>default.parameters</code> is found in this directory then this file is automatically read. This file is read like a regular parameter-file but it can also have added information about the values:</p>
<ul>
<li><p>if an entry is a dictionary and has the entries <code>description</code> and <code>values</code> then it is assumed that this is a <em>group of values</em>. These groups are only used for grouping in reports. The <code>values</code> are set in the global scope.</p>
Groups can be nested</li>
<li>if an entry is a dictionary and has the entries <code>description</code> and <code>default</code> then it is assumed that the dictionary holds meta-information about the value. The entry <code>default</code> is the value that is actually used.</li>
<li>an additional enty <code>options</code> in that dictionary specifies a list of valid values for that parameter. The utility fails if the set value is not in that list. This is useful for setting boundary condition types or similar entries where only a limited number of words is valid</li>
</ul>
<p>It is recommended that <strong>all</strong> used values are specified in this file as this will be used for reporting</p>
<h3 id="pyfoampreparecase-writes-report-about-the-variables"><code>pyFoamPrepareCase</code> writes report about the variables</h3>
<p>The utility now writes a <em>Restructured Text</em> file with a report about the variables. Information from <code>default.parameters</code> like groupings and <code>description</code> are used in this report. Also the default value and the actual value are reported.</p>
<p>The file can be converted with a utility like <code>rst2pdf</code></p>
<h3 id="gnuplot-can-be-styled-with-default-commands">Gnuplot can be styled with default commands</h3>
<p>For all utilities that use Gnuplot as the backend for plotting there is now a configuration option <code>gnuplotCommands</code> in the <code>Plotting</code>-section with the usual <code>set</code> commands of Gnuplot. This is preset to display a grid and the y-axis.</p>
<p>The settings can be reset with the <code>gnuplotCommands</code>-list in the <code>customRegexp</code>-entries</p>
<h3 id="pyfoampvsnapshot.py-now-supports-paraview-4.2-and-later"><code>pyFoamPVSnapshot.py</code> now supports Paraview 4.2 and later</h3>
<p>The API for screenshots changed with Paraview 4.2 and later. This API now supports layouts if multiple views were specified. The default behaviour is now to make only one screenshot per layout. The old behaviour (one screenshot per view) can now be switched on with the <code>-no-layouts</code>-option.</p>
<p>This allows screenshots exactly the way they look on screen</p>
<h3 id="pyfoampvsnapshot.py-allows-switching-between-decomposed-and-reconstructed-data"><code>pyFoamPVSnapshot.py</code> allows switching between decomposed and reconstructed data</h3>
<p>The utility now rewrites the state file so that either decomposed or reconstructed data is read. The default is that the data set for which more timesteps exist is selected</p>
<h3 id="pyfoampvsnapshot.py-allows-changing-the-field-for-sources"><code>pyFoamPVSnapshot.py</code> allows changing the field for sources</h3>
<p>It is now possible to specify a dictionary with source names and the fields that should be set for them. This allows quickly coloring the same layout with different fields.</p>
<p>This works for</p>
<ul>
<li>3D (rendered) filters</li>
<li>bar charts</li>
</ul>
<h3 id="pyfoampvsnapshot.py-allows-rescaling-the-color-legend"><code>pyFoamPVSnapshot.py</code> allows rescaling the color-legend</h3>
<p>There are now two ways to rescale the color-transfer functions</p>
<ul>
<li>by specifying a dictionary with the ranges</li>
<li>by specifying a source. The range of the data on that source will be used to scale the data
<ul>
<li>when specifying a source percentiles can be specified for the highest and lowest percent of the cells to be ignored</li>
</ul></li>
</ul>
<p>The first method will override the second</p>
<h3 id="pyfoampvsnapshot-reads-parameters-written-by-pyfoampreparecase.py"><code>pyFoamPVsnapshot</code> reads parameters written by <code>pyFoamPrepareCase.py</code></h3>
<p>An option allows specifying that these parameters should be read. They are then available for substitution in the <em>Text</em> source</p>
<h3 id="pyfoamlistcases.py-allows-filtering"><code>pyFoamListCases.py</code> allows filtering</h3>
<p>The utility now has options to select the cases that should be considered by name of the case. Either substrings or globs can be used. Ignore patterns can be specified as well</p>
<h3 id="pyfoamrunparametervariation.py-now-allows-dictionaries"><code>pyFoamRunParametervariation.py</code> now allows dictionaries</h3>
<p>The format of the parameter-file has been extended so that instead of values variations can be dictionaries. The contents of the dictionary are then used instead of a single value. An example would look like this</p>
<pre><code>defaults {
         a 1;
         b 2;
         c 3;
}

values {
       solver (
              interFoam
       );
       inVel ( 1 2 );
       outP ( 0 1 );
       sets (
            { name foo; a 3; }
            { name bar; b 4; c 5; }
       );
}
</code></pre>
<p>where sets has two variations. Values unset in <code>sets</code> will be used from <code>defaults</code></p>
<h3 id="pyfoamconverttocsv.py-now-has-all-functionality-of-pyfoamjoincsv.py"><code>pyFoamConvertToCSV.py</code> now has all functionality of <code>pyFoamJoinCSV.py</code></h3>
<p>Now all functionality of the <code>Join</code>-utility is present in the <code>Convert</code> utility (including interpolating times)</p>
<p><code>pyFoamJoinCSV.py</code> will be removed in future versions of <code>PyFoam</code></p>
<h3 id="dynamic-in-customregexp-now-allows-composition-from-multiple-match-groups"><code>dynamic</code> in <code>customRegexp</code> now allows composition from multiple match-groups</h3>
<p>If <code>idNr</code> is a list then now the actual id is composed from all the match groups specified in that list. If <code>idNr</code> is an integer then it behaves like it used to.</p>
<p>Application for the new behavior would be for instance to have the flow of different species on different patches in one plot</p>
<h3 id="new-type-dynamicslave-in-customregexp">New type <code>dynamicslave</code> in <code>customRegexp</code></h3>
<p>This combines the properties of the types <code>dynamic</code> and <code>slave</code>: dynamically generated data sets that are added to another plot</p>
<h3 id="additional-profiling-option---profile-line-profiler">Additional profiling option <code>--profile-line-profiler</code></h3>
<p>Uses the library <code>line_profiler</code> for profiling. Only of interest for developers. Experimental</p>
<h3 id="utilities-that-use-templates-can-be-customized-with-the-configuration">Utilities that use templates can be customized with the configuration</h3>
<p>The section <code>Template</code> in the configuration now allows modifying the behavior of the templating engine (how templates are processed and syntax details)</p>
<h3 id="localconfigpyfoam-now-can-be-read-before-argument-parsing"><code>LocalConfigPyFoam</code> now can be read <strong>before</strong> argument parsing</h3>
<p>This allows overruling options before they are set be command line options. This has to be enabled by the application (it doesn't make sense for all).</p>
<p>An example is the <code>pyFoamPrepareCase.py</code>-utility where the local configuration file can overrule the default behavior of the template engine</p>
<h3 id="pyfoamconverttocsv.py-automatically-selects-the-output-format-with---automatic-format"><code>pyFoamConvertToCSV.py</code> automatically selects the output format with <code>--automatic-format</code></h3>
<p>Now if that option is selected and the extension of the output is <code>xls</code> the option <code>-write-excel-file</code> doesn't have to be set anymore</p>
<h3 id="pyfoamconverttocsv.py-allows-adding-original-data-as-separate-sheets"><code>pyFoamConvertToCSV.py</code> allows adding original data as separate sheets</h3>
<p>The input data files now can be added to an excel-file as separate sheets with the <code>--add-sheets</code>-option</p>
<h3 id="pyfoamconverttocsv.py-has-improved-naming-of-columns"><code>pyFoamConvertToCSV.py</code> has improved naming of columns</h3>
<p>Now if there is more than one source file then the columns from the first source also get a unique prefix.</p>
<p>It is also possible to clean the column names before writing them to file. The time name can be changed with <code>-write-time-name</code>. Substrings can be replaced with <code>--column-name-replace</code> and simple functions can be applied with <code>--column-name-transformation</code></p>
<h3 id="pyfoamconverttocsv.py-now-supports-sets-files"><code>pyFoamConvertToCSV.py</code> now supports sets-files</h3>
<p>The utility now can read these files and determine the field names from the filename. <code>--automatic</code> assumes that files with the extension <code>.xy</code> are of this format</p>
<h3 id="pyfoampreparecase.py-can-calculate-derived-values-with-a-script"><code>pyFoamPrepareCase.py</code> can calculate derived values with a script</h3>
<p>If a script <code>derivedParameters.py</code> is present then it is executed and values set in that script can be used in the templates as well</p>
<h3 id="pyfoampreparecase.py-adds-a-variable-numberofprocessors"><code>pyFoamPrepareCase.py</code> adds a variable <code>numberOfProcessors</code></h3>
<p>If unspecified by the user this variable is automatically <span class="math inline">1</span>. It can be used by the templates to distinguish between different cases</p>
<p>The <code>PrepareCaseJob</code>-class in <code>ClusterJob</code> automatically sets the values according to the number of processors in the cluster job</p>
<h3 id="pyfoamchangeboundaryname.py-and-pyfoamchangeboundarytype.py-now-support-decomposed-cases"><code>pyFoamChangeBoundaryName.py</code> and <code>pyFoamChangeBoundaryType.py</code> now support decomposed cases</h3>
<p>Both utilities now also modify the boundary files in the <code>processorX</code>-direcories. This behaviour can be switched off from the command line</p>
<h3 id="pyfoampreparecase.py-has-possibility-for-templates-after-the-final-stage"><code>pyFoamPrepareCase.py</code> has possibility for templates after the final stage</h3>
<p>Templates with the extension <code>.finalTemplate</code> are executed after the <code>caseSetup.sh</code>-script.</p>
<h3 id="pyfoamrunparametervariation-allows-adding-postfix-to-cloned-cases"><code>pyFoamRunParameterVariation</code> allows adding postfix to cloned cases</h3>
<p>The option <code>--cloned-case-postfix</code> adds a postfix to the cloned directory names. This can be used if the results from multiple variations with the same parameter file should be kept (for instance when comparing OpenFOAM-versions)</p>
<h3 id="pyfoamconverttocsv-now-allows-setting-of-default-input-file-format"><code>pyFoamConvertToCSV</code> now allows setting of default input file format</h3>
<p>The option <code>--default-read-format</code> now allows setting a different format than <code>csv</code> as the default format for input files</p>
<h3 id="pyfoamlistcases.py-adds-the-hostname-to-the-printed-information"><code>pyFoamListCases.py</code> adds the hostname to the printed information</h3>
<p>The utility tries to determine from the pickled data the host the simulation was run on and prints it (can be switched off with an option)</p>
<h3 id="pyfoampreparecase.py-allows-cloning"><code>pyFoamPrepareCase.py</code> allows cloning</h3>
<p>The utility now has an option <code>--clone-case</code> to clone a new case before starting instead of working in the specified directory (in this case the case will be cloned to this directory). The name of the created directory <strong>can</strong> be constructed from the specified parameters with the <code>--automatic-casename</code>-option</p>
<h2 id="enhancements-to-the-library-7">Enhancements to the Library</h2>
<h3 id="solutiondirectory-detects-multiple-regions"><code>SolutionDirectory</code> detects multiple regions</h3>
<p>Valid regions are sub-directories of <code>constant</code> that have a <code>polyMesh</code>-directory</p>
<h3 id="boolproxy-now-compares-like-builtin-bool"><code>BoolProxy</code> now compares like builtin <code>bool</code></h3>
<p>Comparison used to fail for types where it was not explicitly implemented like <code>None</code></p>
<h3 id="pyfoamapplication-class-now-supports-pvpython-for-debugging"><code>PyFoamApplication</code>-class now supports <code>pvpython</code> for debugging</h3>
<p>Now <code>--interactive-after-exception</code> also works in the utilities that use <code>pvpython</code></p>
<h3 id="templatefile-now-allows-more-flexible-assignments"><code>TemplateFile</code> now allows more flexible assignments</h3>
<p>In the mode where executions are allowed now more flexible assignments to variables are possible. To be specific:</p>
<ul>
<li>array assignments like</li>
</ul>
<pre class="example"><code>$$ a[&quot;t&quot;] = 2
</code></pre>
<ul>
<li>multiple assignments like</li>
</ul>
<pre class="example"><code>$$ a,b = 2,3
</code></pre>
<h3 id="thirdparty-library-six-upgraded-to-1.9.0"><code>ThirdParty</code>-library <code>six</code> upgraded to 1.9.0</h3>
<p>This library has been upgraded to the latest released version</p>
<h3 id="additional-markup-in-restructuredtexthelper">Additional markup in <code>RestructuredTextHelper</code></h3>
<p>There are additional methods <code>emphasis</code>, <code>strong</code> and <code>literal</code> that wrap their arguments in the appropriate markup</p>
<p>The methods <code>bulletList</code>, <code>enumerateList</code> and <code>definitionList</code> take lists or dictionaries and mark them as lists</p>
<h3 id="spreadsheetdata-can-now-read-files-produced-by-the-sets-functionobject"><code>SpreadsheetData</code> can now read files produced by the <code>sets</code>-functionObject</h3>
<p>If the option <code>isSampleFile</code> is set then it is assumed that the field names are in the filename and there is no header with field names in the file</p>
<h2 id="infrastructure-5">Infrastructure</h2>
<h3 id="adaption-of-debian-packaging-to-new-conventions">Adaption of Debian packaging to new conventions</h3>
<p>By Oliver Borm. The building of Debian packages for Python libraries has changes. Necessary adaptions were done by Oliver Borm</p>
<h2 id="development-changes">Development changes</h2>
<h3 id="now-uses-pytest-for-unittesting">Now uses <code>pytest</code> for unittesting</h3>
<p>The <code>nose</code>-library had problems and all the unit-tests run out-of-the-box with <code>pytest</code></p>
<h1 id="version-0.6.4---2014-11-24">Version 0.6.4 - 2014-11-24</h1>
<h2 id="requirements-1">Requirements</h2>
<p>The only requirement is a python-installation. The main testing and development has been done with 2.7 and 2.6. Python 2.5 should work but not for all utilities. Currently 2.6, 2.7 and 3.4 are used during development.</p>
<p>Certain functionalities need special Python-libraries. The main one is <code>numpy</code> for plotting. Other libraries that might be of interest are <code>matplotlib</code>, <code>pandas</code> and <code>IPython</code>. For <code>pyFoamDisplayBlockmesh.py</code> the libraries <code>PyQt4</code> and <code>vtk</code> are needed. Other libraries are tested for and reported by <code>pyFoamVersion.py</code> but not required (only install if you're sure that you need it)</p>
<h2 id="future-changes">Future changes</h2>
<h3 id="redundant-utilities-pyfoamjoincsv.py-and-pyfoamconverttocsv.py-unified">Redundant utilities <code>pyFoamJoinCSV.py</code> and <code>pyFoamConvertToCSV.py</code> unified</h3>
<p>These two utilities are almost indistinguishable and will be unified into one</p>
<h2 id="major-changes-3">Major changes</h2>
<h3 id="multi-line-regular-expressions-in-customregexp">Multi-line regular expressions in <code>customRegexp</code></h3>
<p>If in <code>customRegexp</code> an <code>expr</code> is found with <code>\n</code> then this expression is matched over multiple consecutive lines. Types like <code>dynamic</code> work as usual.</p>
<p>This makes it possible to match for instance the output of the <code>forces</code>-function objects</p>
<h3 id="enhancement-of-pyfoamprepare.py">Enhancement of <code>pyFoamPrepare.py</code></h3>
<p>The utility which was introduced in the last version is becomong more usable and will be central to all things that set up the case (for instance a special <code>ClusterJob</code>)</p>
<h3 id="enhancements-of-the-csv-utilities">Enhancements of the CSV-utilities</h3>
<p>These utilities are now more flexible and allow writing and reading of Excel-files too</p>
<h3 id="environment-variable-pyfoam_site_dir-and-pyfoam_dir">Environment variable <code>PYFOAM_SITE_DIR</code> and <code>PYFOAM_DIR</code></h3>
<p>Both variables are not necessary but <code>PYFOAM_SITE_DIR</code> allows consistent insertion of site-specific libraries and utilities.</p>
<p><code>PYFOAM_DIR</code> is set by some Foam-distributions and tested for by <code>pyFoamVersion.py</code>. It is supposed to point to the currents PyFoam-installation.</p>
<p><code>PYFOAM_SITE_DIR</code> points to a directory with site-specific scripts and configurations. The sub-directories supported (and thested py <code>pyFoamVersion.py</code>) are</p>
<dl>
<dt>bin</dt>
<dd>directory with scripts. It has to be added to the <code>PATH</code> outside of PyFoam (for instance in the <code>.bashrc</code>)
</dd>
<dt>etc</dt>
<dd>Optional directory which is searched for configuration files. Priority is below the user settings and above the global settings
</dd>
<dt>lib</dt>
<dd>Optional directory to allow mixing in site-specific library files. Imported as <code>PyFoam.Site</code>: For instance if a file <code>Foo.py</code> is present in <code>lib</code> it can be imported as <code>PyFoam.Site.Foo</code>. This directory does not have to be (in fact: it <strong>shouldn't</strong>) added to <code>PYTHONPATH</code>
</dd>
</dl>
<p>Purpose of <code>PYFOAM_SITE_DIR</code> is to allow administrators to provide site-wide scripts and settings for all users on a site</p>
<h2 id="incompatibilities-7">Incompatibilities</h2>
<h3 id="option---silent-removed-from-pyfoampreparecase.py">Option <code>--silent</code> removed from <code>pyFoamPrepareCase.py</code></h3>
<p>Option has been renamed to <code>--no-complain</code></p>
<h3 id="keys-in-rundatabase-with-column-names-that-contain-upper-case-letters-change">Keys in <code>RunDatabase</code> with column-names that contain upper-case letters change</h3>
<p>SQLite does not support case-sensitive column-names (<code>s_max</code> and <code>S_max</code> are the same). To change this the upper case letters in the column names are replaced by an underscore and the letter (<code>S_max</code> becomes <code>_s__max</code>)</p>
<p>This means that old databases might not be read correctly</p>
<h3 id="change-in-unique-variable-names-in-pyfoamconverttocsv.py">Change in unique variable names in <code>pyFoamConvertToCSV.py</code></h3>
<p>The algorithm to make variable names unique has changed (basically it uses the part of the filenames that differ) and scripts relying on these names might fail</p>
<h3 id="pyfoam.ipython-module-renamed-to-pyfoam.ipythonhelpers"><code>PyFoam.IPython</code>-module renamed to <code>PyFoam.IPythonHelpers</code></h3>
<p>The name of the module crashed in certain instances (especially unit-testing) with the regular <code>IPython</code>-library. To avoid these crashes it has been renamed to <code>IPythonHelpers</code>. This raises two potential problems:</p>
<ul>
<li>scripts that <code>import</code> the module have to be adapted to the new name</li>
<li>IPython-notebooks created with <code>pyFoamIPythonNotebook.py</code> have two imports pointing to this module. These notebooks have to be adapted to be usable again</li>
</ul>
<h2 id="bugfixes-1">Bugfixes</h2>
<h3 id="templates-in-pyfoampreparecase.py-did-not-keep-permissions">Templates in <code>pyFoamPrepareCase.py</code> did not keep permissions</h3>
<p>This was a problem for script-templates which were not executable any more. Fixed</p>
<h3 id="pyfoamcomparator.py-failed-due-to-circular-dependency"><code>pyFoamComparator.py</code> failed due to circular dependency</h3>
<p>This has been fixed by adding an import in <code>BasicRunner.py</code></p>
<h3 id="pyfoamdumprundatabasetocsv.py-fails-if-pandas-data-is-requested"><code>pyFoamDumpRunDatabaseToCSV.py</code> fails if Pandas-data is requested</h3>
<p>This is now fixed</p>
<h3 id="sort-for-list-broke-code-on-python-3"><code>sort</code> for list broke code on Python 3</h3>
<p>Some calls for <code>sort</code> still used the <code>cmp</code>-parameter which does not exist for Python3 anymore. These calls have been replaced with <code>key</code> and <code>reverse</code></p>
<h3 id="changing-the-of-version-does-not-work-in-python-3">Changing the OF-version does not work in Python 3</h3>
<p>Because the output of <code>subprocess</code> is now <em>binary</em> instead of a regular string. Fixed</p>
<h3 id="adddata-in-pyfoamdataframe-extrapolates-for-invalid-values"><code>addData</code> in <code>PyFoamDataFrame</code> extrapolates for invalid values</h3>
<p>This was due to incorrect use of the <code>interpolate</code>-method</p>
<h3 id="keep-last-did-not-work-for-pyfoamclearcase.py-and-parallel-cases"><code>--keep-last</code> did not work for <code>pyFoamClearCase.py</code> and parallel cases</h3>
<p>This was because there was a problem in the library code and the utility did not consider the parallel time-steps. Fixed</p>
<h3 id="pyfoamdumprundatabasetocsv.py-does-not-add-basic-run-information"><code>pyFoamDumpRunDatabaseToCSV.py</code> does not add basic run information</h3>
<p>Basic run information was not added to the file. Now it is with the prefix <code>runInfo//</code></p>
<h3 id="restore-of-filebasisbackup-did-not-work">Restore of <code>FileBasisBackup</code> did not work</h3>
<p>The logic for checking whether a file was "backupable" was wrong. This affected the proper restore of files with utilities for instance for <code>--write-all</code></p>
<h3 id="remove-circular-dependency-in-datastructures">Remove circular dependency in <code>DataStructures</code></h3>
<p>According to the bug <a href="http://sourceforge.net/p/openfoam-extend/ticketspyfoam/219/">http://sourceforge.net/p/openfoam-extend/ticketspyfoam/219/</a> it was not possible to import <code>DataStructures</code> because of a circular dependency with <code>FoamFileGenerator</code>. Fixed by moving an import to the back of the file</p>
<h2 id="new-featuresutilities-4">New features/Utilities</h2>
<h3 id="pyfoamrunparametervariation.py"><code>pyFoamRunParameterVariation.py</code></h3>
<p>This utility takes a template case and a file specifying the parameter variation and creates cases with the <code>pyFoamPrepareCase.py</code>-engine, runs a solver on these cases and collects the data into a database. The database can then be extracted with <code>pyFoamDumpRunDatabaseToCSV.py</code></p>
<h3 id="pyfoambinarysize.py"><code>pyFoamBinarySize.py</code></h3>
<p>Calculates the size of the binaries in an OpenFOAM-installation separated by compile-option</p>
<h3 id="pyfoamblockmeshrewrite.py"><code>pyFoamBlockMeshRewrite.py</code></h3>
<p>Assists the user in rewriting the <code>blockMeshDict</code> by doing simple, but error-prone transformations. Assumes "sensible" formatting: one block/vertex etc per line.</p>
<p>Sub-commands are:</p>
<dl>
<dt>refine</dt>
<dd>refines mesh by multiplying cell numbers in the blocks
</dd>
<dt>number</dt>
<dd>Adds comments with the vertex numbers. Should help the user when editing/modifying the mesh
</dd>
<dt>stripNumber</dt>
<dd>Remove the comments added by <code>number</code>
</dd>
<dt>mergeVertices</dt>
<dd>Adds vertices from other blockMeshes that are not present in the current blockMesh
</dd>
<dt>renumberVertices</dt>
<dd>Take another <code>blockMeshDict</code>, copy over the <code>vertices</code>-section of that mesh and rewrite <code>blocks</code> and <code>patches</code> so that they conform to these <code>vertices</code>. The original <code>vertices</code> have to be a sub-set of the <code>vertices</code> in the other mesh
</dd>
<dt>normalizePatches</dt>
<dd>Rotates patches so that the lowest number is in front
</dd>
</dl>
<h2 id="enhancements-to-utilities-7">Enhancements to Utilities</h2>
<h3 id="pyfoamchangeboundarytype.py-allows-setting-additional-values"><code>pyFoamChangeBoundaryType.py</code> allows setting additional values</h3>
<p>The option <code>--additional-values</code> allows specifying a dictionary with additional values for the boundary (stuff that is needed by <code>mappedWall</code> etc)</p>
<h3 id="pyfoampreparecase.py-now-has-of-version-and-fork-as-defined-variables"><code>pyFoamPrepareCase.py</code> now has OF-version and fork as defined variables</h3>
<p>This allows to write case-templates that can distinguish between different OF-versions</p>
<h3 id="pyfoampreparecase.py-now-allows-overloading-another-directory"><code>pyFoamPrepareCase.py</code> now allows "overloading" another directory</h3>
<p>Before doing anything else the contents of different directories are copied into the current case. This allows for instance to use tutorial cases as the basis for a case</p>
<h3 id="pyfoamipythonnotebook.py-adds-improvements-to-the-notebook"><code>pyFoamIPythonNotebook.py</code> adds improvements to the notebook</h3>
<p>Additional code added to the generated notebook:</p>
<ul>
<li>Code to change the default size of the plots</li>
<li>Distribution-directories in subdirectories <code>distributions</code> (generated by some <code>swak</code>-function objects) added</li>
</ul>
<h3 id="pyfoamlistcases.py-more-tolerant-to-faulty-controldict"><code>pyFoamListCases.py</code> more tolerant to faulty <code>controlDict</code></h3>
<p>If the <code>controlDict</code> is acceptable to OpenFOAM but syntactically incorrect for PyFoam (for instance because of a missing semicolon) the utility does not fail anymore (but no data is collected for that case).</p>
<h3 id="pyfoamdumpconfiguration.py-prints-sections-and-keys-alphabetically"><code>pyFoamDumpConfiguration.py</code> prints sections and keys alphabetically</h3>
<p>This should make it easier to find items</p>
<h3 id="pyfoamjoincsv.py-and-pyfoamconverttocsv.py-read-and-write-excel-files"><code>pyFoamJoinCSV.py</code> and <code>pyFoamConvertToCSV.py</code> read and write Excel-files</h3>
<p>Both utilities now allow writing Excel-files</p>
<p>In addition to regular text files the first sheet from <code>xls</code>-files can be read</p>
<h3 id="flexible-variable-filtering-in-pyfoamjoincsv.py-and-pyfoamconverttocsv.py">Flexible variable filtering in <code>pyFoamJoinCSV.py</code> and <code>pyFoamConvertToCSV.py</code></h3>
<p>Now it is possible to filter for regular expressions</p>
<p>The functionality of the two utilities now is very similar and it is possible that one of them will be discontinued</p>
<h3 id="columns-in-pyfoamjoincsv.py-and-pyfoamconverttocsv.py-can-be-recalculated">Columns in <code>pyFoamJoinCSV.py</code> and <code>pyFoamConvertToCSV.py</code> can be recalculated</h3>
<p>The two utilities now can add columns or recalculate columns based on the existing column values</p>
<h3 id="testing-for-numeric-removed-from-pyfoamversion.py">Testing for <code>Numeric</code> removed from <code>pyFoamVersion.py</code></h3>
<p>Testing for the library <code>Numeric</code> library removed as it is no longer supported as a fallback for <code>numpy</code>. Test also removed from <code>setup.py</code></p>
<h2 id="enhancements-to-the-library-8">Enhancements to the Library</h2>
<h3 id="subclass-of-clusterjob-that-support-preparecase">Subclass of <code>ClusterJob</code> that support <code>PrepareCase</code></h3>
<p>The class <code>PrepareCaseJob</code> supports cases that are set up with <code>pyFoamPrepareCase.py</code>. Additional parameters to the constructor are</p>
<ul>
<li>the name of the parameter-file</li>
<li>a list with the parameters. The list is composed of name/value-pairs</li>
</ul>
<h3 id="subclass-of-clusterjob-that-support-runparametervariation">Subclass of <code>ClusterJob</code> that support <code>RunParameterVariation</code></h3>
<p>The class <code>VariationCaseJob</code> supports cases that are set up with <code>pyFoamRunParameterVariation.py</code>. Additional parameters to the constructor are</p>
<ul>
<li>the name of the parameter-file</li>
<li>the name of the variations-file</li>
</ul>
<h3 id="execute-in-pyfoamutilities-fails-if-script-is-not-executable"><code>execute</code> in <code>PyFoam/Utilities</code> fails if script is not executable</h3>
<p>The function checks if the file exists and is <strong>not</strong> executable. The program fails in that case</p>
<h3 id="foamversion-uses-a-separate-wrapper-class-for-tuple"><code>foamVersion</code> uses a separate wrapper class for <code>tuple</code></h3>
<p>This ensures that it is printed in a form that is valid in OF-dictionaries</p>
<h3 id="move-calculation-of-disk-usage-to-utilities">Move calculation of disk usage to <code>Utilities</code></h3>
<p>This has until now only been used in <code>ListCases</code> but moved to a separate method/function <code>diskUsage</code> in the <code>Utilities</code>-module</p>
<h3 id="enhancement-of---help">Enhancement of <code>--help</code></h3>
<p>Added the possibility to have an epilog and usage examples with the <code>epilog</code> and <code>examples</code>-keyword arguments for applications.</p>
<p>These and descriptions now have the possibility for line-breaks: if two line-breaks are encountered in the text a new paragraph is created</p>
<h3 id="which-routine-in-utitlities-uses-native-python-routine"><code>which</code>-routine in <code>Utitlities</code> uses native Python-routine</h3>
<p>For Python-version where <code>shutil</code> has a <code>which</code>-function this is used instead of calling an external program</p>
<h3 id="filebasis-now-allows-file-handles-instead-of-the-filename"><code>FileBasis</code> now allows file handles instead of the filename</h3>
<p>This currently only works for reading, Backups, zipping etc won't work but it makes algorithms more flexible</p>
<h3 id="blockmesh-doesnt-force-writing-to-file-anymore"><code>BlockMesh</code> doesn't force writing to file anymore</h3>
<p>Instead content is stored in memory. Old behaviour is the default to preserve compatibility with old scripts</p>
<h3 id="additional-methods-for-blockmesh-class">Additional methods for <code>BlockMesh</code>-class</h3>
<dl>
<dt>numberVertices</dt>
<dd>Adds comments with the vertex numbers to the vertices
</dd>
</dl>
<h3 id="linereader-allows-keeping-spaces-on-left"><code>LineReader</code> allows keeping spaces on left</h3>
<p>Previous behaviour was stripping all spaces from the lines. Now the left hand spaces can be ket. Old behaviour is still default for compatibility</p>
<h3 id="templatefile-now-allows-writing-of-assignment-results-in-file"><code>TemplateFile</code> now allows writing of assignment-results in file</h3>
<p>This allows faster debugging of template-files. This can be enabled with a switch in the utilities using templates</p>
<h3 id="solverjob-now-allows-passing-of-parameters-to-the-solver"><code>SolverJob</code> now allows passing of parameters to the solver</h3>
<p>And additional parameter <code>solverArgs</code> will now be passed to the solver (if the solver accepts arguments)</p>
<h3 id="spreadsheetdata-now-allows-reading-from-an-excel-file"><code>SpreadsheetData</code> now allows reading from an Excel file</h3>
<p>During construction if an Excel-file is specified and the <code>xlrd</code>-library and <code>pandas</code> are installed then the first sheet in the file is read</p>
<h3 id="spreadsheetdata-allows-recalculating-columns"><code>SpreadsheetData</code> allows recalculating columns</h3>
<p>Columns can be recalculated using expressions. This includes other data items. Currently present column names are available as variables. There is also a variable <code>data</code> that can be subscripted for items that are not valid variable names. A variable <code>this</code> points to the item to be recalculated</p>
<h2 id="known-bugs">Known bugs</h2>
<h3 id="timelines-not-forgotten-for-multiple-runner-calls">Timelines not forgotten for multiple runner calls</h3>
<p>This manifests with <code>pyFoamRunParameterVariation.py</code>. The custom timelines are still kept in memory. Not a problem. Just annoying</p>
<h1 id="version-0.6.3---2014-06-23">Version 0.6.3 - 2014-06-23</h1>
<h2 id="requirements-2">Requirements</h2>
<p>The only requirement is a python-installation. The main testing and development has been done with 2.7 and 2.6. Python 2.5 should work but not for all utilities. Unit tests run on Python 3.4 but it is currently not used in a production environment (reports of success or failure most welcome)</p>
<p>Certain functionalities need special Python-libraries. The main one is <code>numpy</code> for plotting. Other libraries that might be of interest are <code>matplotlib</code>, <code>pandas</code> and <code>IPython</code>. For <code>pyFoamDisplayBlockmesh.py</code> the libraries <code>PyQt4</code> and <code>vtk</code> are needed. Other libraries are tested for and reported by <code>pyFoamVersion.py</code> but not required (only install if you're sure that you need it)</p>
<h2 id="major-changes-4">Major changes</h2>
<h3 id="version-changing-supports-forks-of-openfoam">Version changing supports forks of OpenFOAM</h3>
<p>Now <code>pyFoam</code> supports different versions of OpenFOAM for switching. Out of the box <code>openfoam</code> and <code>extend</code> are supported. If only the version number is specified (for instance by <code>--foamVersion=1.7.x</code>) and such a version exists only for one fork it is correctly expanded with the correct fork( in the example with <code>openfoam-1.7.x</code>). If more than one fork has the same version then the fork name has to be specified as well</p>
<p>Note: additional forks can be easily specified with the configurations. In section <code>OpenFOAM</code> the parameter <code>forks</code> has to be extended. For each new fork a <code>dirpatterns</code> and <code>installation</code>-parameter has to be specified</p>
<h2 id="incompatibilities-8">Incompatibilities</h2>
<h3 id="change-of-command-interface-of-pyfoamstlutility.py">Change of command interface of <code>pyFoamSTLUtility.py</code></h3>
<p>The selection of what is to be done is now selected by subcommands instead of options. This will break scripts using this</p>
<h3 id="if-0.org-is-present-pyfoamclonecase.py-and-pyfoampackcase.py-ignore-0">If <code>0.org</code> is present <code>pyFoamCloneCase.py</code> and <code>pyFoamPackCase.py</code> ignore <code>0</code></h3>
<p>The reason is that the utilities assume that this directory is produced from <code>0.org</code></p>
<h2 id="bugfixes-2">Bugfixes</h2>
<h3 id="plotwatcher-has-long-times-between-updates-if-pickling-takes-long">PlotWatcher has long times between updates if pickling takes long</h3>
<p>The reason was that it used the same throttling that made sense for the PlotRunner. Fixed</p>
<h3 id="pyfoampvsnapshot.py-fails-for-newer-paraview-versions"><code>pyFoamPVSnapshot.py</code> fails for newer paraview-versions</h3>
<p>Reason is that the class <code>vtkPythonStdStreamCaptureHelper</code> does not support <code>isatty</code></p>
<h3 id="sampleplot-failed-when-valuenames-are-unspecified">SamplePlot failed when valueNames are unspecified</h3>
<p>Reported in <a href="https://sourceforge.net/apps/mantisbt/openfoam-extend/view.php?id=208">https://sourceforge.net/apps/mantisbt/openfoam-extend/view.php?id=208</a> and fixed</p>
<h3 id="pyfoamtimelineplot.py-failed-numpypandas-output-of-vector-fields"><code>pyFoamTimelinePlot.py</code> failed Numpy/Pandas output of vector fields</h3>
<p>Vector fields only were added to the data fields if they were the first in the list. Fixed</p>
<h3 id="alternateaxis-ignored-for-slave"><code>alternateAxis</code> ignored for slave</h3>
<p>This is now fixed. The alternate values have to be specified in the master (specifying in the slave gives an error)</p>
<h3 id="pyfoamcasereport.py-more-stable-for-binary-boundary-files"><code>pyFoamCaseReport.py</code> more stable for binary <code>boundary</code>-files</h3>
<p>Usually these files are <code>ascii</code> (even if the header says <code>binary</code>). In some cases the parsing failed for these. Fixed by enforcing reading as <code>ascii</code>. Can be switched off</p>
<h3 id="spreadsheetdata-returns-data-which-breaks-certain-pandas-operations"><code>SpreadsheetData</code> returns data which breaks certain Pandas-operations</h3>
<p>The reason was that if there were duplicate times in the table the index was non-unique which certain Pandas-operations don't appreciate. Solved by dropping duplicate times. Can be switched off</p>
<h3 id="pyfoamclonecase.py-added-duplicates-to-the-archive"><code>pyFoamCloneCase.py</code> added duplicates to the archive</h3>
<p>If things are specified twice they were added twice. Now it is checked whether the item already exists in the tar-file before adding them</p>
<h3 id="nonuniform-of-length-3-not-correctly-printed"><code>nonuniform</code> of length 3 not correctly printed</h3>
<p>The reason was that this was interpreted as a vector and the numeric prefix was removed. Reported at <a href="http://sourceforge.net/apps/mantisbt/openfoam-extend/view.php?id=218">http://sourceforge.net/apps/mantisbt/openfoam-extend/view.php?id=218</a></p>
<p>Fixed by introducing an extra parameter to <code>FoamFileGenerator</code></p>
<h2 id="new-featuresutilities-5">New features/Utilities</h2>
<h3 id="pyfoampreparecase.py-for-case-preparation"><code>pyFoamPrepareCase.py</code> for case preparation</h3>
<p>This utility aims to reduce the need for boilerplate scripts to set up cases. The steps it executes are</p>
<ol>
<li>Clear old data from the case (including processor directories)</li>
<li>if a folder <code>0.org</code> is present remove the <code>0</code> folder too</li>
<li>go through all folders and for every found file with the extension <code>.template</code> do template expansion using the pyratemp-engine</li>
<li>create a mesh (either by using a script or if a <code>blockMeshDict</code> is present by running blockMesh. If none of these is present assume that there is a valid mesh present)</li>
<li>copy every <code>foo.org</code> that is found to to <code>foo</code> (recursively if directory)</li>
<li>do template replacement for every <code>.postTemplate</code></li>
<li>execute another preparation script</li>
</ol>
<h3 id="pyfoamipythonnotebook.py-for-generating-and-manipulating-ipython-notebooks"><code>pyFoamIPythonNotebook.py</code> for generating and manipulating IPython-notebooks</h3>
<p>This utility creates and manipulates IPython-notebooks for analyzing OpenFOAM cases. It has a number of subcommands:</p>
<dl>
<dt>create</dt>
<dd><p>this is the main command. All other commands assume that the notebooks they work with were created with this.</p>
<p>The utility looks at the case specified and creates a notebook that has the capabilities to quickly build a report about the case:</p>
<ul>
<li>reporting general properties of the case. This</li>
</ul>
</dd>
</dl>
<p>basically is the capability of the <code>pyFoamCaseReport.py</code>-utility</p>
<ul>
<li>It searches for data that can be visualized by <code>pyFoamTimelinePlot.py</code> or <code>pyFoamSamplePlot.py</code> and generates selectors that allow the user to select which data to import. The selectors import the data as Pandas-<code>DataFrames</code> and create the commands necessary to do this. It is recommended to erase the selector afterwards</li>
<li>Selectors for pickled case data and pickled plot generated by PyFoam</li>
<li>Capability to store read data <strong>in</strong> the notebook file. This feature is experimental and has performance issues for medium to large datasets</li>
</ul>
<p>The created notebook can be executed but needs to be edited to be useful</p>
<dl>
<dt>clear</dt>
<dd>removes selected cells (but only cells created with <code>create</code>) or output from the notebook.
</dd>
<dt>info</dt>
<dd>prints information about the notebook
</dd>
<dt>copy</dt>
<dd>copies notebook to a different case and rewrites it so that data is read from that case
</dd>
</dl>
<p>Recommended way of working with this utility is</p>
<ol>
<li>Create notebook with utility</li>
<li>Edit it to contain standardized evaluations</li>
<li>Copy it over to another, similar case</li>
</ol>
<h3 id="additional-sub-module-pyfoam.ipython">Additional sub-module <code>PyFoam.IPython</code></h3>
<p>The purpose of this submodule is to support <code>pyFoamIPythonNotebook.py</code>. It has the classes</p>
<dl>
<dt>Notebook</dt>
<dd>read a file and interpret it as an IPython-notebook. Do manipulations on this notebook
</dd>
<dt>PermanentStorage</dt>
<dd>Implements permanent storage in an IPython-notebook. Only works inside a notebook and allows only one instance at once. Passing the data from the notebook (through JavaScript) to Python currently is a performance bottleneck
</dd>
<dt>Case</dt>
<dd>Convenience object that exposes the functionality of some of the PyFoam-utilities through a simple interface
</dd>
</dl>
<h3 id="additional-sub-module-pyfoam.wrappers">Additional sub-module <code>PyFoam.Wrappers</code></h3>
<p>Wraps popular Python-libraries to add functions that make it easier to work with OpenFOAM-data.</p>
<p>Currently only one Wrapper is implemented:</p>
<ol>
<li><p><code>Pandas</code>-wrappers</p>
<p>This provides <code>PyFoamDataFrame</code> as a wrapper for <code>DataFrame</code>. The functionality added is</p>
<dl>
<dt>addData</dt>
<dd>Conveniently add new data from different <code>Series</code>, <code>DataFrames</code>. It is assumed that the index is the same property (time or for samples the distance) but with a different resolution. The indexes are joined and missing data is interpolated
</dd>
<dt>integrate, validLength, weightedAverage</dt>
<dd>uses the index as the <span class="math inline"><em>x</em></span>-axis and calculates these properties for a <code>Series</code>. <code>validLength</code> is the extent on which data is defined (<code>weightedAverage</code> is basically <code>integrate</code> divided by <code>validLength</code>). For <code>integrate</code> the trapezoid-rule is used
</dd>
<dt>describe</dt>
<dd>adds the three above quantities to the regular <code>describe</code>-command
</dd>
</dl></li>
</ol>
<h2 id="enhancements-to-utilities-8">Enhancements to Utilities</h2>
<h3 id="pyfoamsampleplot-has-option-to-use-index-instead-of-time-in-filenames"><code>pyFoamSampleplot</code> has option to use index instead of time in filenames</h3>
<p>The option <code>-index-instead-of-filename</code> switches this on. This makes it easier to generate movies from the files</p>
<h3 id="pyfoamlistcases.py-allows-addition-of-custom-data"><code>pyFoamListCases.py</code> Allows addition of custom data</h3>
<p>The option <code>--custom-data</code> now allows the specification of custom data items. These are read from the <code>pickledData</code>-files and displayed in the table like regular data items</p>
<h3 id="switch-compiler-versions">Switch compiler versions</h3>
<p>Now all utilities allow switching the compiler version (for instance from <code>Gcc47</code> to <code>Gcc48</code>). The relevant options are <code>--force-system-compiler</code>, <code>--force-openfoam-compiler</code> and <code>--force-compiler</code></p>
<h3 id="pyfoamversion.py-reports-the-installed-versions-better"><code>pyFoamVersion.py</code> reports the installed versions better</h3>
<p>Now the location of the installations is reported as well</p>
<h3 id="offscreen-rendering-can-be-switched-off-in-pyfoampvsnapshot.py">Offscreen rendering can be switched off in <code>pyFoamPVSnapshot.py</code></h3>
<p>This is a workaround where the writer produces a segmentation fault</p>
<h3 id="write-3d-data-in-pyfoampvsnapshot.py">Write 3D-data in <code>pyFoamPVSnapshot.py</code></h3>
<p>In addition to writing out bitmaps allows writing out 3D-data (for importing into other applications). Sources can be selected by name</p>
<h3 id="added-capabilities-to-pyfoamstlutility">Added capabilities to <code>pyFoamSTLUtility</code></h3>
<p>The utility can now also:</p>
<ul>
<li>erase selected patches</li>
<li>merge selected patches into one</li>
</ul>
<h3 id="pyfoamdecomposer.py-switches-off-function-objects"><code>pyFoamDecomposer.py</code> switches off function objects</h3>
<p>This now automatically happens for OF-versions that support it (2.0 and greater). They can be switched on again</p>
<h3 id="pyfoamclonecase.py-clones-more-stuff"><code>pyFoamCloneCase.py</code> clones more stuff</h3>
<p>Files that are assumed to be used by <code>pyFoamPrepareCase.py</code> are automatically added to the clone. This includes all files (and directories) with the extensions <code>.sh</code>, <code>.template</code> and <code>.org</code>. Also IPython notebooks (extension <code>.ipynb</code> are added)</p>
<h2 id="enhancements-to-the-library-9">Enhancements to the Library</h2>
<h3 id="basicrunner-now-can-print-the-command-line-that-is-actually-used"><code>BasicRunner</code> now can print the command line that is actually used</h3>
<p>This should help with diagnosing problems with MPI etc.</p>
<p>Can be switched on in some utilities with <code>--echo-command-prefix</code></p>
<h3 id="clusterjob-now-can-live-without-a-machinefile"><code>ClusterJob</code> now can live without a machinefile</h3>
<p>Using the machine-file now can be switched off for job-schedulers with a tight integration</p>
<h3 id="enhanced-treatment-of-symlinks-during-cloning">Enhanced treatment of symlinks during cloning</h3>
<p>If a item in the case itself is a symlink then it used to be a copy of the file the symlink is pointing to. Now it is created as a symlink to the target the original symlink. If the <code>--follow-symlink</code>-option is used the old behaviour is used (copying). In this case the option <code>noForceSymlink</code> in the <code>Cloning</code>-section of the configuration can be used to change this behaviour for selected files</p>
<h3 id="analyzedcommon-clears-the-analyzed-directory"><code>AnalyzedCommon</code> clears the <code>analyzed</code>-directory</h3>
<p>The directory is cleared if it exits from a previous run.</p>
<h3 id="timelinedirectory-is-more-tolerant"><code>TimelineDirectory</code> is more tolerant</h3>
<p>Used to fail if incompatible data types were used. Now ignores them</p>
<h3 id="possibility-of-a-subcommand-interface-for-utilities">Possibility of a subcommand-interface for utilities</h3>
<p>The subclass <code>SubclassFoamOptionParser</code> now allows the parsing of subclasses. The base class for utilities <code>PyFoamApplication</code> now supports this as an option. As an example this is implemented in <code>pyFoamSTLUtilities.py</code></p>
<h3 id="stlutility-accepts-file-handles"><code>STLUtility</code> accepts file-handles</h3>
<p>The class checks whether arguments are filehandles and in this case doesn't try to open a file for reading or writing but uses the handle</p>
<h3 id="addclone-in-solutiondirectory-accepts-glob-patterns"><code>addClone</code> in <code>SolutionDirectory</code> accepts glob patterns</h3>
<p>If no file matching the name is found it is assumed that this is a glob-pattern and all matching files are added. This affects all utilities that use that method (especially <code>pyFoamCloneCase.py</code>)</p>
<h3 id="execute-in-utilities-allows-specification-of-working-directory-and-echoing-of-output"><code>execute</code> in <code>Utilities</code> allows specification of working directory and echoing of output</h3>
<p>This method now allows the specification of a working directory. Before executing the command the method changes to the working directory. Afterwards it changes back to the regular working directory.</p>
<p>There is also an option <code>echo</code> that immediately prints the output to the screen</p>
<h3 id="rmtree-and-copytree-more-tolerant"><code>rmtree</code> and <code>copytree</code> more tolerant</h3>
<p><code>rmtree</code> now also works if the "tree" is a file.</p>
<p><code>copytree</code> now has a parameter <code>force</code> that allows removing the destination directory if it exists</p>
<h3 id="enhanced-support-for-booleans-in-the-parser">Enhanced support for booleans in the parser</h3>
<p>Strings that are usually interpreted as boolean in OF-dictionaries (for instance <code>on</code>, <code>yes</code>, …) are now stored as a special type that allows treating them like 'real' booleans.</p>
<p>For instance an expression <code>test no;</code> in a dictionary now allows things like <code>if d['test']:</code> in the script</p>
<h3 id="application-classes-now-allow-specifying-options-as-keyword-parameters">Application classes now allow specifying options as keyword parameters</h3>
<p>Until now the options to be used had to be specified as a list of string modeled on the way the command line looked like. This is still possible. In addition it is now possible to specify these things as keyword parameters on the command line. Rudimentary type checking is done. The names of the parameters are generated from the command line options: the <code>-</code> are removed and the words are converted to CamelCase. So for instance <code>--list-custom-Regexp =
    becomes =listCustomRegexp</code>. Also for switches like these a boolean value has to be passed. So the correct usage in a call would be <code>listCustomRegexp=True</code>.</p>
<h3 id="solutiondirector-now-can-classify-directories-in-the-postprocessing-directory"><code>SolutionDirector</code> now can classify directories in the <code>postProcessing</code>-directory</h3>
<p>A number of properties has been added that list data generated by function objects:</p>
<dl>
<dt>timelines</dt>
<dd>timeline data (like <code>propes</code>) that can be visualized by <code>pyFoamTimelinePlot.py</code>
</dd>
<dt>samples</dt>
<dd>data from <code>set</code> (assuming it is in <code>raw</code>-format) that can be processed by <code>pyFoamSamplePlot.py</code>
</dd>
<dt>surfaces</dt>
<dd>data from <code>surface</code> (assumes <code>VTK</code>-format) that can be used by <code>pyFoamSurfacePlot.py</code>
</dd>
<dt>distributions</dt>
<dd>special cases of <code>sample</code> with distribution data
</dd>
</dl>
<p>These properties only list the subdirectories of the case with that data</p>
<p>Additional properties are</p>
<dl>
<dt>pickledData</dt>
<dd>a list of pickled data files that are found
</dd>
<dt>pickledPlots</dt>
<dd>list of found pickled plots
</dd>
</dl>
<p>These lists are sorted in descending temporal order (newest first)</p>
<h3 id="pyfoamsampleplot.py-now-more-flexible-for-distributions"><code>pyFoamSamplePlot.py</code> now more flexible for distributions</h3>
<p>Tries to determine the names of the values from the first line in the files</p>
<h3 id="dictproxy-now-has-a-dict-like-update-method"><code>DictProxy</code> now has a <code>dict</code>-like <code>update</code>-method</h3>
<p>This also allows enforcing string values</p>
<h3 id="foamfilegenerator-automatically-quotes-strings"><code>FoamFileGenerator</code> automatically quotes strings</h3>
<p>If strings are unquoted but contain characters that make it illegal as a word then the string is quoted before output</p>
<h3 id="children-of-filebasis-now-can-be-used-with-the-with-statement">Children of <code>FileBasis</code> now can be used with the <code>with</code>-statement</h3>
<p>This mainly concerns <code>ParsedParameterFile</code></p>
<h1 id="version-0.6.2---2013-11-03">Version 0.6.2 - 2013-11-03</h1>
<h2 id="major-changes-5">Major changes</h2>
<h3 id="use-of-pandas-library">Use of <code>pandas</code>-library</h3>
<p>Starting with this version the <code>pandas</code>-library is used for data-analysis. When possible and appropriate classes return <code>pandas</code>-objects. Currently these are:</p>
<ul>
<li><code>CSVCollection</code>. With a call-operator this class returns the collected data as a <code>DataFrame</code> of the collected data</li>
<li><code>SpreadsheetData</code> now has methods to return <code>Series</code> and <code>DataFrame</code> objects</li>
</ul>
<p>It is not necessary to install <code>pandas</code> if these classes are not used (and even then most of their functionality works)</p>
<h2 id="incompatibilities-9">Incompatibilities</h2>
<h3 id="different-separator-for-databases-in-csv-files">Different separator for databases in CSV-files</h3>
<p>The class <code>RunDatabase</code> (and therefor also the utility <code>pyFoamDumpRunDatabaseToCSV.py</code>) now write as a separator for data from sub-tables a <code>//</code> instead of the space. This especially means that scripts that rely on a data-item <code>foo</code> in <code>analyzed</code> might break because this is now called <code>analyzed//foo</code> instead of <code>analyzed foo</code>. On the other hand this makes the names more consistent and easier to parse as <code>//</code> is the saperator for other levels of dictionaries</p>
<h3 id="change-of-independent-variable-name-in-sample-data">Change of independent variable name in sample data</h3>
<p>Instead of <code>col0</code> this is now <code>coord</code>. This could cause problems with scripts that use that column name in the resulting <code>SpreadsheetData</code>-object</p>
<h2 id="bugfixes-3">Bugfixes</h2>
<h3 id="pyfoampackcase.py-does-not-handle-symbolic-links-correctly"><code>pyFoamPackCase.py</code> does not handle symbolic links correctly</h3>
<p>Symbolic links were copied as is and did not work correctly afterwards. This is fixed. If the symbolic link is an absolute path or points outside the case directory it is replaced with the file it points to. Otherwise it is preserved as a symbolic link</p>
<h3 id="pyfoampotentialrunner.py-not-working-with-openfoam-2.0-or-newer"><code>pyFoamPotentialRunner.py</code> not working with OpenFOAM 2.0 or newer</h3>
<p>These versions require an entry <code>potentialFlow</code> in the <code>fvSolution</code>-file instead of the old <code>SIMPLE</code></p>
<h3 id="pyfoamlistcase.py-fails-with-controldict-that-use-preprocessing"><code>pyFoamListCase.py</code> fails with <code>controlDict</code> that use preprocessing</h3>
<p>Fixed by first trying to read that with preprocessing. Without if that fails</p>
<h3 id="cloning-fails-in-symlink-mode-if-files-are-specified-twice">Cloning fails in symlink-mode if files are specified twice</h3>
<p>Now using a <code>set</code> instead of a <code>list</code> makes sure that no file is cloned twice</p>
<h2 id="utilities">Utilities</h2>
<h3 id="pyfoampotentialrunner.py-now-allows-removing-of-functions-and-libs"><code>pyFoamPotentialRunner.py</code> now allows removing of <code>functions</code> and <code>libs</code></h3>
<p>The utility now allows removing these entries in case that they don't work with <code>potentialFoam</code></p>
<h3 id="the-runner-utilities-now-have-more-options-for-clearing">The Runner-utilities now have more options for clearing</h3>
<p>Some of the options of <code>pyFoamClearCase.py</code> for clearing cases (for instance specifying additional files) have been ported to the <code>Runner</code>-utilities. Also is the <code>postProcessing</code>-directory removed by default</p>
<h2 id="library">Library</h2>
<h3 id="solutiondirectory-and-timedirectory-are-more-tolerant"><code>SolutionDirectory</code> and <code>TimeDirectory</code> are more tolerant</h3>
<p>If there are field files and their zipped counterpart than instead of an error a warning <strong>can</strong> be given</p>
<h3 id="clusterjob-now-handles-template-files"><code>ClusterJob</code> now handles template files</h3>
<p>A new method <code>templateFile</code> gets the name of a file which is constructed from a template of the same name plus the extension <code>.template</code></p>
<h3 id="additional-parameters-in-clusterjob">Additional parameters in <code>ClusterJob</code></h3>
<p>The method <code>additionalParameters</code> can return a dictionary with additional parameters</p>
<h3 id="custom-data-in-directory-easier-accessible">Custom data in directory easier accessible</h3>
<p>In the written data in the sub-dictionary <code>analyzed</code> there is now a subdictionary <code>Custom</code> with the values of the custom expressions with the prefix <code>CustomXX_</code> removed. This means that values that were available as</p>
<pre class="example"><code>data[&#39;Custom02_velCheck&#39;][&#39;min&#39;]
</code></pre>
<p>are now available as</p>
<pre class="example"><code>data[&#39;Custom&#39;][&#39;velCheck&#39;][&#39;min&#39;]
</code></pre>
<p>The advantage is that the number part which was dependent on the order the expressions were specified is now no longer necessary (this should make scripts more stable)</p>
<p>The old notation is still available but deprecated</p>
<h3 id="solverjob-now-allows-compression-of-output"><code>SolverJob</code> now allows compression of output</h3>
<p>The parameter <code>solverLogCompress</code> compresses the log-file while writing it to disc. <strong>Attention:</strong> This may lead to corrupted log-files if the run crashes</p>
<h3 id="pyfoamapplication-class-now-allows-quick-access-to-data"><code>PyFoamApplication</code>-class now allows quick access to data</h3>
<p>The dictionary returned by <code>getData()</code> now allows access to all the elements as attributes.</p>
<h2 id="new-featuresutilities-6">New features/Utilities</h2>
<h3 id="post-run-hook-that-sends-mail-at-the-end-of-run">Post-run hook that sends mail at the end of run</h3>
<p>The hook-module <code>MailToAddress</code> sends a mail at the end of a run. Prerequisite is an SMTP-Server that doesn't need authentication</p>
<h3 id="new-utility-pyfoamcompresscases.py">New utility <code>pyFoamCompressCases.py</code></h3>
<p>This utility goes through cases and compresses single files. The cases can be searched recursively to.</p>
<p>Purpose of this utility is to shrink cases where <code>writeCompression</code> was not turned on during the run</p>
<h3 id="paraview-module-to-read-additional-data">Paraview-module to read additional data</h3>
<p>A new module <code>PyFoam.Paraview.Data</code> reads additional data usually written by OpenFOAM. These are converted to <code>vtkArray</code> using the following functions and can be used in <code>Programmable filters</code>:</p>
<dl>
<dt>setSampleData</dt>
<dd>reads the data from sampled sets
</dd>
<dt>setTimelineData</dt>
<dd>reads data from a timeline directory
</dd>
<dt>setPlotData</dt>
<dd>reads pickled plot data using <code>RedoPlot</code>
</dd>
</dl>
<h2 id="enhancements">Enhancements</h2>
<h3 id="pyfoamredoplot.py-can-plot-in-xkcd-mode"><code>pyFoamRedoPlot.py</code> can plot in XKCD-mode</h3>
<p>When used with the option <code>--implementation=xkcd</code> and version of <code>matplotlib</code> that supports it is installed then plots are done in the style of the webcomics <a href="http://xkcd.com">http://xkcd.com</a></p>
<h3 id="pyfoamlistcases.py-now-displays-disk-usage-in-human-readable-form"><code>pyFoamListCases.py</code> now displays disk usage in human readable form</h3>
<p>If the disk usage of the cases is calculated then it is displayed in human readable form (as KB, MB, GB or TB) for sizes larger than one Kilobyte</p>
<h3 id="pyfoamclearcase.py-more-flexible-in-selection-of-data-to-be-removed"><code>pyFoamClearCase.py</code> more flexible in selection of data to be removed</h3>
<p>Options to be more flexible in removing data are added:</p>
<dl>
<dt>keep-interval</dt>
<dd>keep timesteps at a specified interval. For instance <code>--keep-interval=0.1</code> will keep times like <span class="math inline">1</span>, <span class="math inline">1.1</span> etc but remove <span class="math inline">1.05</span>
</dd>
<dt>keep-parallel</dt>
<dd>this will not remove any times in the <code>processor</code>-directories. Also are things like <code>keep-last</code> now honored for processor directories
</dd>
<dt>remove-analyzed</dt>
<dd>Remove the directories with the analyzed data too. Old behavior was to remove them. Now they are kept by default
</dd>
</dl>
<h3 id="pyfoamfromtemplate.py-automatically-chooses-template-and-default-values"><code>pyFoamFromTemplate.py</code> automatically chooses template and default values</h3>
<p>If an output file <code>foo</code> is specified and no template then the utility looks for a file <code>foo.template</code> as a template.</p>
<p>If a file <code>foo.defaults</code> is present then this file is read and used as default parameter values. Other specifications override these defaults</p>
<h3 id="pyfoamdumprundatabasetocsv.py-can-disable-standard-fields"><code>pyFoamDumpRunDatabaseToCSV.py</code> can disable standard-fields</h3>
<p>Additional option <code>--disable-run-data</code></p>
<h3 id="pyfoamdumprundatabasetocsv.py-prints-pandas-object"><code>pyFoamDumpRunDatabaseToCSV.py</code> prints <code>pandas</code>-object</h3>
<p>With the <code>-pandas-print</code>-option a <code>DataFrame</code> is generated and printed</p>
<h3 id="better-debugging-with-ipdb">Better debugging with <code>ipdb</code></h3>
<p>If the <code>ipdb</code>-package (basically <code>pdb</code> with <code>IPython</code>-additions) is installed then it is used. This gives additions like tab-completion</p>
<h3 id="interactive-shell-after-execution-for-utilities">Interactive shell after execution for utilities</h3>
<p>The option <code>--interactive-after-execution</code> drops the user to an interactive shell where the namespace can be inspected. If present <code>IPython</code> will be used, otherwise the regular shell is used</p>
<h3 id="utilities-that-read-quantitative-data-convert-to-pandas-data-andor-numpy">Utilities that read quantitative data convert to <code>pandas</code>-data and/or <code>numpy</code></h3>
<p>This is mainly to be used on the interactive shell to do further analysis or write this data out. The utilities are:</p>
<dl>
<dt>pyDumpRunDatabaseToCSV.py</dt>
<dd>add an item <code>dump</code> with the whole data as a <code>DataFrame</code>
</dd>
<dt>pyFoamTimelinePlot.py</dt>
<dd>add element <code>series</code> with all the data as <code>Series</code> and <code>dataFrame</code> with the same data as a <code>DataFrame</code>
</dd>
<dt>pyFoamSamplePlot.py</dt>
<dd>Like <code>pyFoamTimelinePlot.py</code>
</dd>
<dt>pyFoamRedoPlot.py</dt>
<dd>Now can get series and the whole plot data as pandas-objects
</dd>
</dl>
<h3 id="utilities-that-read-quantitative-data-write-excel-files">Utilities that read quantitative data write Excel files</h3>
<p>The utilities <code>pyDumpRunDatabaseToCSV.py</code>, <code>pyFoamTimelinePlot.py</code>, <code>pyFoamSamplePlot.py</code> and <code>pyFoamRedoPlot.py</code> now have options to write Excel-files</p>
<h3 id="specify-additional-settings-for-gnuplot-in-customregexp">Specify additional settings for <code>GnuPlot</code> in <code>customRegexp</code></h3>
<p>If an item in <code>customRegexp</code> has an item <code>gnuplotCommands</code> then it is assumed that this is a list of strings which are executed before the first plotting. For instance</p>
<pre class="example"><code>          gnuplotCommands (
             &quot;set format y &#39;%.2e&#39;&quot;
           );
</code></pre>
<p>changes the number format on the y-axis</p>
<h3 id="more-flexible-data-specification-for-pyfoamsampleplot.py">More flexible data specification for <code>pyFoamSamplePlot.py</code></h3>
<p>Instead of determining the names of the fields and lines form the filenames it is now also possible to specify them through options.</p>
<p>The option <code>--is-distribution</code> is a shorthand that sets these options for distribution files</p>
<h3 id="pyfoamsampleplot.py-now-allows-specification-of-x-range"><code>pyFoamSamplePlot.py</code> now allows specification of x-range</h3>
<p>The range of the x-axis of the plots can either be set by automatically scaling to the domains of all the data sets with <code>--scale-domain</code> or by specifying them with <code>--domain-minimum</code> or <code>--domain-maximum</code>.</p>
<p>These domains are set for <strong>all</strong> plots</p>
<h1 id="version-0.6.1---2013-05-24">Version 0.6.1 - 2013-05-24</h1>
<h2 id="major-changes-6">Major changes</h2>
<h2 id="bugfixes-4">Bugfixes</h2>
<h3 id="restoring-of-controldict-after-write">Restoring of <code>controlDict</code> after <code>write</code></h3>
<p>When activating an on-demand write the <code>constrolDict</code> was not restored because the output-line about the file being read was not recognized (due to a change in the output in recent OF-versions). Now a number of different formats is recognized</p>
<h3 id="custom-plot-type-slave-not-working-if-no-master-defined">Custom-plot type <code>slave</code> not working if no <code>master</code> defined</h3>
<p>That plot-type needs a <code>master</code>. Fixed to fail if none is defined</p>
<h3 id="list-only-did-not-correctly-parse-lists-with-a-numeric-prefix"><code>-list-only</code> did not correctly parse lists with a numeric prefix</h3>
<p>This did affect all utilities that use that option and also calls with <code>listOnly</code> to the library class</p>
<h2 id="utilities-1">Utilities</h2>
<h3 id="pyfoambuildhelper.py-now-allow-more-than-one-action"><code>pyFoamBuildHelper.py</code> now allow more than one action</h3>
<p>If multiple actions like <code>--update</code> and <code>--build</code> are specified they are executed in a sensible order (update before build etc)</p>
<h3 id="utilities-warn-if-openfoam-version-is-unset">Utilities warn if OpenFOAM-version is unset</h3>
<p>If the environment variable that determines the OpenFOAM-version is unset a warning is issued by the utilities</p>
<h3 id="pyfoamupgradedictionariesto20.py-allows-single-files"><code>pyFoamUpgradeDictionariesTo20.py</code> allows single files</h3>
<p>If single file is specified then the action to transform it has can be specified</p>
<h3 id="pyfoamupgradedictionariesto20.py-transforms-reaction-schemes"><code>pyFoamUpgradeDictionariesTo20.py</code> transforms reaction-schemes</h3>
<p>Now knows how to transform "old" reaction files (where the <code>reactions</code>-entry was a list) to the new format (where it is a dictionary). Only a limited number of reaction types is supported.</p>
<h3 id="pyfoamupgradedictionariesto20.py-transforms-thermophysical-data"><code>pyFoamUpgradeDictionariesTo20.py</code> transforms thermophysical data</h3>
<p>Now the old form of thermophysical data (lists) is transformed into the new dictionary-form</p>
<h3 id="pyfoamclonecase-now-allows-creating-directory-that-symlinks-to-the-original"><code>pyFoamCloneCase</code> now allows creating directory that symlinks to the original</h3>
<p>Now with the option <code>--symlink-mode</code> instead of copying the directories from the original new directories art created and populated with symlinks to the files in the original. The depth until which no symlinks to directories are created can be specified. This allows the clone to share the configuration files with the original</p>
<h3 id="pyfoamclearcase.py-now-removes-postprocessing-and-allows-removal-of-additional-files"><code>pyFoamClearCase.py</code> now removes <code>postProcessing</code> and allows removal of additional files</h3>
<p>The directory <code>postProcessing</code> is now automatically removed (can be switched off with <code>--keep-postprocessing</code>). Also with the <code>--additional</code>-option patterns with additional files to remove can be specified.</p>
<h3 id="improvements-to-pyfoamversion.py">Improvements to <code>pyFoamVersion.py</code></h3>
<ul>
<li>Now reports the location of the <code>python</code>-executable</li>
<li>Reports locations of used libraries</li>
</ul>
<h3 id="additional-files-automatically-cloned">Additional files automatically cloned</h3>
<p>The files <code>Allrun</code>, <code>Allclean</code> and <code>0.org</code> are automatically added during cloning as these are often used by the standard-utilities</p>
<h3 id="pyfoamdisplayblockmesh.py-uses-the-same-options-for-template-format-as-pyfoamfromtemplate.py"><code>pyFoamDisplayBlockMesh.py</code> uses the same options for template format as <code>pyFoamFromTemplate.py</code></h3>
<p>This makes sure that templates are handled consistently and also allows different delimiters in the <code>blockMeshDict.template</code></p>
<h2 id="library-1">Library</h2>
<h3 id="improvements-in-syntax-of-parsedparameterfile">Improvements in syntax of <code>ParsedParameterFile</code></h3>
<ul>
<li>Now the new relative scoping that was introduced in OF 2.2 is supported</li>
</ul>
<h3 id="utilities-class-now-function-to-find-files-matching-a-pattern"><code>Utilities</code>-class now function to find files matching a pattern</h3>
<p>Added a function <code>find</code> that approxiamtes the <code>find</code>-command</p>
<h3 id="vcs-ignores-more-files">VCS ignores more files</h3>
<p>Some more patterns have been added that will be ignored in a VSC-controlled case. All of them concerning files that PyFoam creates during operation</p>
<h2 id="new-featuresutilities-7">New features/Utilities</h2>
<h3 id="new-utility-pyfoamsymlinktofile.py">New Utility <code>pyFoamSymlinkToFile.py</code></h3>
<p>This utility replaces a symlink with a copy of the file/directories it points to. To be used after a <code>pyFoamCloneCase.py</code> in <code>--symlink-mode</code></p>
<h1 id="version-0.6.0---2013-03-14">Version 0.6.0 - 2013-03-14</h1>
<h2 id="major-changes-7">Major changes</h2>
<h3 id="adaption-to-work-with-python3">Adaption to work with Python3</h3>
<p>Sources are adapted so that <code>PyFoam</code> works with Python3 too. This breaks support for Python 2.4 and earlier (possibly also Python 2.5)</p>
<p>Some of the Libraries in <code>PyFoam.ThirdParty</code> had to be adapted to work with Python3:</p>
<dl>
<dt>Gnuplot.py</dt>
<dd>The original version 1.8 is quite old. It was adapted with the help of the <code>six</code>-library (see below) to work with Python2 and Python3 (inspired by [<a href="https://github.com/oblalex/gnuplot.py-py3k/commits/master">https://github.com/oblalex/gnuplot.py-py3k/commits/master</a>] which is a pure port to Python3 without backwards compatibility)
</dd>
</dl>
<h3 id="new-thirdparty-libraries">New ThirdParty-Libraries</h3>
<dl>
<dt>six</dt>
<dd>Library that helps supporting Python 2 and Python 3 in the same source code. Currently version 1.2 from [<a href="https://bitbucket.org/gutworth/six">https://bitbucket.org/gutworth/six</a>] is used
</dd>
<dt>pyratemp</dt>
<dd>Templating library to support the new templating format. Version 0.2.0 from [<a href="http://www.simple-is-better.org/template/pyratemp.html">http://www.simple-is-better.org/template/pyratemp.html</a>] is used
</dd>
</dl>
<h3 id="porting-to-windows">Porting to <code>Windows</code></h3>
<p>Port to allow running PyFoam on Windows was done by Bruno Santos of blueCAPE (bruno.santos@bluecape.com.pt)</p>
<p>Patch was originally posted at <a href="http://sourceforge.net/apps/mantisbt/openfoam-extend/view.php?id=166">http://sourceforge.net/apps/mantisbt/openfoam-extend/view.php?id=166</a></p>
<p><strong>Note</strong>: many of PyFoam's features are not yet fully functional on Windows.</p>
<h3 id="experimental-port-to-pypy">Experimental port to <code>pypy</code></h3>
<p>Sources are executed in <code>pypy</code> but it seems there are problems with <code>numpy</code> and also with code like <code>for l in open(f).readlines()</code></p>
<h2 id="third-party">Third-Party</h2>
<h3 id="upgraded-ply-to-3.4">Upgraded <code>ply</code> to 3.4</h3>
<p>This brings virtually no changes. <code>README</code> with copyright information has been added</p>
<h2 id="infrastructure-6">Infrastructure</h2>
<h3 id="parameters-cant-be-modified-in-ctestrun-after-initialization">Parameters can't be modified in <code>CTestRun</code> after initialization</h3>
<p>This should help to avoid side-effects</p>
<h3 id="treat-timeouts-in-the-metaserver-right">Treat timeouts in the <code>MetaServer</code> right</h3>
<p>Due to a previous workaround timeouts when collecting information about new machines was not treated correctly</p>
<h3 id="add-execute-method-to-clusterjob">Add <code>execute</code>-method to <code>ClusterJob</code></h3>
<p>This allows the execution of a shell-script in the directory of the case</p>
<h3 id="add-possibility-to-run-specific-modules-before-or-after-the-solver">Add possibility to run specific modules before or after the solver</h3>
<p>These modules are found in <code>PyFoam.Infrastructure.RunHooks</code>. Two concrete implementations:</p>
<dl>
<dt><code>PrintMessageHook</code></dt>
<dd>to print a text to the terminal
</dd>
<dt><code>SendToWebservice</code></dt>
<dd>encode an URL and send it to a webservice (example for <code>pushover.net</code> added)
</dd>
</dl>
<p>Hooks are automatically instantiated from the configuration data (examples are hardcoded))</p>
<h3 id="parameters-added-to-the-info-about-the-run">Parameters added to the info about the run</h3>
<p>The Runner-classes now have a parameter <code>parameters</code>. This data (usually it would be a dictionary) is added verbatim to the run info.</p>
<p>Most runner applications now have the possibility to add this info.</p>
<p>Purpose of this facility is to identify different runs in the database better.</p>
<h3 id="parameter-handling-in-clusterjob-extended">Parameter handling in <code>ClusterJob</code> extended</h3>
<p>Parameter values are now handed to the actual job. Also a dictionary with parameters can be handed to the constructor and will be used in the relevant callbacks</p>
<h3 id="run-data-written-alongside-pickledplots">Run data written alongside <code>PickledPlots</code></h3>
<p>During the run whenever the <code>PickledPlots</code>-file is written a file <code>pickledUnfinishedData</code> gets written. This has the current solver data and is similar to <code>pickledData</code>.</p>
<p>Also a file <code>pickledStartData</code> gets written that has the data that is available at the start of the run.</p>
<h3 id="basicrunner-collects-error-and-warning-texts"><code>BasicRunner</code> collects error and warning texts</h3>
<p>The runner collects</p>
<ul>
<li>at every warning the next 20 lines of the output until a total of 500 lines is reached (this avoids filling disk and memory if the solver produces too many warnings)</li>
<li>All output from an error message until the end</li>
</ul>
<p>And stores them in the application data</p>
<h2 id="library-2">Library</h2>
<h3 id="templatefile-now-uses-pyratemp"><code>TemplateFile</code> now uses <code>pyratemp</code></h3>
<p>The class <code>TempalteFile</code> now uses an enhanced templating engine. The old implementation is in the class <code>TemplateFileOldFormat</code></p>
<h3 id="clearer-error-message-in-application-classes">Clearer error message in Application-classes</h3>
<p>If used as classes (not as utilities) these classes print the class name instead of the calling utilities name</p>
<h3 id="output-is-only-colored-if-it-goes-to-the-terminal">Output is only colored if it goes to the terminal</h3>
<p>Error and warning messages don't decorate the output if it goes to files or other non-terminal streams</p>
<h3 id="error-method-of-application-classes-now-raises-an-exception"><code>error</code>-method of application classes now raises an exception</h3>
<p>An exception is now raised by <code>self.error()</code>. This makes it easier to handle such errors if the application class is used. The exception is passed up until there is a "real" application</p>
<h3 id="parsedparameterfile-now-knows-how-to-handle-binary-files"><code>ParsedParameterFile</code> now knows how to handle binary files</h3>
<p>When the format of a file is <code>binary</code> lists with a length prefix are being read as binary blobs.</p>
<p>For reading the blobs a simple heuristics is used: a multiple of the length in bytes is read. If the next character is a <code>)</code> and the characters after that are a certain combination of characters (newlines and <code>;</code>) then it is assumed that the blob has ended. This may fail on certain occasions:</p>
<ul>
<li>if the combination of characters appears at these places</li>
<li>if the objects inside the binary data are of different sizes</li>
</ul>
<p>It would be hard to work around these restrictions without reprogramming the full functionality of OpenFOAM</p>
<h3 id="labledresttable-for-more-flexible-table-generation"><code>LabledReSTTable</code> for more flexible table generation</h3>
<p>New class in the <code>RestructuredTextHelper</code> allows more flexible generation of tables. Items are added with <code>column</code> and <code>row</code> and if these don't exist in the first row/column the table is extended appropriately</p>
<h3 id="plotting-classes-now-allow-setting-of-xlabel">Plotting classes now allow setting of <code>xlabel</code></h3>
<p>This is implemented for <code>Gnuplot</code> and <code>Matplotlib</code>. Default for the label on the x-Axis is now "Time [s]"</p>
<h2 id="utilities-2">Utilities</h2>
<h3 id="pyfoamfromtemplate.py-with-new-templating-engine"><code>pyFoamFromTemplate.py</code> with new templating engine</h3>
<p>The utility can now use the pyratemp-templating engine which allows templates with loops, conditions and other fancy stuff</p>
<h3 id="pyfoamsampleplot.py-allows-using-the-reference-data-as-basis-for-comparison"><code>pyFoamSamplePlot.py</code> allows using the reference data as basis for comparison</h3>
<p>Instead of using the x-values from the original data the y-values of the reference data can be used for comparing (with the <code>--use-reference</code>-option)</p>
<p>Same for <code>pyFoamTimelimePlot.py</code></p>
<h3 id="scaling-and-offsets-are-now-used-in-plots-of-pyfoamsampleplot.py">Scaling and offsets are now used in plots of <code>pyFoamSamplePlot.py</code></h3>
<p>If scales not equal to <span class="math inline">1</span> and offsets not equal to <span class="math inline">0</span> are specified they are used in the <code>gnuplot</code>-output</p>
<h3 id="pyfoamprintdata2dstatistics.py-prints-relative-average-error"><code>pyFoamPrintData2DStatistics.py</code> prints relative average error</h3>
<p>With the <code>--relative-average-error</code>-option</p>
<h3 id="enhancements-to-pyfoamversion.py">Enhancements to <code>pyFoamVersion.py</code></h3>
<ul>
<li>More tolerant if no library was found</li>
<li>Reports the location of the PyFoam-Library</li>
<li>Checks whether utility version is consistent the library found</li>
</ul>
<h3 id="pyfoamrunner.py-allows-hooks"><code>pyFoamRunner.py</code> allows hooks</h3>
<p>Hooks can be added at the start and the end of a run</p>
<h3 id="pyfoamredoplots.py-supports-range-for-plots"><code>pyFoamRedoPlots.py</code> supports range for plots</h3>
<p>Added <code>-end</code> and <code>-start</code>-option to select a range that should be plotted.</p>
<p>Currently not working with the Matplotlib-implementation (only gnuplot)</p>
<h3 id="pyfoamdisplayblockmesh.py-no-supports-templates"><code>pyFoamDisplayBlockMesh.py</code> no supports templates</h3>
<p>If a file with values is specified then the utility assumes you're editing a template file and will evaluate it before displaying it</p>
<h3 id="pyfoamcasereport.py-is-tolerant-towards-binary-files"><code>pyFoamCaseReport.py</code> is tolerant towards binary files</h3>
<p>New switch that makes the parser treat files that are declared <code>binary</code> in the header as if they were <code>ascii</code></p>
<h3 id="pyfoamsampleplot.py-and-pyfoamtimelineplot.py-raise-error-if-no-plots-are-generated"><code>pyFoamSamplePlot.py</code> and <code>pyFoamTimelinePlot.py</code> raise error if no plots are generated</h3>
<p>This makes it easier to catch faulty specifications (or empty timeline-files)</p>
<h3 id="pyfoamsurfaceplot.py-can-wait-for-a-key"><code>pyFoamSurfacePlot.py</code> can wait for a key</h3>
<p>An option <code>--wait</code> has been added that makes the utility wait before displaying the next picture</p>
<h3 id="pyfoamechodictionary.py-is-more-flexible-with-binary-files"><code>pyFoamEchoDictionary.py</code> is more flexible with binary files</h3>
<p>Switch allows forcing it to read a binary File as an ASCII</p>
<h3 id="all-utilities-now-have-a-switch-that-starts-the-debugger-even-with-syntax-errors">All utilities now have a switch that starts the debugger even with syntax-errors</h3>
<p>Previously the option <code>--interactive-debug</code> only started the debugger if the error was <strong>no</strong> syntax error. This is still the default behavior, but can be overruled</p>
<h3 id="utilities-now-can-be-killed-with-usr1-and-will-give-a-traceback">Utilities now can be killed with <code>USR1</code> and will give a traceback</h3>
<p>The option <code>--catch-USR1-signal</code> now installs a signal-handler that prints a traceback and finishes the run. If the interactive debugger is enabled then it goes to the debugger-shell.</p>
<p>Option <code>--keyboard-interrupt-trace</code> triggers the same behaviour for keyboard interrupts with <code>&lt;Ctrl&gt;-C</code></p>
<h3 id="switch-to-switch-on-all-debug-options">Switch to switch on <strong>all</strong> debug options</h3>
<p>For the purpose of developing a switch <code>--i-am-a-developer</code> has been added.</p>
<h3 id="plotting-utilities-now-allow-specification-of-x-axis-label">Plotting utilities now allow specification of x-Axis label</h3>
<p>With the option <code>xlabel</code> in the <code>customRegexp</code>-file the label on the x-axis of the plot can be changed. Setting <code>ylabel</code> and <code>y2label</code> (for the secondary axis) was already possible</p>
<h3 id="metrics-and-compare-for-pyfoamtimelineplot.py-and-pyfoamsampleplot.py-support-time-ranges">Metrics and compare for <code>pyFoamTimelinePlot.py</code> and <code>pyFoamSamplePlot.py</code> support time ranges</h3>
<p>Now the options <code>--min-time</code> and <code>--max-time</code> are supported by <code>--metrics</code> and <code>--compare</code></p>
<h3 id="pyfoamdisplayblockmesh.py-allows-graphical-selection-of-blocks-and-patches"><code>pyFoamDisplayBlockMesh.py</code> allows graphical selection of blocks and patches</h3>
<p>New addition by Marc Immer allows the graphical selection of blocks and patches and adds them to the <code>blockMeshDict</code></p>
<h3 id="pyfoamclonecase.py-and-pyfoampackcase.py-accept-additional-parameters"><code>pyFoamCloneCase.py</code> and <code>pyFoamPackCase.py</code> accept additional parameters</h3>
<p>The file <code>LocalConfigPyFoam</code> is read by these utilities and if there is a parameter <code>addItem</code> in the section <code>Cloning</code> defined then these files are cloned/packed automatically (no user specification required)</p>
<h3 id="pyfoamlistcases.py-now-calculates-estimated-end-times"><code>pyFoamListCases.py</code> now calculates estimated end-times</h3>
<p>Additional option to print the estimated end times. These can be wrong if the case did not start from the <code>startTime</code> in the <code>controlDict</code>.</p>
<p>Also now allows printing the end and the start-time according to the <code>controlDict</code></p>
<h2 id="new-features">New features</h2>
<h3 id="different-phases-for-multi-region-solvers">Different "phases" for multi-region solvers</h3>
<p>Plots of type <code>phase</code> in <code>customRegexp</code> don't actually plot anything. The set a phase-name that is used for subsequent values (for instance to distinguish the different residuals)</p>
<h3 id="pyfoamchangeboundarytype.py-allows-selection-of-region-and-time"><code>pyFoamChangeBoundaryType.py</code> allows selection of region and time</h3>
<p>Options <code>--region</code> and <code>--time-directory</code> added that allow selecting different <code>boundary</code>-files</p>
<h3 id="new-class-for-storing-case-data-in-a-sqlite-database-and-associated-utilities">New class for storing case data in a sqlite-database and associated utilities</h3>
<p>The class <code>RunDatabase</code> stores the data from runs. Utility <code>pyFoamAddCaseDataToDatabase.py</code> is one way to populate the database. <code>pyFoamDumpRunDatabaseToCSV.py</code> allows dumping that data to a file for further processing (in a spreadsheet for instance)</p>
<p>Database can also be populated using a special post-run hook</p>
<h2 id="bugfixes-5">Bugfixes</h2>
<h3 id="only-binary-packages-of-1.x-were-found">Only binary packages of 1.x were found</h3>
<p>Pattern had to start with 1 (now every digit is possible))</p>
<h3 id="option-group-regular-expressions-was-listed-twice">Option group <em>Regular expressions</em> was listed twice</h3>
<p>No harm done. But fixed</p>
<h3 id="clear-option-for-pyfoamdecompose.py-not-working"><code>--clear</code>-option for <code>pyFoamDecompose.py</code> not working</h3>
<p>Reason was that <code>rmtree</code> does not allow wildcards. Fixed</p>
<h3 id="pyfoamdisplayblockmesh.py-not-working-with-variable-substitution"><code>pyFoamDisplayBlockmesh.py</code> not working with variable substitution</h3>
<p>The <code>DictRedirect</code> would not convert to float. Fixed. Although it might happen again for other data types</p>
<h3 id="option---function-object-data-of-pyfoamclearcase.py-not-working-with-directories">Option <code>--function-object-data</code> of <code>pyFoamClearCase.py</code> not working with directories</h3>
<p>The option was only implemented for the list-form of the <code>functions</code> entry in <code>controlDict</code></p>
<p>Now fixed to also work with the dictionary-form</p>
<h3 id="nonuniform-of-length-0-not-correctly-printed"><code>nonuniform</code> of length 0 not correctly printed</h3>
<p>Seems like the length was interpreted as the name of the list. Fixed</p>
<h3 id="building-of-pseudocases-with-pyfoamrunner.py-broken">Building of pseudocases with <code>pyFoamRunner.py</code> broken</h3>
<p>Only worked if no region was specified (= not at all). Fixed</p>
<h3 id="pyfoamredoplot.py-did-not-correctly-honor---end-and---start"><code>pyFoamRedoPlot.py</code> did not correctly honor <code>--end</code> and <code>--start</code></h3>
<p>Plots were over the whole data range. This is now fix (also the issue that <code>--end</code> alone did not work)</p>
<h3 id="writeparameterfile-does-not-preserve-the-order-of-additions"><code>WriteParameterFile</code> does not preserve the order of additions</h3>
<p>Contents was "only" set as a dictionary which does not preserve the order in which entries are added. Replaced with a <code>DictProxy</code></p>
<h3 id="wrong-number-of-arguments-when-using-timelineplot-in-positions-mode">Wrong number of arguments when using <code>TimelinePlot</code> in <code>positions</code>-mode</h3>
<p>Problem that was introduced by changes in the <code>fields</code>-mode</p>
<h3 id="clusterjob-uses-only-metis-for-decomposition"><code>ClusterJob</code> uses only <code>metis</code> for decomposition</h3>
<p>For OpenFOAM-versions 1.6 and higher the automatic decomposition used is now <code>scotch</code></p>
<h3 id="pyfoamsampleplot.py-and-pyfoamtimelineplot.py-produced-no-pictures-for-regions"><code>pyFoamSamplePlot.py</code> and <code>pyFoamTimelinePlot.py</code> produced no pictures for regions</h3>
<p>As regions have their own subdirectories the <code>/</code> from the directory name was inserted into the filename and if the subdirectory did not exist <code>gnuplot</code> did not create the picture</p>
<h3 id="barplots-in-pyfoamtimelineplot.py-not-working-if-value-is-a-vector">Barplots in <code>pyFoamTimelinePlot.py</code> not working if value is a vector</h3>
<p>The base class didn't correctly handle the <code>(</code> and <code>)</code>. Fixed</p>
<h3 id="mysterious-deadlocks-while-plotting-long-logfiles">Mysterious deadlocks while plotting long logfiles</h3>
<p>The problem was that during splitting the timeline data an exception was raised. This exception was caught by another part of PyFoam. This left a lock on the data structure locked and the next access to the structure was held indefinitely. Fixed</p>
<h3 id="scanning-linear-expressions-form-the-block-coupled-solver-failed">Scanning linear expressions form the block coupled solver failed</h3>
<p>As there is a tuple of residuals the scanner did not analyze the output of the output of the block-coupled solver from <code>1.6-ext</code> correctly. This is now treated as a special case and each residual is plotted separately (distinguished by a <code>[x]</code> with <code>x</code> being the number of the component)</p>
<h3 id="include-not-correctly-working-with-macros-in-the-included-file"><code>#include</code> not correctly working with macros in the included file</h3>
<p>Macros <code>$var</code> were not correctly expanded. Fixed</p>
<h3 id="macros-not-correctly-expanded-to-strings">Macros not correctly expanded to strings</h3>
<p>When being expanded to string form macros were not correctly expanded</p>
<h3 id="pyfoampackcase.py-in-the-working-directory-produces-invisible-tar"><code>pyFoamPackCase.py</code> in the working directory produces 'invisible' tar</h3>
<p>If the utility was used in the form</p>
<pre class="example"><code>pyFoamPackCase.py .
</code></pre>
<p>then an 'invisible' tar <code>..tgz</code> was produced. Fixed</p>
<h3 id="string-at-the-end-of-a-linear-solver-output-makes-parsing-fail">String at the end of a linear solver output makes parsing fail</h3>
<p>Reported in [<a href="http://www.cfd-online.com/Forums/openfoam-solving/112278-pyfoam-struggles-adopted-solver-post403990.html">http://www.cfd-online.com/Forums/openfoam-solving/112278-pyfoam-struggles-adopted-solver-post403990.html</a>] the string is assumed to be part of the iteration number. Fixed</p>
<h3 id="paraview-utilities-not-working-with-higher-paraview-versions">Paraview utilities not working with higher Paraview versions</h3>
<p>At least for PV 3.14 and 3.98 the way the version number is determined has changed and the PV-utilities failed. This has been fixed but is untested with old versions</p>
<h3 id="camera-settings-not-honored-with-pyfoampvsnapshot.py">Camera settings not honored with <code>pyFoamPVSnapshot.py</code></h3>
<p>For the first rendered view Paraview automatically resets the camera. This has now been switched off (so the snapshot is rendered correctly)</p>
<h1 id="version-0.5.7---2012-04-13">Version 0.5.7 - 2012-04-13</h1>
<h2 id="parser-improvements">Parser improvements</h2>
<ul>
<li>Problem with nested comments</li>
<li>Parse code streams</li>
<li>Preserving of comments can be switched off</li>
<li>Ignore extra semicolons</li>
<li>Allows parsing lists of length 3 and 9 as lists and not as vectors and tensors</li>
<li>"lookup redirection" in OF-dictionaries now works</li>
</ul>
<h2 id="utility-improvements">Utility improvements</h2>
<ul>
<li>pyFoamSamplePlot.py stops if the same directory is compared</li>
<li>pyFoamSamplePlot.py shows the location of the biggest difference</li>
<li>pyFoamSamplePlot.py allows only same ranges for comparisons</li>
<li>Generation of pickled-files can be switched of for runner-utilities</li>
<li>Frequency with which the pickled file is written is adapted (so that it doesn't use ALL the CPU-time)</li>
<li>pyFoamVersion.py improved (Version of Python is checked etc)</li>
<li>pyFoamRedoPlot.py: fixed parameter checking</li>
<li>pyFoamPotentialRunner.py: temporarily disable libs and functions</li>
<li>Only write last N loglines from Runner-utility</li>
<li>pyFoamClearCase.py: allow local specification of additional files that should be cleared</li>
<li>Runner utilities can report data about the run</li>
<li>pyFoamConvertToCSV.py now allows selection of columns</li>
<li>Utilities for quantative analysis now can return data</li>
<li>Utilities for quantative now correctly return data for multiple places</li>
<li>pyFoamSamplePlot.py now allows specification of valid variable pre and postfixes to allow correct parsing of variable names with a _</li>
<li>endTime can be specified by the runner-utilities</li>
<li>Utilities now allow piping (using pickled data)</li>
<li>pyFoamSamplePlot.py now allows the specification of a reference time</li>
<li>Nomenclature of pyFoamSamplePlot.py and pyFoamTimelinePlots.py now similar (both call it fields)</li>
<li>pyFoamDecompose.py now can use the -region-option ifthe OF-version is right</li>
<li>Forcing debug-mode fixed for older OF-versions</li>
<li>pyFoamDecomposer.py now accepts globalFaceZones in Python or OpenFOAM-syntax</li>
<li>Plot-utilities now don't interpret _ in names not as LaTeX</li>
</ul>
<h2 id="new-utilities">New Utilities</h2>
<ul>
<li>pyFoamEchoPickledApplicationData to output pickled data</li>
<li>pyFoamPrintData2DStatistics.py to output data from comparisons</li>
<li>pyFoamBuildHelper.py to build project and its prerequisites (work in progress)</li>
<li>pyFoamCreateModuleFile.py to create files for <a href="http://modules.sourceforge.net/">http://modules.sourceforge.net/</a> (by Martin Beaudoin)</li>
<li>pyFoamSTLUtility.py to join STL-files</li>
</ul>
<h2 id="library-improvements">Library improvements</h2>
<ul>
<li>stabler comparisons</li>
<li>Paraview-Utilities work with 1.x and 2.x</li>
<li>Runner classes return a dictionary with data</li>
<li>TimelineDirectory ignores dot-files</li>
<li>Application-objects can now be used like dictionaries to access data</li>
<li>New class TableData for simple data tables</li>
<li>New class Data2DStatistics for statistics about tables</li>
<li>new class CTestRun as basis for automated testing</li>
<li>FoamOptionParser now resets environment variables so that application-classes can call other application classes</li>
<li>Improvements to HgInterface</li>
<li>Additional VCS-subclasses for git, svn and svk (implementation only as needed)</li>
<li>SolutionDir now uses 0.org as initial directory if no valid initial directory is present (this affects clearing and cloning)</li>
<li>FoamFileGenerator now more flexible for long lists</li>
<li>ParsedBlockMeshDict now doesn't introduce prefixes for 'long' lists</li>
</ul>
<h2 id="removed-utilities">Removed utilities</h2>
<ul>
<li>pyFoamAPoMaFoX.py</li>
<li>pyFoamPlotResiduals.py</li>
</ul>
<h2 id="thirdparty-3">Thirdparty</h2>
<ul>
<li>Got rid of Numeric-support in Gnuplot-library</li>
</ul>
<h2 id="other">Other</h2>
<ul>
<li>script to generate man-pages for the utilities</li>
<li>Paraview3-example probeDisplay.py now renamed to probeAndSetDisplay.py and reads sampledSets from controlDict and sampleDict</li>
</ul>
<h1 id="older-versions">Older Versions</h1>
<p>The changes for older versions can be found on <a href="http://openfoamwiki.net/index.php/Contrib_PyFoam#History">the Wiki-page</a></p>
