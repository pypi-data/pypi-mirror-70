var clockTarget=0,clockTickId=0;function showAdjust(){jQuery("#btnadjust").addClass("hidden");jQuery("#adjust").removeClass("hidden");var a=moment.tz(new Date,"Etc/UTC");jQuery("#tathour").val(a.format("HH"));jQuery("#tatminute").val(a.format("mm"));jQuery("#tatday").val(a.format("DD"));jQuery("#tatmonth").val(a.format("MM"));jQuery("#tatyear").val(a.format("YYYY"))}function setdate(a,c){window.location.hash=""!==c?moment.tz(a,c).unix():moment(a).unix()}
function updatePanel(a,c){jQuery("#time-"+c).html(a.format("HH:mm:ss"));jQuery("#utc-offset-"+c).html("(UTC "+a.format("Z")+")");jQuery("#date-"+c).html(a.format("dddd DD MMM YYYY"));jQuery("#icon-"+c).removeClass();a=1*a.format("H");var b="wi wi-night-clear";23>a&&(b="wi wi-moonrise");20>a&&(b="wi wi-sunset");17>a&&(b="wi wi-day-sunny");14>a&&(b="wi wi-day-sunny");11>a&&(b="wi wi-day-sunny");9>a&&(b="wi wi-sunrise");6>a&&(b="wi wi-moonset");3>a&&(b="wi wi-night-clear");jQuery("#icon-"+c).addClass(b)}
function updatePanels(a){updatePanel(moment(a),"local-time");jQuery.each(timezoneOptions,function(c,b){updatePanel(moment.tz(a,b.timezoneName),b.timezoneId)})}function clockTick(){updatePanels(new Date)}
function switchto(a){0!==clockTickId&&clearInterval(clockTickId);0===a?(jQuery("#headlineCurrent").removeClass("hidden"),jQuery("#headlineFixed").addClass("hidden"),jQuery("#adjust").addClass("hidden"),jQuery("#btnadjust").removeClass("hidden"),jQuery("#btnshowcurrent").addClass("hidden"),0!==clockTarget&&jQuery("#btnshowfixed").removeClass("hidden"),jQuery("#btnclear").addClass("hidden"),clockTickId=setInterval(clockTick,1E3),clockTick()):(jQuery("#headlineCurrent").addClass("hidden"),jQuery("#headlineFixed").removeClass("hidden"),
jQuery("#adjust").addClass("hidden"),jQuery("#btnadjust").addClass("hidden"),jQuery("#btnshowcurrent").removeClass("hidden"),jQuery("#btnshowfixed").addClass("hidden"),jQuery("#btnclear").removeClass("hidden"),updatePanels(new Date(clockTarget)))}
function hashchange(){var a=window.location.hash.substring(1);clockTarget=0;!isNaN(parseFloat(a))&&isFinite(a)&&(clockTarget=1E3*a,a=moment.tz(new Date(clockTarget),"Etc/UTC"),jQuery("#timestamp").attr("datetime",a.format("YYYY-MM-DDTHH:mm:00Z0000")),jQuery("#timestamp").timeago("update",new Date(clockTarget)));switchto(clockTarget)}
jQuery(document).ready(function(a){window.addEventListener("hashchange",hashchange,!1);var c=1*moment.tz(new Date,"Etc/UTC").format("YYYY"),b;for(b=c-4;b<c+5;b++)a("#tatyear").append(a("<option>",{i:b}).text(b));a.timeago.settings.allowFuture=!0;a.timeago.settings.allowPast=!0;setInterval(function(){a("#timestamp").timeago("update",new Date(clockTarget))},1E4);hashchange()});