{"version":3,"sources":["Components.js","Query.js","App.js","serviceWorker.js","index.js"],"names":["Link","props","type","className","onClick","children","FilterValue","lookup","onChange","value","step","Filter","path","this","prettyPath","index","query","getType","getField","removeFilter","addField","join","e","setFilterLookup","target","sortedLookups","map","lookupName","key","replace","setFilterValue","lookups","errorMessage","React","Component","Filters","filters","filter","filterErrors","Toggle","state","isToggleOn","setState","handleClick","bind","title","Field","modelField","prettyName","concrete","defaultLookup","addFilter","model","AllFields","modelFields","getModelFields","sortedFields","fieldName","fields","concat","ResultsFieldCell","field","removeField","toggleSort","dsc","priority","asc","null","sort","ResultsHead","length","ResultsCell","colSpan","span","dangerouslySetInnerHTML","__html","String","ResultsBody","results","row","rowIndex","cell","colIndex","Results","PivotResults","colFields","f","pivoted","rowFields","canPivot","resFields","Array","cols","cells","undefined","rows","i","resIndex","ModelSelector","setModel","sortedModels","Logo","version","QueryPage","saveUrl","getUrlForSave","id","href","getUrlForMedia","HomePage","savedViews","view","setQuery","name","description","getPartsForQuery","getUrlForQuery","baseUrl","media","parts","basePath","window","location","origin","controller","Query","config","slice","allModelFields","types","defaultValue","newFields","push","newResults","splice","newSort","newFilters","getDefaultLookValue","adminUrl","model_name","queryString","URLSearchParams","toString","assert","require","handleError","console","log","Sentry","App","initialState","url","abort","AbortController","fetch","signal","then","res","json","response","reload","reqState","history","replaceState","fetchResults","catch","onpopstate","queryChange","newState","request","pushState","deepEqual","handleQueryChange","Boolean","hostname","match","djangoData","JSON","parse","document","getElementById","textContent","sentryDsn","dsn","release","attachStacktrace","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.8d3d5766.chunk.js","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\n\nfunction Link(props) {\n  return (\n    <button\n      type=\"button\"\n      className={\"Link \" + (props.className || \"\")}\n      onClick={props.onClick}\n    >\n      {props.children}\n    </button>\n  );\n}\n\nfunction FilterValue(props) {\n  if (props.lookup.type === \"boolean\")\n    return (\n      <select\n        className=\"FilterValue\"\n        onChange={props.onChange}\n        value={props.value}\n      >\n        <option value={true}>true</option>\n        <option value={false}>false</option>\n      </select>\n    );\n  else if (props.lookup.type === \"number\")\n    return (\n      <input\n        className=\"FilterValue\"\n        type=\"number\"\n        step=\"0\"\n        value={props.value}\n        onChange={props.onChange}\n      />\n    );\n  else\n    return (\n      <input\n        className=\"FilterValue\"\n        type=\"text\"\n        value={props.value}\n        onChange={props.onChange}\n      />\n    );\n}\n\nclass Filter extends React.Component {\n  render() {\n    const path = this.props.path;\n    const prettyPath = this.props.prettyPath;\n    const index = this.props.index;\n    const lookup = this.props.lookup;\n    const query = this.props.query;\n    const type = query.getType(query.getField(path));\n    return (\n      <tr>\n        <td>\n          <Link onClick={() => query.removeFilter(index)}>✘</Link>{\" \"}\n          <Link onClick={() => query.addField(path, prettyPath)}>\n            {prettyPath.join(\" \")}\n          </Link>{\" \"}\n        </td>\n        <td>\n          <select\n            className=\"Lookup\"\n            value={lookup}\n            onChange={(e) => query.setFilterLookup(index, e.target.value)}\n          >\n            {type.sortedLookups.map((lookupName) => (\n              <option key={lookupName} value={lookupName}>\n                {lookupName.replace(/_/g, \" \")}\n              </option>\n            ))}\n          </select>\n        </td>\n        <td>=</td>\n        <td>\n          <FilterValue\n            value={this.props.value}\n            onChange={(e) => query.setFilterValue(index, e.target.value)}\n            lookup={type.lookups[lookup]}\n          />\n          {this.props.errorMessage ? <p>{this.props.errorMessage}</p> : \"\"}\n        </td>\n      </tr>\n    );\n  }\n}\n\nfunction Filters(props) {\n  return (\n    <form className=\"Filters\">\n      <table className=\"Flat\">\n        <tbody>\n          {props.filters.map((filter, index) => (\n            <Filter\n              query={props.query}\n              key={index}\n              index={index}\n              {...filter}\n              errorMessage={props.filterErrors[index]}\n            />\n          ))}\n        </tbody>\n      </table>\n    </form>\n  );\n}\n\nclass Toggle extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isToggleOn: false };\n  }\n\n  handleClick() {\n    this.setState((state) => ({\n      isToggleOn: !state.isToggleOn,\n    }));\n  }\n\n  render() {\n    return (\n      <>\n        <td>\n          <Link className=\"ToggleLink\" onClick={this.handleClick.bind(this)}>\n            {this.state.isToggleOn ? \">\" : \"+\"}\n          </Link>\n        </td>\n        <td>\n          {this.props.title}\n          {this.state.isToggleOn && this.props.children}\n        </td>\n      </>\n    );\n  }\n}\n\nfunction Field(props) {\n  const modelField = props.modelField;\n  const title = modelField.type ? (\n    <Link onClick={() => props.query.addField(props.path, props.prettyPath)}>\n      {modelField.prettyName}\n    </Link>\n  ) : (\n    modelField.prettyName\n  );\n  const type = props.query.getType(modelField);\n  return (\n    <tr>\n      <td>\n        {modelField.concrete && type.defaultLookup && (\n          <Link\n            onClick={() => props.query.addFilter(props.path, props.prettyPath)}\n          >\n            Y\n          </Link>\n        )}\n      </td>\n\n      {modelField.model ? (\n        <Toggle title={title}>\n          <AllFields\n            query={props.query}\n            model={modelField.model}\n            path={props.path}\n            prettyPath={props.prettyPath}\n          />\n        </Toggle>\n      ) : (\n        <>\n          <td></td>\n          <td>{title}</td>\n        </>\n      )}\n    </tr>\n  );\n}\n\nfunction AllFields(props) {\n  const modelFields = props.query.getModelFields(props.model);\n  return (\n    <table>\n      <tbody>\n        {modelFields.sortedFields.map((fieldName) => {\n          const modelField = modelFields.fields[fieldName];\n          return (\n            <Field\n              key={fieldName}\n              query={props.query}\n              path={props.path.concat([fieldName])}\n              prettyPath={props.prettyPath.concat([modelField.prettyName])}\n              modelField={modelField}\n            />\n          );\n        })}\n      </tbody>\n    </table>\n  );\n}\n\nfunction ResultsFieldCell(props) {\n  const modelField = props.query.getField(props.field.path);\n  const type = props.query.getType(modelField);\n  return (\n    <th className={props.className}>\n      <Link onClick={() => props.query.removeField(props.index)}>✘</Link>{\" \"}\n      {modelField.concrete && type.defaultLookup ? (\n        <>\n          <Link\n            onClick={() =>\n              props.query.addFilter(props.field.path, props.field.prettyPath)\n            }\n          >\n            Y\n          </Link>{\" \"}\n          <Link onClick={() => props.query.toggleSort(props.index)}>\n            {props.field.prettyPath.join(\" \")}\n          </Link>{\" \"}\n          {\n            {\n              dsc: `↑${props.field.priority}`,\n              asc: `↓${props.field.priority}`,\n              null: \"\",\n            }[props.field.sort]\n          }\n        </>\n      ) : (\n        props.field.prettyPath.join(\" \")\n      )}\n    </th>\n  );\n}\n\nfunction ResultsHead(props) {\n  return (\n    <thead>\n      <tr>\n        {props.fields.map((field, index) => (\n          <ResultsFieldCell\n            query={props.query}\n            field={field}\n            index={index}\n            key={index}\n            className={\"HoriBorder\"}\n          />\n        ))}\n        {!props.fields.length && <th>No fields selected</th>}\n      </tr>\n    </thead>\n  );\n}\n\nfunction ResultsCell(props) {\n  return (\n    <td\n      className={props.modelField.type + \" \" + props.className || \"\"}\n      colSpan={props.span || 1}\n    >\n      {props.modelField.type === \"html\" && props.value ? (\n        <div dangerouslySetInnerHTML={{ __html: props.value }} />\n      ) : (\n        String(props.value)\n      )}\n    </td>\n  );\n}\n\nfunction ResultsBody(props) {\n  return (\n    <tbody>\n      {props.results.map((row, rowIndex) => (\n        <tr key={rowIndex}>\n          {row.map((cell, colIndex) => (\n            <ResultsCell\n              key={colIndex}\n              query={props.query}\n              value={cell}\n              modelField={props.query.getField(props.fields[colIndex].path)}\n            />\n          ))}\n        </tr>\n      ))}\n    </tbody>\n  );\n}\n\nfunction Results(props) {\n  return (\n    <table className=\"Results\">\n      <ResultsHead query={props.query} fields={props.fields} />\n      <ResultsBody\n        query={props.query}\n        results={props.results}\n        fields={props.fields}\n      />\n    </table>\n  );\n}\n\nfunction PivotResults(props) {\n  const colFields = props.fields.filter((f) => f.pivoted);\n  const rowFields = props.fields.filter(\n    (f) => !f.pivoted && props.query.getField(f.path).canPivot\n  );\n  const resFields = props.fields.filter(\n    (f) => !props.query.getField(f.path).canPivot\n  );\n  return (\n    <table className=\"Results\">\n      <thead>\n        {/* col headers */}\n        {colFields.map((field, index) => {\n          return (\n            <tr key={index}>\n              {[...Array(rowFields.length ? rowFields.length - 1 : 0)].map(\n                () => (\n                  <td className=\"Empty\" />\n                )\n              )}\n              <ResultsFieldCell\n                query={props.query}\n                field={field}\n                index={0} /* TODO how are we going to get this? */\n              />\n              {props.cols.map((cells) => (\n                <ResultsCell\n                  query={props.query}\n                  value={cells[index]}\n                  modelField={props.query.getField(field.path)}\n                  span={resFields.length}\n                  className=\"SoftLeftBorder\"\n                />\n              ))}\n            </tr>\n          );\n        })}\n\n        {/* res headers */}\n        <tr>\n          {rowFields.length ? undefined : <td className=\"Empty\" />}\n          {rowFields.map((field) => (\n            <ResultsFieldCell\n              query={props.query}\n              field={field}\n              index={0} /* TODO how are we going to get this? */\n              className=\"HoriBorder\"\n            />\n          ))}\n          {props.cols.map(() =>\n            resFields.map((field, index) => (\n              <ResultsFieldCell\n                query={props.query}\n                field={field}\n                index={0} /* TODO how are we going to get this? */\n                className={\"HoriBorder\" + (index ? \"\" : \" LeftBorder\")}\n              />\n            ))\n          )}\n        </tr>\n      </thead>\n      <tbody>\n        {props.rows.map((row, index) => (\n          <tr>\n            {/* row headers */}\n            {rowFields.length ? undefined : <td className=\"Empty\" />}\n            {row.map((cell, i) => (\n              <ResultsCell\n                query={props.query}\n                value={cell}\n                modelField={props.query.getField(rowFields[i].path)}\n              />\n            ))}\n            {/* results */}\n            {props.results[index].map((cell, i) => {\n              const resIndex = i % resFields.length;\n              return (\n                <ResultsCell\n                  query={props.query}\n                  value={cell}\n                  modelField={props.query.getField(resFields[resIndex].path)}\n                  className={resIndex ? \"\" : \"LeftBorder\"}\n                />\n              );\n            })}\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n\nfunction ModelSelector(props) {\n  return (\n    <select\n      className=\"ModelSelector\"\n      onChange={(e) => props.query.setModel(e.target.value)}\n      value={props.model}\n    >\n      {props.sortedModels.map((model) => (\n        <option key={model}>{model}</option>\n      ))}\n    </select>\n  );\n}\n\nfunction Logo(props) {\n  return (\n    <div className=\"Logo\" onClick={() => props.query.setModel(\"\")}>\n      <span>DDB</span>\n      <span className=\"Version\">v{props.version}</span>\n    </div>\n  );\n}\n\nfunction QueryPage(props) {\n  const saveUrl = props.query.getUrlForSave();\n  return (\n    <div id=\"body\">\n      <Logo query={props.query} version={props.version} />\n      <ModelSelector\n        query={props.query}\n        sortedModels={props.sortedModels}\n        model={props.model}\n      />\n      <Filters\n        query={props.query}\n        filters={props.filters}\n        filterErrors={props.filterErrors}\n      />\n      <p>\n        Showing {props.results.length} results -{\" \"}\n        <a href={props.query.getUrlForMedia(\"csv\")}>Download as CSV</a> -{\" \"}\n        <a href={props.query.getUrlForMedia(\"json\")}>View as JSON</a>\n        {saveUrl && (\n          <>\n            {\" \"}\n            - <a href={saveUrl}>Save View</a>{\" \"}\n          </>\n        )}\n      </p>\n      <div className=\"MainSpace\">\n        <div className=\"FieldsList\">\n          <AllFields\n            query={props.query}\n            model={props.model}\n            path={[]}\n            prettyPath={[]}\n          />\n        </div>\n        {props.cols.length ? (\n          <PivotResults\n            query={props.query}\n            fields={props.fields}\n            results={props.results}\n            cols={props.cols}\n            rows={props.rows}\n          />\n        ) : (\n          <Results\n            query={props.query}\n            fields={props.fields}\n            results={props.results}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction HomePage(props) {\n  return (\n    <div id=\"body\">\n      <Logo query={props.query} version={props.version} />\n      <div className=\"Index\">\n        <div>\n          <h1>Models</h1>\n          <div>\n            {props.sortedModels.map((model) => (\n              <div key={model}>\n                <button\n                  className=\"Link\"\n                  onClick={() => props.query.setModel(model)}\n                >\n                  {model}\n                </button>\n              </div>\n            ))}\n          </div>\n        </div>\n        <div>\n          <h1>Saved Views</h1>\n          <div>\n            {props.savedViews.map((view, index) => (\n              <div key={index}>\n                <button\n                  className=\"Link\"\n                  onClick={() => props.query.setQuery(view.query)}\n                >\n                  {view.model} - {view.name}\n                </button>\n                <p>{view.description}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport { HomePage, QueryPage };\n","function getPartsForQuery(query) {\n  return {\n    model: query.model,\n    fields: query.fields\n      .map(\n        (f) =>\n          (f.pivoted ? \"&\" : \"\") +\n          f.path.join(\"__\") +\n          { asc: `+${f.priority}`, dsc: `-${f.priority}`, null: \"\" }[f.sort]\n      )\n      .join(\",\"),\n    query: query.filters\n      .map((f) => `${f.path.join(\"__\")}__${f.lookup}=${f.value}`)\n      .join(\"&\"),\n  };\n}\n\nfunction getUrlForQuery(baseUrl, query, media) {\n  const parts = getPartsForQuery(query);\n  const basePath = `${baseUrl}query/${parts.model}`;\n  return `${window.location.origin}${basePath}/${parts.fields}.${media}?${parts.query}`;\n}\n\nclass Query {\n  constructor(config, query, setQuery) {\n    this.config = config;\n    this.query = query;\n    this.setQuery = setQuery;\n  }\n\n  getField(path) {\n    const field = path.slice(-1);\n    let model = this.query.model;\n    for (const field of path.slice(0, -1)) {\n      model = this.config.allModelFields[model].fields[field].model;\n    }\n    return this.config.allModelFields[model].fields[field];\n  }\n\n  getType(field) {\n    return this.config.types[field.type];\n  }\n\n  getModelFields(model) {\n    return this.config.allModelFields[model];\n  }\n\n  getDefaultLookValue(type) {\n    return this.config.types[type.lookups[type.defaultLookup].type]\n      .defaultValue;\n  }\n\n  addField(path, prettyPath) {\n    const newFields = this.query.fields.slice();\n    newFields.push({\n      path: path,\n      prettyPath: prettyPath,\n      sort: null,\n      priority: null,\n      pivoted: false,\n    });\n    const newResults = this.query.results.map((row) => row.concat([\"\"]));\n    this.setQuery({ fields: newFields, results: newResults });\n  }\n\n  removeField(index) {\n    const newFields = this.query.fields.slice();\n    newFields.splice(index, 1);\n    const newResults = this.query.results.map((row) =>\n      row.slice(0, index).concat(row.slice(index + 1))\n    );\n    this.setQuery({ fields: newFields, results: newResults });\n  }\n\n  toggleSort(index) {\n    const field = this.query.fields[index];\n    const newSort = { asc: \"dsc\", dsc: null, null: \"asc\" }[field.sort];\n    let newFields = this.query.fields.slice();\n\n    if (field.sort) {\n      // move any later sort fields forward\n      newFields = newFields.map((f) => ({\n        ...f,\n        priority:\n          f.priority != null && f.priority > field.priority\n            ? f.priority - 1\n            : f.priority,\n      }));\n    }\n\n    if (newSort) {\n      // move all other fiels back and insert the updated one\n      newFields = newFields.map((f) => ({\n        ...f,\n        priority: f.priority != null ? f.priority + 1 : f.priority,\n      }));\n      newFields[index] = { ...field, sort: newSort, priority: 0 };\n    } else {\n      // blank the sort on the updated field\n      newFields[index] = { ...field, sort: null, priority: null };\n    }\n\n    this.setQuery({\n      fields: newFields,\n    });\n  }\n\n  addFilter(path, prettyPath) {\n    const type = this.getType(this.getField(path));\n    const newFilters = this.query.filters.slice();\n    newFilters.push({\n      path: path,\n      prettyPath: prettyPath,\n      lookup: type.defaultLookup,\n      value: this.getDefaultLookValue(type),\n    });\n    this.setQuery({ filters: newFilters });\n  }\n\n  removeFilter(index) {\n    const newFilters = this.query.filters.slice();\n    newFilters.splice(index, 1);\n    this.setQuery({ filters: newFilters });\n  }\n\n  setFilterValue(index, value) {\n    const newFilters = this.query.filters.slice();\n    newFilters[index] = { ...newFilters[index], value: value };\n    this.setQuery({ filters: newFilters });\n  }\n\n  setFilterLookup(index, lookup) {\n    const newFilters = this.query.filters.slice();\n    newFilters[index] = { ...newFilters[index], lookup: lookup };\n    this.setQuery({ filters: newFilters });\n  }\n\n  setModel(model) {\n    this.setQuery({\n      model: model,\n      fields: [],\n      filters: [],\n      results: [],\n    });\n  }\n\n  getUrlForSave() {\n    if (this.config.adminUrl === null) return null;\n    const parts = getPartsForQuery(this.query);\n    parts.model_name = parts.model;\n    const queryString = new URLSearchParams(parts).toString();\n    return `${window.location.origin}${this.config.adminUrl}?${queryString}`;\n  }\n\n  getUrlForMedia(media) {\n    return getUrlForQuery(this.config.baseUrl, this.query, media);\n  }\n}\n\nexport { Query, getPartsForQuery, getUrlForQuery };\n","import * as Sentry from \"@sentry/browser\";\nimport React from \"react\";\nimport \"./App.css\";\nimport { HomePage, QueryPage } from \"./Components\";\nimport { Query, getUrlForQuery } from \"./Query\";\nconst assert = require(\"assert\");\nlet controller;\n\nfunction handleError(e) {\n  if (e.name === \"AbortError\") {\n    console.log(\"request aborted\");\n  } else {\n    console.log(e);\n    Sentry.captureException(e);\n  }\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = props.initialState;\n  }\n\n  fetchResults(state) {\n    const url = getUrlForQuery(this.props.config.baseUrl, state, \"json\");\n\n    if (controller) controller.abort();\n    controller = new AbortController();\n\n    return fetch(url, { signal: controller.signal })\n      .then((res) => res.json())\n      .then((response) => {\n        if (response.version !== this.state.version)\n          window.location.reload(true);\n        delete response.version;\n        return response;\n      })\n      .then((response) => {\n        this.setState({\n          results: response.results,\n          cols: response.cols || [],\n          rows: response.rows || [],\n          filterErrors: response.filterErrors,\n        });\n        return response;\n      });\n  }\n\n  componentDidMount() {\n    const reqState = {\n      model: this.state.model,\n      fields: this.state.fields,\n      filters: this.state.filters,\n      results: [],\n      filterErrors: [],\n    };\n    window.history.replaceState(\n      reqState,\n      null,\n      getUrlForQuery(this.props.config.baseUrl, this.state, \"html\")\n    );\n    this.fetchResults(this.state).catch(handleError);\n    window.onpopstate = (e) => {\n      this.fetchResults(e.state).catch(handleError);\n      this.setState(e.state);\n    };\n  }\n\n  handleQueryChange(queryChange) {\n    this.setState(queryChange);\n    const newState = { ...this.state, ...queryChange };\n    const request = {\n      model: newState.model,\n      fields: newState.fields,\n      filters: newState.filters,\n      results: [],\n      rows: [],\n      cols: [],\n      filterErrors: [],\n    };\n    window.history.pushState(\n      request,\n      null,\n      getUrlForQuery(this.props.config.baseUrl, newState, \"html\")\n    );\n    this.fetchResults(newState)\n      .then((response) => {\n        response.results = [];\n        response.cols = [];\n        response.rows = [];\n        response.filterErrors = [];\n        assert.deepEqual(response, request);\n      })\n      .catch(handleError);\n  }\n\n  render() {\n    const query = new Query(\n      this.props.config,\n      this.state,\n      this.handleQueryChange.bind(this)\n    );\n    if (this.state.model)\n      return (\n        <QueryPage\n          query={query}\n          sortedModels={this.props.config.sortedModels}\n          version={this.props.config.version}\n          {...this.state}\n        />\n      );\n    else\n      return (\n        <HomePage\n          query={query}\n          sortedModels={this.props.config.sortedModels}\n          savedViews={this.props.config.savedViews}\n          version={this.props.config.version}\n        />\n      );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport * as Sentry from \"@sentry/browser\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nconst djangoData = JSON.parse(\n    document.getElementById(\"django-data\").textContent\n);\n\nif (djangoData.sentryDsn) {\n    Sentry.init({\n        dsn: djangoData.sentryDsn,\n        release: djangoData.config.version,\n        attachStacktrace: true,\n    });\n}\n\nReactDOM.render(\n    <React.StrictMode>\n        <App {...djangoData} />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}