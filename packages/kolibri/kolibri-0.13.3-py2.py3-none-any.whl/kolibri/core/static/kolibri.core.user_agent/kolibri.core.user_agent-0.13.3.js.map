{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./kolibri/core/assets/src/utils/plugin_data.js","webpack:///(webpack)/buildin/global.js","webpack:///./kolibri/core/assets/src/utils/userAgent.js","webpack:///./kolibri/core/assets/src/userAgentCheck.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","global","__webpack_exports__","g","this","Function","e","window","const","NAME","VERSION","browserTests","test","map","tests","passesRequirements","browser","requirements","major","entry","minor","patch","pluginData","userAgent","outputBrowser","let","val","length","regex","j","result","exec","k","replace","version","split","getBrowser","navigator","IE","Android","location","href","unsupportedUrl","setFontStyle","fonts","document","createElement","rel","type","head","appendChild","Edge","Firefox","Chrome","Chrome WebView","Safari","Opera","Mobile Safari","fullCSSFileModern","fullCSSFileBasic"],"mappings":"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","file":"kolibri.core.user_agent-0.13.3.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","export default (global['kolibriPluginDataGlobal'] || {})[__kolibriModuleName] || {};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\n * userAgent regex is imported from here:\n * https://github.com/faisalman/ua-parser-js/blob/master/src/ua-parser.js\n * The subsequent code is then written from scratch as it was easier than vendoring\n * the more general purpose code therein.\n */\n\nconst NAME = 'name';\nconst VERSION = 'version';\n\nconst browserTests = [\n  {\n    test: /\\s(opr)\\/([\\w.]+)/i,\n    map: [[NAME, 'Opera'], VERSION],\n  },\n  {\n    tests: [/(?:ms|\\()(ie)\\s([\\w.]+)/i, /(trident).+rv[:\\s]([\\w.]+).+like\\sgecko/i],\n    map: [[NAME, 'IE'], VERSION],\n  },\n\n  {\n    test: /(edge|edgios|edga)\\/((\\d+)?[\\w.]+)/i,\n    map: [[NAME, 'Edge'], VERSION],\n  },\n  {\n    test: /\\swv\\).+(chrome)\\/([\\w.]+)/i,\n    map: [[NAME, /(.+)/, '$1 WebView'], VERSION],\n  },\n  {\n    test: /android.+version\\/([\\w.]+)\\s+(?:mobile\\s?safari|safari)*/i,\n    map: [VERSION, [NAME, 'Android Browser']],\n  },\n  {\n    test: /(chrome)\\/v?([\\w.]+)/i,\n    map: [NAME, VERSION],\n  },\n  {\n    test: /((?:android.+)crmo|crios)\\/([\\w.]+)/i,\n    map: [[NAME, 'Chrome'], VERSION],\n  },\n  {\n    test: /fxios\\/([\\w.-]+)/i,\n    map: [VERSION, [NAME, 'Firefox']],\n  },\n  {\n    test: /version\\/([\\w.]+).+?mobile\\/\\w+\\s(safari)/i,\n    map: [VERSION, [NAME, 'Mobile Safari']],\n  },\n  {\n    test: /version\\/([\\w.]+).+?(mobile\\s?safari|safari)/i,\n    map: [VERSION, NAME],\n  },\n  {\n    test: /(firefox)\\/([\\w.-]+)$/i,\n    map: [NAME, VERSION],\n  },\n];\n\n/**\n * A browser specification object.\n * All version numbers are actually strings to allow for non-final version numbers.\n * @typedef {Object} Browser.\n * @property {?string} name - A nullable string that gives the name of the recognized browser.\n * @property {?string} major - Major version number.\n * @property {?string} minor - Minor version number.\n * @property {?string} patch - Patch version number.\n */\n\n/**\n * This function parses the browser user agent string and returns an object with two values\n * one for the recognized browser name, and one for the recognized browser version.\n * It relies on the regexes above to infer the browser and version from user agent string.\n * As such, its ability to recognizes browsers is limited, as it will only return non-null\n * values for browser and version in the case that the user agent matches those above.\n * @param  {string} userAgent a user agent string from a browser's window.navigator.userAgent.\n * @return {Browser} - a browser specification object.\n */\nexport function getBrowser(userAgent) {\n  // Use to track the parsed name and version.\n  const browser = {\n    [NAME]: null,\n    [VERSION]: null,\n  };\n  // Setup the output object which will be returned.\n  const outputBrowser = {\n    name: null,\n    major: null,\n    minor: null,\n    patch: null,\n  };\n\n  if (userAgent) {\n    let val;\n    for (let i = 0; i < browserTests.length; i++) {\n      val = browserTests[i];\n      let regex;\n      if (val.test) {\n        if (val.test.test(userAgent)) {\n          regex = val.test;\n        }\n      } else if (val.tests) {\n        for (let j = 0; j < val.tests.length; j++) {\n          if (val.tests[j].test(userAgent)) {\n            regex = val.tests[j];\n            break;\n          }\n        }\n      }\n      if (regex) {\n        const result = regex.exec(userAgent);\n        for (let k = 0; k < val.map.length; k++) {\n          if (val.map[k] === NAME || val.map[k] === VERSION) {\n            browser[val.map[k]] = result[k + 1];\n            // If it is not one of those two options it must be a map of some sort\n          } else if (val.map[k].length === 2) {\n            browser[val.map[k][0]] = val.map[k][1];\n          } else if (val.map[k].length === 3) {\n            browser[val.map[k][0]] = result[k + 1].replace(val.map[k][1], val.map[k][2]);\n          }\n        }\n        break;\n      }\n    }\n  }\n  if (browser[NAME]) {\n    outputBrowser.name = browser[NAME];\n  }\n\n  if (browser[VERSION]) {\n    const version = browser[VERSION].split('.');\n    if (version[0]) {\n      outputBrowser.major = version[0];\n      if (version[1]) {\n        outputBrowser.minor = version[1];\n        if (version[2]) {\n          outputBrowser.patch = version[2];\n        }\n      }\n    }\n  }\n  return outputBrowser;\n}\n\n/**\n * A requirements specification object.\n * @typedef {Object.<string, Browser>} Requirements.\n */\n\n/**\n * A function to determine if the browser specification object fails to pass one of the restrictions\n * passed in. It does this in a permissive way, whereby if no specification is made for a particular\n * browser name, then it will return true. If, however, the browser is specified in the requirements\n * object, then if it fails to pass the version requirements specified, then false will be returned.\n * @param  {Browser} browser     - a browser specification object for the browser being tested.\n * @param  {Requirements} requirements - a requirements specification object specifying conditions\n * to test.\n * @return {boolean} - false if failed to pass any of the requirements, true otherwise.\n */\nexport function passesRequirements(browser, requirements) {\n  if (browser.major && browser.name) {\n    const entry = requirements[browser.name];\n    if (entry) {\n      if (browser.major < entry.major) {\n        return false;\n      } else if (browser.major === entry.major) {\n        if (entry.minor && (browser.minor < entry.minor || !browser.minor)) {\n          return false;\n        } else if (entry.minor && browser.minor === entry.minor) {\n          if (entry.patch && (browser.patch < entry.patch || !browser.patch)) {\n            return false;\n          }\n        }\n      }\n    }\n  }\n  return true;\n}\n","import { getBrowser, passesRequirements } from './utils/userAgent';\nimport plugin_data from 'plugin_data';\n\nconst pluginData = plugin_data;\n\nconst userAgent =\n  window && window.navigator && window.navigator.userAgent ? window.navigator.userAgent : '';\n\nconst browser = getBrowser(userAgent);\n\nconst minimumBrowserRequirements = {\n  IE: {\n    major: 11,\n  },\n  Android: {\n    major: 4,\n    minor: 0,\n    patch: 2,\n  },\n};\n\nif (!passesRequirements(browser, minimumBrowserRequirements)) {\n  window.location.href = pluginData.unsupportedUrl;\n}\n\nconst modernFontBrowsers = {\n  Edge: {\n    major: 17,\n  },\n  Firefox: {\n    major: 58,\n  },\n  Chrome: {\n    major: 60,\n  },\n  'Chrome WebView': {\n    major: 60,\n  },\n  Safari: {\n    major: 11,\n    minor: 1,\n  },\n  Opera: {\n    major: 47,\n  },\n  'Mobile Safari': {\n    major: 11,\n    minor: 4,\n  },\n};\n\nfunction setFontStyle(href) {\n  const fonts = document.createElement('link');\n  fonts.rel = 'stylesheet';\n  fonts.type = 'text/css';\n  fonts.href = href;\n  document.head.appendChild(fonts);\n}\n\nif (passesRequirements(browser, modernFontBrowsers)) {\n  setFontStyle(pluginData.fullCSSFileModern);\n} else {\n  setFontStyle(pluginData.fullCSSFileBasic);\n}\n"],"sourceRoot":""}